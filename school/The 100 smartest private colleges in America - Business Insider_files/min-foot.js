/*!
 * Modernizr v2.6.2
 * www.modernizr.com
 *
 * Copyright (c) Faruk Ates, Paul Irish, Alex Sexton
 * Available under the BSD and MIT licenses: www.modernizr.com/license/
 */
;window.Modernizr=(function(A,c,g){var J="2.6.2",w={},y=true,M=c.documentElement,a="modernizr",I=c.createElement(a),E=I.style,L=c.createElement("input"),C=":)",b={}.toString,j=" -webkit- -moz- -o- -ms- ".split(" "),h="Webkit Moz O ms",F=h.split(" "),K=h.toLowerCase().split(" "),H={svg:"http://www.w3.org/2000/svg"},l={},p={},f={},e=[],k=e.slice,s,n=function(V,X,P,W){var O,U,R,S,N=c.createElement("div"),T=c.body,Q=T||c.createElement("body");if(parseInt(P,10)){while(P--){R=c.createElement("div");R.id=W?W[P]:a+(P+1);N.appendChild(R)}}O=["&#173;",'<style id="s',a,'">',V,"</style>"].join("");N.id=a;(T?N:Q).innerHTML+=O;Q.appendChild(N);if(!T){Q.style.background="";Q.style.overflow="hidden";S=M.style.overflow;M.style.overflow="hidden";M.appendChild(Q)}U=X(N,V);if(!T){Q.parentNode.removeChild(Q);M.style.overflow=S}else{N.parentNode.removeChild(N)}return !!U},G=function(P){var O=A.matchMedia||A.msMatchMedia;if(O){return O(P).matches}var N;n("@media "+P+" { #"+a+" { position: absolute; } }",function(Q){N=(A.getComputedStyle?getComputedStyle(Q,null):Q.currentStyle)["position"]=="absolute"});return N},o=(function(){var O={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function N(P,R){R=R||c.createElement(O[P]||"div");P="on"+P;var Q=P in R;if(!Q){if(!R.setAttribute){R=c.createElement("div")}if(R.setAttribute&&R.removeAttribute){R.setAttribute(P,"");Q=r(R[P],"function");if(!r(R[P],"undefined")){R[P]=g}R.removeAttribute(P)}}R=null;return Q}return N})(),i=({}).hasOwnProperty,x;if(!r(i,"undefined")&&!r(i.call,"undefined")){x=function(N,O){return i.call(N,O)}}else{x=function(N,O){return((O in N)&&r(N.constructor.prototype[O],"undefined"))}}if(!Function.prototype.bind){Function.prototype.bind=function d(P){var Q=this;if(typeof Q!="function"){throw new TypeError()}var N=k.call(arguments,1),O=function(){if(this instanceof O){var T=function(){};T.prototype=Q.prototype;var S=new T();var R=Q.apply(S,N.concat(k.call(arguments)));if(Object(R)===R){return R}return S}else{return Q.apply(P,N.concat(k.call(arguments)))}};return O}}function D(N){E.cssText=N}function u(O,N){return D(j.join(O+";")+(N||""))}function r(O,N){return typeof O===N}function t(O,N){return !!~(""+O).indexOf(N)}function z(P,N){for(var O in P){var Q=P[O];if(!t(Q,"-")&&E[Q]!==g){return N=="pfx"?Q:true}}return false}function q(O,R,Q){for(var N in O){var P=R[O[N]];if(P!==g){if(Q===false){return O[N]}if(r(P,"function")){return P.bind(Q||R)}return P}}return false}function m(R,N,Q){var O=R.charAt(0).toUpperCase()+R.slice(1),P=(R+" "+F.join(O+" ")+O).split(" ");if(r(N,"string")||r(N,"undefined")){return z(P,N)}else{P=(R+" "+(K).join(O+" ")+O).split(" ");return q(P,N,Q)}}l.flexbox=function(){return m("flexWrap")};l.flexboxlegacy=function(){return m("boxDirection")};l.canvas=function(){var N=c.createElement("canvas");return !!(N.getContext&&N.getContext("2d"))};l.canvastext=function(){return !!(w.canvas&&r(c.createElement("canvas").getContext("2d").fillText,"function"))};l.webgl=function(){return !!A.WebGLRenderingContext};l.geolocation=function(){return"geolocation" in navigator};l.postmessage=function(){return !!A.postMessage};l.websqldatabase=function(){return !!A.openDatabase};l.indexedDB=function(){return !!m("indexedDB",A)};l.hashchange=function(){return o("hashchange",A)&&(c.documentMode===g||c.documentMode>7)};l.history=function(){return !!(A.history&&history.pushState)};l.draganddrop=function(){var N=c.createElement("div");return("draggable" in N)||("ondragstart" in N&&"ondrop" in N)};l.websockets=function(){return"WebSocket" in A||"MozWebSocket" in A};l.rgba=function(){D("background-color:rgba(150,255,150,.5)");return t(E.backgroundColor,"rgba")};l.hsla=function(){D("background-color:hsla(120,40%,100%,.5)");return t(E.backgroundColor,"rgba")||t(E.backgroundColor,"hsla")
};l.multiplebgs=function(){D("background:url(https://),url(https://),red url(https://)");return(/(url\s*\(.*?){3}/).test(E.background)};l.backgroundsize=function(){return m("backgroundSize")};l.borderimage=function(){return m("borderImage")};l.borderradius=function(){return m("borderRadius")};l.boxshadow=function(){return m("boxShadow")};l.textshadow=function(){return c.createElement("div").style.textShadow===""};l.opacity=function(){u("opacity:.55");return(/^0.55$/).test(E.opacity)};l.cssanimations=function(){return m("animationName")};l.csscolumns=function(){return m("columnCount")};l.cssgradients=function(){var P="background-image:",O="gradient(linear,left top,right bottom,from(#9f9),to(white));",N="linear-gradient(left top,#9f9, white);";D((P+"-webkit- ".split(" ").join(O+P)+j.join(N+P)).slice(0,-P.length));return t(E.backgroundImage,"gradient")};l.cssreflections=function(){return m("boxReflect")};l.csstransforms=function(){return !!m("transform")};l.csstransforms3d=function(){var N=!!m("perspective");if(N&&"webkitPerspective" in M.style){n("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(O,P){N=O.offsetLeft===9&&O.offsetHeight===3})}return N};l.csstransitions=function(){return m("transition")};l.fontface=function(){var N;n('@font-face {font-family:"font";src:url("https://")}',function(R,S){var Q=c.getElementById("smodernizr"),O=Q.sheet||Q.styleSheet,P=O?(O.cssRules&&O.cssRules[0]?O.cssRules[0].cssText:O.cssText||""):"";N=/src/i.test(P)&&P.indexOf(S.split(" ")[0])===0});return N};l.video=function(){var O=c.createElement("video"),N=false;try{if(N=!!O.canPlayType){N=new Boolean(N);N.ogg=O.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"");N.h264=O.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"");N.webm=O.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}}catch(P){}return N};l.audio=function(){var O=c.createElement("audio"),N=false;try{if(N=!!O.canPlayType){N=new Boolean(N);N.ogg=O.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"");N.mp3=O.canPlayType("audio/mpeg;").replace(/^no$/,"");N.wav=O.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"");N.m4a=(O.canPlayType("audio/x-m4a;")||O.canPlayType("audio/aac;")).replace(/^no$/,"")}}catch(P){}return N};l.localstorage=function(){try{localStorage.setItem(a,a);localStorage.removeItem(a);return true}catch(N){return false}};l.sessionstorage=function(){try{sessionStorage.setItem(a,a);sessionStorage.removeItem(a);return true}catch(N){return false}};l.webworkers=function(){return !!A.Worker};l.applicationcache=function(){return !!A.applicationCache};l.svg=function(){return !!c.createElementNS&&!!c.createElementNS(H.svg,"svg").createSVGRect};l.inlinesvg=function(){var N=c.createElement("div");N.innerHTML="<svg/>";return(N.firstChild&&N.firstChild.namespaceURI)==H.svg};l.smil=function(){return !!c.createElementNS&&/SVGAnimate/.test(b.call(c.createElementNS(H.svg,"animate")))};l.svgclippaths=function(){return !!c.createElementNS&&/SVGClipPath/.test(b.call(c.createElementNS(H.svg,"clipPath")))};function B(){w.input=(function(P){for(var O=0,N=P.length;O<N;O++){f[P[O]]=!!(P[O] in L)}if(f.list){f.list=!!(c.createElement("datalist")&&A.HTMLDataListElement)}return f})("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));w.inputtypes=(function(Q){for(var P=0,O,S,R,N=Q.length;P<N;P++){L.setAttribute("type",S=Q[P]);O=L.type!=="text";if(O){L.value=C;L.style.cssText="position:absolute;visibility:hidden;";if(/^range$/.test(S)&&L.style.WebkitAppearance!==g){M.appendChild(L);R=c.defaultView;O=R.getComputedStyle&&R.getComputedStyle(L,null).WebkitAppearance!=="textfield"&&(L.offsetHeight!==0);M.removeChild(L)}else{if(/^(search|tel)$/.test(S)){}else{if(/^(url|email)$/.test(S)){O=L.checkValidity&&L.checkValidity()===false}else{O=L.value!=C}}}}p[Q[P]]=!!O}return p})("search tel url email datetime date month week time datetime-local number range color".split(" "))
}for(var v in l){if(x(l,v)){s=v.toLowerCase();w[s]=l[v]();e.push((w[s]?"":"no-")+s)}}w.input||B();w.addTest=function(O,P){if(typeof O=="object"){for(var N in O){if(x(O,N)){w.addTest(N,O[N])}}}else{O=O.toLowerCase();if(w[O]!==g){return w}P=typeof P=="function"?P():P;if(typeof y!=="undefined"&&y){M.className+=" "+(P?"":"no-")+O}w[O]=P}return w};D("");I=L=null;
/*! HTML5 Shiv v3.6.1 | @afarkas @jdalton @jon_neal @rem | MIT/GPL2 Licensed */
;(function(W,Y){var Q=W.html5||{};var T=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var O=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var ac;var U="_html5shiv";var N=0;var aa={};var R;(function(){try{var af=Y.createElement("a");af.innerHTML="<xyz></xyz>";ac=("hidden" in af);R=af.childNodes.length==1||(function(){(Y.createElement)("a");var ah=Y.createDocumentFragment();return(typeof ah.cloneNode=="undefined"||typeof ah.createDocumentFragment=="undefined"||typeof ah.createElement=="undefined")}())}catch(ag){ac=true;R=true}}());function S(af,ah){var ai=af.createElement("p"),ag=af.getElementsByTagName("head")[0]||af.documentElement;ai.innerHTML="x<style>"+ah+"</style>";return ag.insertBefore(ai.lastChild,ag.firstChild)}function X(){var af=V.elements;return typeof af=="string"?af.split(" "):af}function ab(af){var ag=aa[af[U]];if(!ag){ag={};N++;af[U]=N;aa[N]=ag}return ag}function Z(ai,af,ah){if(!af){af=Y}if(R){return af.createElement(ai)}if(!ah){ah=ab(af)}var ag;if(ah.cache[ai]){ag=ah.cache[ai].cloneNode()}else{if(O.test(ai)){ag=(ah.cache[ai]=ah.createElem(ai)).cloneNode()}else{ag=ah.createElem(ai)}}return ag.canHaveChildren&&!T.test(ai)?ah.frag.appendChild(ag):ag}function ad(ah,aj){if(!ah){ah=Y}if(R){return ah.createDocumentFragment()}aj=aj||ab(ah);var ak=aj.frag.cloneNode(),ai=0,ag=X(),af=ag.length;for(;ai<af;ai++){ak.createElement(ag[ai])}return ak}function ae(af,ag){if(!ag.cache){ag.cache={};ag.createElem=af.createElement;ag.createFrag=af.createDocumentFragment;ag.frag=ag.createFrag()}af.createElement=function(ah){if(!V.shivMethods){return ag.createElem(ah)}return Z(ah,af,ag)};af.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+X().join().replace(/\w+/g,function(ah){ag.createElem(ah);ag.frag.createElement(ah);return'c("'+ah+'")'})+");return n}")(V,ag.frag)}function P(af){if(!af){af=Y}var ag=ab(af);if(V.shivCSS&&!ac&&!ag.hasCSS){ag.hasCSS=!!S(af,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")}if(!R){ae(af,ag)}return af}var V={elements:Q.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:(Q.shivCSS!==false),supportsUnknownElements:R,shivMethods:(Q.shivMethods!==false),type:"default",shivDocument:P,createElement:Z,createDocumentFragment:ad};W.html5=V;P(Y)}(this,c));w._version=J;w._prefixes=j;w._domPrefixes=K;w._cssomPrefixes=F;w.mq=G;w.hasEvent=o;w.testProp=function(N){return z([N])};w.testAllProps=m;w.testStyles=n;w.prefixed=function(P,O,N){if(!O){return m(P,"pfx")}else{return m(P,O,N)}};M.className=M.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(y?" js "+e.join(" "):"");return w})(this,this.document);(function(a){if(typeof a.fn.each2=="undefined"){a.fn.extend({each2:function(f){var d=a([0]),e=-1,b=this.length;while(++e<b&&(d.context=d[0]=this[e])&&f.call(d[0],e,d)!==false){}return this}})}})(jQuery);(function(j,l){if(window.Select2!==l){return}var c,e,v,B,t,a;c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(C){C=C.which?C.which:C;switch(C){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return true}return false},isControl:function(D){var C=D.which;switch(C){case c.SHIFT:case c.CTRL:case c.ALT:return true}if(D.metaKey){return true}return false},isFunctionKey:function(C){C=C.which?C.which:C;return C>=112&&C<=123}};t=(function(){var C=1;return function(){return C++}}());function b(F,G){var E=0,C=G.length,D;if(typeof F==="undefined"){return -1}if(F.constructor===String){for(;E<C;E=E+1){if(F.localeCompare(G[E])===0){return E}}}else{for(;E<C;E=E+1){D=G[E];if(D.constructor===String){if(D.localeCompare(F)===0){return E}}else{if(D===F){return E}}}}return -1}function q(D,C){if(D===C){return true}if(D===l||C===l){return false}if(D===null||C===null){return false}if(D.constructor===String){return D.localeCompare(C)===0}if(C.constructor===String){return C.localeCompare(D)===0}return false}function m(D,F){var G,E,C;if(D===null||D.length<1){return[]}G=D.split(F);for(E=0,C=G.length;E<C;E=E+1){G[E]=j.trim(G[E])}return G}function n(C){return C.outerWidth()-C.width()}function z(D){var C="keyup-change-value";D.bind("keydown",function(){if(j.data(D,C)===l){j.data(D,C,D.val())}});D.bind("keyup",function(){var E=j.data(D,C);if(E!==l&&D.val()!==E){j.removeData(D,C);D.trigger("keyup-change")}})}j(document).delegate("body","mousemove",function(C){j.data(document,"select2-lastpos",{x:C.pageX,y:C.pageY})});function u(C){C.bind("mousemove",function(E){var D=j.data(document,"select2-lastpos");if(D===l||D.x!==E.pageX||D.y!==E.pageY){j(E.target).trigger("mousemove-filtered",E)}})}function f(F,D,C){C=C||l;var E;return function(){var G=arguments;window.clearTimeout(E);E=window.setTimeout(function(){D.apply(C,G)},F)}}function A(E){var C=false,D;return function(){if(C===false){D=E();C=true}return D}}function g(C,E){var D=f(C,function(F){E.trigger("scroll-debounced",F)});E.bind("scroll",function(F){if(b(F.target,E.get())>=0){D(F)}})}function d(C){C.preventDefault();C.stopPropagation()}function x(D){if(!a){var C=D[0].currentStyle||window.getComputedStyle(D[0],null);a=j("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:C.fontSize,fontFamily:C.fontFamily,fontStyle:C.fontStyle,fontWeight:C.fontWeight,letterSpacing:C.letterSpacing,textTransform:C.textTransform,whiteSpace:"nowrap"});j("body").append(a)}a.text(D.val());return a.width()}function i(G,F,D){var E=G.toUpperCase().indexOf(F.toUpperCase()),C=F.length;if(E<0){D.push(G);return}D.push(G.substring(0,E));D.push("<span class='select2-match'>");D.push(G.substring(E,E+C));D.push("</span>");D.push(G.substring(E+C,G.length))}function p(D){var F,C=0,E=null,G=D.quietMillis||100;return function(H){window.clearTimeout(F);F=window.setTimeout(function(){C+=1;var I=C,L=D.data,M=D.transport||j.ajax,K=D.traditional||false,J=D.type||"GET";L=L.call(this,H.term,H.page,H.context);if(null!==E){E.abort()}E=M.call(null,{url:D.url,dataType:D.dataType,data:L,type:J,traditional:K,success:function(O){if(I<C){return}var N=D.results(O,H.page);H.callback(N)}})},G)}}function r(C){var E=C,D,F=function(G){return""+G.text};if(!j.isArray(E)){F=E.text;if(!j.isFunction(F)){D=E.text;F=function(G){return G[D]}}E=E.results}return function(I){var H=I.term,G={results:[]},J;if(H===""){I.callback({results:E});return}J=function(L,N){var M,K;L=L[0];if(L.children){M={};for(K in L){if(L.hasOwnProperty(K)){M[K]=L[K]}}M.children=[];j(L.children).each2(function(O,P){J(P,M.children)});if(M.children.length){N.push(M)}}else{if(I.matcher(H,F(L))){N.push(L)}}};j(E).each2(function(L,K){J(K,G.results)});I.callback(G)
}}function o(C){if(j.isFunction(C)){return C}return function(F){var E=F.term,D={results:[]};j(C).each(function(){var G=this.text!==l,H=G?this.text:this;if(E===""||F.matcher(E,H)){D.results.push(G?this:{id:this,text:this})}});F.callback(D)}}function k(C,D){if(j.isFunction(C)){return true}if(!C){return false}throw new Error("formatterName must be a function or a falsy value")}function s(C){return j.isFunction(C)?C():C}function h(C){var D=0;j.each(C,function(E,F){if(F.children){D+=h(F.children)}else{D++}});return D}function y(K,L,I,C){var D=K,M=false,F,J,G,E,H;if(!C.createSearchChoice||!C.tokenSeparators||C.tokenSeparators.length<1){return l}while(true){J=-1;for(G=0,E=C.tokenSeparators.length;G<E;G++){H=C.tokenSeparators[G];J=K.indexOf(H);if(J>=0){break}}if(J<0){break}F=K.substring(0,J);K=K.substring(J+H.length);if(F.length>0){F=C.createSearchChoice(F,L);if(F!==l&&F!==null&&C.id(F)!==l&&C.id(F)!==null){M=false;for(G=0,E=L.length;G<E;G++){if(q(C.id(F),C.id(L[G]))){M=true;break}}if(!M){I(F)}}}}if(D.localeCompare(K)!=0){return K}}j(document).ready(function(){j(document).delegate("body","mousedown touchend",function(E){var D=j(E.target).closest("div.select2-container").get(0),C;if(D){j(document).find("div.select2-container-active").each(function(){if(this!==D){j(this).data("select2").blur()}})}else{D=j(E.target).closest("div.select2-drop").get(0);j(document).find("div.select2-drop-active").each(function(){if(this!==D){j(this).data("select2").blur()}})}D=j(E.target);C=D.attr("for");if("LABEL"===E.target.tagName&&C&&C.length>0){D=j("#"+C);D=D.data("select2");if(D!==l){D.focus();E.preventDefault()}}})});function w(C,D){var E=function(){};E.prototype=new C;E.prototype.constructor=E;E.prototype.parent=C.prototype;E.prototype=j.extend(E.prototype,D);return E}e=w(Object,{bind:function(D){var C=this;return function(){D.apply(C,arguments)}},init:function(E){var D,C,F=".select2-results";this.opts=E=this.prepareOpts(E);this.id=E.id;if(E.element.data("select2")!==l&&E.element.data("select2")!==null){this.destroy()}this.enabled=true;this.container=this.createContainer();this.containerId="s2id_"+(E.element.attr("id")||"autogen"+t());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.body=A(function(){return E.element.closest("body")});if(E.element.attr("class")!==l){this.container.addClass(E.element.attr("class").replace(/validate\[[\S ]+] ?/,""))}this.container.css(s(E.containerCss));this.container.addClass(s(E.containerCssClass));this.opts.element.data("select2",this).hide().before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(s(E.dropdownCssClass));this.dropdown.data("select2",this);this.results=D=this.container.find(F);this.search=C=this.container.find("input.select2-input");C.attr("tabIndex",this.opts.element.attr("tabIndex"));this.resultsPage=0;this.context=null;this.initContainer();this.initContainerWidth();u(this.results);this.dropdown.delegate(F,"mousemove-filtered",this.bind(this.highlightUnderEvent));g(80,this.results);this.dropdown.delegate(F,"scroll-debounced",this.bind(this.loadMoreIfNeeded));if(j.fn.mousewheel){D.mousewheel(function(K,L,I,H){var J=D.scrollTop(),G;if(H>0&&J-H<=0){D.scrollTop(0);d(K)}else{if(H<0&&D.get(0).scrollHeight-D.scrollTop()+H<=D.height()){D.scrollTop(D.get(0).scrollHeight-D.height());d(K)}}})}z(C);C.bind("keyup-change",this.bind(this.updateResults));C.bind("focus",function(){C.addClass("select2-focused");if(C.val()===" "){C.val("")}});C.bind("blur",function(){C.removeClass("select2-focused")});this.dropdown.delegate(F,"mouseup",this.bind(function(G){if(j(G.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0){this.highlightUnderEvent(G);this.selectHighlighted(G)}else{this.focusSearch()}d(G)}));this.dropdown.bind("click mouseup mousedown",function(G){G.stopPropagation()});if(j.isFunction(this.opts.initSelection)){this.initSelection();
this.monitorSource()}if(E.element.is(":disabled")||E.element.is("[readonly='readonly']")){this.disable()}},destroy:function(){var C=this.opts.element.data("select2");if(C!==l){C.container.remove();C.dropdown.remove();C.opts.element.removeData("select2").unbind(".select2").show()}},prepareOpts:function(G){var E,D,C,F;E=G.element;if(E.get(0).tagName.toLowerCase()==="select"){this.select=D=G.element}if(D){j.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in G){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}})}G=j.extend({},{populateResults:function(H,L,N){var M,K,P,J,I=this.opts.id,O=this;M=function(V,Q,U){var W,S,ab,Y,aa,R,Z,X,T;for(W=0,S=V.length;W<S;W=W+1){ab=V[W];Y=I(ab)!==l;aa=ab.children&&ab.children.length>0;R=j("<li></li>");R.addClass("select2-results-dept-"+U);R.addClass("select2-result");R.addClass(Y?"select2-result-selectable":"select2-result-unselectable");if(aa){R.addClass("select2-result-with-children")}R.addClass(O.opts.formatResultCssClass(ab));Z=j("<div></div>");Z.addClass("select2-result-label");T=G.formatResult(ab,Z,N);if(T!==l){Z.html(O.opts.escapeMarkup(T))}R.append(Z);if(aa){X=j("<ul></ul>");X.addClass("select2-result-sub");M(ab.children,X,U+1);R.append(X)}R.data("select2-data",ab);Q.append(R)}};M(L,H,0)}},j.fn.select2.defaults,G);if(typeof(G.id)!=="function"){C=G.id;G.id=function(H){return H[C]}}if(D){G.query=this.bind(function(K){var J={results:[],more:false},I=K.term,H,M,L;L=function(N,P){var O;if(N.is("option")){if(K.matcher(I,N.text(),N)){P.push({id:N.attr("value"),text:N.text(),element:N.get(),css:N.attr("class")})}}else{if(N.is("optgroup")){O={text:N.attr("label"),children:[],element:N.get(),css:N.attr("class")};N.children().each2(function(Q,R){L(R,O.children)});if(O.children.length>0){P.push(O)}}}};H=E.children();if(this.getPlaceholder()!==l&&H.length>0){M=H[0];if(j(M).text()===""){H=H.not(M)}}H.each2(function(N,O){L(O,J.results)});K.callback(J)});G.id=function(H){return H.id};G.formatResultCssClass=function(H){return H.css}}else{if(!("query" in G)){if("ajax" in G){F=G.element.data("ajax-url");if(F&&F.length>0){G.ajax.url=F}G.query=p(G.ajax)}else{if("data" in G){G.query=r(G.data)}else{if("tags" in G){G.query=o(G.tags);G.createSearchChoice=function(H){return{id:H,text:H}};G.initSelection=function(H,J){var I=[];j(m(H.val(),G.separator)).each(function(){var M=this,L=this,K=G.tags;if(j.isFunction(K)){K=K()}j(K).each(function(){if(q(this.id,M)){L=this.text;return false}});I.push({id:M,text:L})});J(I)}}}}}}if(typeof(G.query)!=="function"){throw"query function not defined for Select2 "+G.element.attr("id")}return G},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(C){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection()}}))},triggerChange:function(C){C=C||{};C=j.extend({},C,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(C);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange){this.opts.element.blur()}},enable:function(){if(this.enabled){return}this.enabled=true;this.container.removeClass("select2-container-disabled")},disable:function(){if(!this.enabled){return}this.close();this.enabled=false;this.container.addClass("select2-container-disabled")},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var G=this.container.offset(),O=this.container.outerHeight(),D=this.container.outerWidth(),F=this.dropdown.outerHeight(),K=j(window).scrollTop()+document.documentElement.clientHeight,C=G.top+O,N=G.left,L=C+F<=K,J=(G.top-F)>=this.body().scrollTop(),E=this.dropdown.hasClass("select2-drop-above"),H,M,I;if(this.body().css("position")!=="static"){H=this.body().offset();C-=H.top;N-=H.left}if(E){M=true;if(!J&&L){M=false}}else{M=false;if(!L&&J){M=true}}if(M){C=G.top-F;this.container.addClass("select2-drop-above");
this.dropdown.addClass("select2-drop-above")}else{this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")}I=j.extend({top:C,left:N,width:D},s(this.opts.dropdownCss));this.dropdown.css(I)},shouldOpen:function(){var C;if(this.opened()){return false}C=j.Event("open");this.opts.element.trigger(C);return !C.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen()){return false}window.setTimeout(this.bind(this.opening),1);return true},opening:function(){var F=this.containerId,D=this.containerSelector,C="scroll."+F,E="resize."+F;this.container.parents().each(function(){j(this).bind(C,function(){var G=j(D);if(G.length==0){j(this).unbind(C)}G.select2("close")})});j(window).bind(E,function(){var G=j(D);if(G.length==0){j(window).unbind(E)}G.select2("close")});this.clearDropdownAlignmentPreference();if(this.search.val()===" "){this.search.val("")}this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.updateResults(true);if(this.dropdown[0]!==this.body().children().last()[0]){this.dropdown.detach().appendTo(this.body())}this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();this.focusSearch()},close:function(){if(!this.opened()){return}var C=this;this.container.parents().each(function(){j(this).unbind("scroll."+C.containerId)});j(window).unbind("resize."+this.containerId);this.clearDropdownAlignmentPreference();this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.opts.element.trigger(j.Event("close"))},clearSearch:function(){},ensureHighlightVisible:function(){var F=this.results,E,C,J,I,G,H,D;C=this.highlight();if(C<0){return}if(C==0){F.scrollTop(0);return}E=F.find(".select2-result-selectable");J=j(E[C]);I=J.offset().top+J.outerHeight();if(C===E.length-1){D=F.find("li.select2-more-results");if(D.length>0){I=D.offset().top+D.outerHeight()}}G=F.offset().top+F.outerHeight();if(I>G){F.scrollTop(F.scrollTop()+(I-G))}H=J.offset().top-F.offset().top;if(H<0){F.scrollTop(F.scrollTop()+H)}},moveHighlight:function(F){var E=this.results.find(".select2-result-selectable"),D=this.highlight();while(D>-1&&D<E.length){D+=F;var C=j(E[D]);if(C.hasClass("select2-result-selectable")&&!C.hasClass("select2-disabled")){this.highlight(D);break}}},highlight:function(C){var D=this.results.find(".select2-result-selectable").not(".select2-disabled");if(arguments.length===0){return b(D.filter(".select2-highlighted")[0],D.get())}if(C>=D.length){C=D.length-1}if(C<0){C=0}D.removeClass("select2-highlighted");j(D[C]).addClass("select2-highlighted");this.ensureHighlightVisible()},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(D){var C=j(D.target).closest(".select2-result-selectable");if(C.length>0&&!C.is(".select2-highlighted")){var E=this.results.find(".select2-result-selectable");this.highlight(E.index(C))}else{if(C.length==0){this.results.find(".select2-highlighted").removeClass("select2-highlighted")}}},loadMoreIfNeeded:function(){var G=this.results,F=G.find("li.select2-more-results"),J,I=-1,H=this.resultsPage+1,C=this,E=this.search.val(),D=this.context;if(F.length===0){return}J=F.offset().top-G.offset().top-G.height();if(J<=0){F.addClass("select2-active");this.opts.query({term:E,page:H,context:D,matcher:this.opts.matcher,callback:this.bind(function(K){if(!C.opened()){return}C.opts.populateResults.call(this,G,K.results,{term:E,page:H,context:D});if(K.more===true){F.detach().appendTo(G).text(C.opts.formatLoadMore(H+1));window.setTimeout(function(){C.loadMoreIfNeeded()},10)}else{F.remove()}C.positionDropdown();C.resultsPage=H})})}},tokenize:function(){},updateResults:function(H){var K=this.search,F=this.results,C=this.opts,E,J=this,I;
if(H!==true&&(this.showSearchInput===false||!this.opened())){return}K.addClass("select2-active");function G(){F.scrollTop(0);K.removeClass("select2-active");J.positionDropdown()}function D(L){F.html(J.opts.escapeMarkup(L));G()}if(C.maximumSelectionSize>=1){E=this.data();if(j.isArray(E)&&E.length>=C.maximumSelectionSize&&k(C.formatSelectionTooBig,"formatSelectionTooBig")){D("<li class='select2-selection-limit'>"+C.formatSelectionTooBig(C.maximumSelectionSize)+"</li>");return}}if(K.val().length<C.minimumInputLength&&k(C.formatInputTooShort,"formatInputTooShort")){D("<li class='select2-no-results'>"+C.formatInputTooShort(K.val(),C.minimumInputLength)+"</li>");return}else{D("<li class='select2-searching'>"+C.formatSearching()+"</li>")}I=this.tokenize();if(I!=l&&I!=null){K.val(I)}this.resultsPage=1;C.query({term:K.val(),page:this.resultsPage,context:null,matcher:C.matcher,callback:this.bind(function(M){var L;if(!this.opened()){return}this.context=(M.context===l)?null:M.context;if(this.opts.createSearchChoice&&K.val()!==""){L=this.opts.createSearchChoice.call(null,K.val(),M.results);if(L!==l&&L!==null&&J.id(L)!==l&&J.id(L)!==null){if(j(M.results).filter(function(){return q(J.id(this),J.id(L))}).length===0){M.results.unshift(L)}}}if(M.results.length===0&&k(C.formatNoMatches,"formatNoMatches")){D("<li class='select2-no-results'>"+C.formatNoMatches(K.val())+"</li>");return}F.empty();J.opts.populateResults.call(this,F,M.results,{term:K.val(),page:this.resultsPage,context:null});if(M.more===true&&k(C.formatLoadMore,"formatLoadMore")){F.append("<li class='select2-more-results'>"+J.opts.escapeMarkup(C.formatLoadMore(this.resultsPage))+"</li>");window.setTimeout(function(){J.loadMoreIfNeeded()},10)}this.postprocessResults(M,H);G()})})},cancel:function(){this.close()},blur:function(){this.close();this.container.removeClass("select2-container-active");this.dropdown.removeClass("select2-drop-active");if(this.search[0]===document.activeElement){this.search.blur()}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){this.search.show();this.search.focus();window.setTimeout(this.bind(function(){this.search.show();this.search.focus();this.search.val(this.search.val())}),10)},selectHighlighted:function(){var C=this.highlight(),D=this.results.find(".select2-highlighted").not(".select2-disabled"),E=D.closest(".select2-result-selectable").data("select2-data");if(E){D.addClass("select2-disabled");this.highlight(C);this.onSelect(E)}},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function D(){var H,F,I,G,E;if(this.opts.width==="off"){return null}else{if(this.opts.width==="element"){return this.opts.element.outerWidth()===0?"auto":this.opts.element.outerWidth()+"px"}else{if(this.opts.width==="copy"||this.opts.width==="resolve"){H=this.opts.element.attr("style");if(H!==l){F=H.split(";");for(G=0,E=F.length;G<E;G=G+1){I=F[G].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(I!==null&&I.length>=1){return I[1]}}}if(this.opts.width==="resolve"){H=this.opts.element.css("width");if(H.indexOf("%")>0){return H}return(this.opts.element.outerWidth()===0?"auto":this.opts.element.outerWidth()+"px")}return null}else{if(j.isFunction(this.opts.width)){return this.opts.width()}else{return this.opts.width}}}}}var C=D.call(this);if(C!==null){this.container.attr("style","width: "+C)}}});v=w(e,{createContainer:function(){var C=j("<div></div>",{"class":"select2-container"}).html(["    <a href='#' onclick='return false;' class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));
return C},opening:function(){this.search.show();this.parent.opening.apply(this,arguments);this.dropdown.removeClass("select2-offscreen")},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments);this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show()},focus:function(){this.close();this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments);this.selection.focus()},initContainer:function(){var E,D=this.container,F=this.dropdown,C=false;this.selection=E=D.find(".select2-choice");this.search.bind("keydown",this.bind(function(G){if(!this.enabled){return}if(G.which===c.PAGE_UP||G.which===c.PAGE_DOWN){d(G);return}if(this.opened()){switch(G.which){case c.UP:case c.DOWN:this.moveHighlight((G.which===c.UP)?-1:1);d(G);return;case c.TAB:case c.ENTER:this.selectHighlighted();d(G);return;case c.ESC:this.cancel(G);d(G);return}}else{if(G.which===c.TAB||c.isControl(G)||c.isFunctionKey(G)||G.which===c.ESC){return}if(this.opts.openOnEnter===false&&G.which===c.ENTER){return}this.open();if(G.which===c.ENTER){return}}}));this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")}));this.search.bind("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active")}window.setTimeout(this.bind(function(){this.selection.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)}));E.bind("mousedown",this.bind(function(G){C=true;if(this.opened()){this.close();this.selection.focus()}else{if(this.enabled){this.open()}}C=false}));F.bind("mousedown",this.bind(function(){this.search.focus()}));E.bind("focus",this.bind(function(){this.container.addClass("select2-container-active");this.search.attr("tabIndex","-1")}));E.bind("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active")}window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)}));E.bind("keydown",this.bind(function(H){if(!this.enabled){return}if(H.which===c.PAGE_UP||H.which===c.PAGE_DOWN){d(H);return}if(H.which===c.TAB||c.isControl(H)||c.isFunctionKey(H)||H.which===c.ESC){return}if(this.opts.openOnEnter===false&&H.which===c.ENTER){return}if(H.which==c.DELETE){if(this.opts.allowClear){this.clear()}return}this.open();if(H.which===c.ENTER){d(H);return}if(H.which<48){d(H);return}var G=String.fromCharCode(H.which).toLowerCase();if(H.shiftKey){G=G.toUpperCase()}this.search.focus();this.search.val(G);d(H)}));E.delegate("abbr","mousedown",this.bind(function(G){if(!this.enabled){return}this.clear();d(G);this.close();this.triggerChange();this.selection.focus()}));this.setPlaceholder();this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder()},initSelection:function(){var D;if(this.opts.element.val()===""){this.close();this.setPlaceholder()}else{var C=this;this.opts.initSelection.call(null,this.opts.element,function(E){if(E!==l&&E!==null){C.updateSelection(E);C.close();C.setPlaceholder()}})}},prepareOpts:function(){var C=this.parent.prepareOpts.apply(this,arguments);if(C.element.get(0).tagName.toLowerCase()==="select"){C.initSelection=function(D,F){var E=D.find(":selected");if(j.isFunction(F)){F({id:E.attr("value"),text:E.text()})}}}return C},setPlaceholder:function(){var C=this.getPlaceholder();if(this.opts.element.val()===""&&C!==l){if(this.select&&this.select.find("option:first").text()!==""){return}this.selection.find("span").html(this.opts.escapeMarkup(C));this.selection.addClass("select2-default");this.selection.find("abbr").hide()}},postprocessResults:function(F,D){var E=0,C=this,G=true;this.results.find(".select2-result-selectable").each2(function(H,I){if(q(C.id(I.data("select2-data")),C.opts.element.val())){E=H;
return false}});this.highlight(E);if(D===true){G=this.showSearchInput=h(F.results)>=this.opts.minimumResultsForSearch;this.dropdown.find(".select2-search")[G?"removeClass":"addClass"]("select2-search-hidden");j(this.dropdown,this.container)[G?"addClass":"removeClass"]("select2-with-searchbox")}},onSelect:function(D){var C=this.opts.element.val();this.opts.element.val(this.id(D));this.updateSelection(D);this.close();this.selection.focus();if(!q(C,this.id(D))){this.triggerChange()}},updateSelection:function(E){var C=this.selection.find("span"),D;this.selection.data("select2-data",E);C.empty();D=this.opts.formatSelection(E,C);if(D!==l){C.append(this.opts.escapeMarkup(D))}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==l){this.selection.find("abbr").show()}},val:function(){var E,D=null,C=this;if(arguments.length===0){return this.opts.element.val()}E=arguments[0];if(this.select){this.select.val(E).find(":selected").each2(function(F,G){D={id:G.attr("value"),text:G.text()};return false});this.updateSelection(D);this.setPlaceholder()}else{if(this.opts.initSelection===l){throw new Error("cannot call val() if initSelection() is not defined")}if(!E){this.clear();return}this.opts.element.val(E);this.opts.initSelection(this.opts.element,function(F){C.opts.element.val(!F?"":C.id(F));C.updateSelection(F);C.setPlaceholder()})}},clearSearch:function(){this.search.val("")},data:function(D){var C;if(arguments.length===0){C=this.selection.data("select2-data");if(C==l){C=null}return C}else{if(!D||D===""){this.clear()}else{this.opts.element.val(!D?"":this.id(D));this.updateSelection(D)}}}});B=w(e,{createContainer:function(){var C=j("<div></div>",{"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return C},prepareOpts:function(){var C=this.parent.prepareOpts.apply(this,arguments);if(C.element.get(0).tagName.toLowerCase()==="select"){C.initSelection=function(D,F){var E=[];D.find(":selected").each2(function(G,H){E.push({id:H.attr("value"),text:H.text()})});if(j.isFunction(F)){F(E)}}}return C},initContainer:function(){var C=".select2-choices",D;this.searchContainer=this.container.find(".select2-search-field");this.selection=D=this.container.find(C);this.search.bind("keydown",this.bind(function(F){if(!this.enabled){return}if(F.which===c.BACKSPACE&&this.search.val()===""){this.close();var G,E=D.find(".select2-search-choice-focus");if(E.length>0){this.unselect(E.first());this.search.width(10);d(F);return}G=D.find(".select2-search-choice");if(G.length>0){G.last().addClass("select2-search-choice-focus")}}else{D.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")}if(this.opened()){switch(F.which){case c.UP:case c.DOWN:this.moveHighlight((F.which===c.UP)?-1:1);d(F);return;case c.ENTER:case c.TAB:this.selectHighlighted();d(F);return;case c.ESC:this.cancel(F);d(F);return}}if(F.which===c.TAB||c.isControl(F)||c.isFunctionKey(F)||F.which===c.BACKSPACE||F.which===c.ESC){return}if(this.opts.openOnEnter===false&&F.which===c.ENTER){return}this.open();if(F.which===c.PAGE_UP||F.which===c.PAGE_DOWN){d(F)}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(E){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.clearSearch();E.stopImmediatePropagation()}));this.container.delegate(C,"mousedown",this.bind(function(E){if(!this.enabled){return}if(j(E.target).closest(".select2-search-choice").length>0){return}this.clearPlaceholder();this.open();this.focusSearch();E.preventDefault()}));this.container.delegate(C,"focus",this.bind(function(){if(!this.enabled){return}this.container.addClass("select2-container-active");
this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.clearSearch()},enable:function(){if(this.enabled){return}this.parent.enable.apply(this,arguments);this.search.removeAttr("disabled")},disable:function(){if(!this.enabled){return}this.parent.disable.apply(this,arguments);this.search.attr("disabled",true)},initSelection:function(){var D;if(this.opts.element.val()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var C=this;this.opts.initSelection.call(null,this.opts.element,function(E){if(E!==l&&E!==null){C.updateSelection(E);C.close();C.clearSearch()}})}},clearSearch:function(){var C=this.getPlaceholder();if(C!==l&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(C).addClass("select2-default");this.resizeSearch()}else{this.search.val(" ").width(10)}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default")}else{if(this.search.val()===" "){this.search.val("")}}},opening:function(){this.parent.opening.apply(this,arguments);this.clearPlaceholder();this.resizeSearch();this.focusSearch()},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(F){var E=[],D=[],C=this;j(F).each(function(){if(b(C.id(this),E)<0){E.push(C.id(this));D.push(this)}});F=D;this.selection.find(".select2-search-choice").remove();j(F).each(function(){C.addSelectedChoice(this)});C.postprocessResults()},tokenize:function(){var C=this.search.val();C=this.opts.tokenizer(C,this.data(),this.bind(this.onSelect),this.opts);if(C!=null&&C!=l){this.search.val(C);if(C.length>0){this.open()}}},onSelect:function(C){this.addSelectedChoice(C);if(this.select){this.postprocessResults()}if(this.opts.closeOnSelect){this.close();this.search.width(10)}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();this.positionDropdown()}else{this.close()}}this.triggerChange({added:C});this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(E){var C=j("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),G=this.id(E),F=this.getVal(),D;D=this.opts.formatSelection(E,C);C.find("div").replaceWith("<div>"+this.opts.escapeMarkup(D)+"</div>");C.find(".select2-search-choice-close").bind("mousedown",d).bind("click dblclick",this.bind(function(H){if(!this.enabled){return}j(H.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(j(H.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue();d(H)})).bind("focus",this.bind(function(){if(!this.enabled){return}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}));C.data("select2-data",E);C.insertBefore(this.searchContainer);F.push(G);this.setVal(F)},unselect:function(D){var F=this.getVal(),E,C;D=D.closest(".select2-search-choice");if(D.length===0){throw"Invalid argument: "+D+". Must be .select2-search-choice"}E=D.data("select2-data");C=b(this.id(E),F);if(C>=0){F.splice(C,1);this.setVal(F);if(this.select){this.postprocessResults()}}D.remove();this.triggerChange({removed:E})},postprocessResults:function(){var E=this.getVal(),F=this.results.find(".select2-result-selectable"),D=this.results.find(".select2-result-with-children"),C=this;F.each2(function(H,G){var I=C.id(G.data("select2-data"));if(b(I,E)>=0){G.addClass("select2-disabled").removeClass("select2-result-selectable")}else{G.removeClass("select2-disabled").addClass("select2-result-selectable")}});D.each2(function(G,H){if(H.find(".select2-result-selectable").length==0){H.addClass("select2-disabled")}else{H.removeClass("select2-disabled")
}});F.each2(function(H,G){if(!G.hasClass("select2-disabled")&&G.hasClass("select2-result-selectable")){C.highlight(0);return false}})},resizeSearch:function(){var H,F,E,C,D,G=n(this.search);H=x(this.search)+10;F=this.search.offset().left;E=this.selection.width();C=this.selection.offset().left;D=E-(F-C)-G;if(D<H){D=E-G}if(D<40){D=E-G}this.search.width(D)},getVal:function(){var C;if(this.select){C=this.select.val();return C===null?[]:C}else{C=this.opts.element.val();return m(C,this.opts.separator)}},setVal:function(D){var C;if(this.select){this.select.val(D)}else{C=[];j(D).each(function(){if(b(this,C)<0){C.push(this)}});this.opts.element.val(C.length===0?"":C.join(this.opts.separator))}},val:function(){var E,D=[],C=this;if(arguments.length===0){return this.getVal()}E=arguments[0];if(!E){this.opts.element.val("");this.updateSelection([]);this.clearSearch();return}this.setVal(E);if(this.select){this.select.find(":selected").each(function(){D.push({id:j(this).attr("value"),text:j(this).text()})});this.updateSelection(D)}else{if(this.opts.initSelection===l){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(G){var F=j(G).map(C.id);C.setVal(F);C.updateSelection(G);C.clearSearch()})}this.clearSearch()},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var D=[],C=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){D.push(C.opts.id(j(this).data("select2-data")))});this.setVal(D);this.triggerChange()},data:function(D){var C=this,E;if(arguments.length===0){return this.selection.find(".select2-search-choice").map(function(){return j(this).data("select2-data")}).get()}else{if(!D){D=[]}E=j.map(D,function(F){return C.opts.id(F)});this.setVal(E);this.updateSelection(D);this.clearSearch()}}});j.fn.select2=function(){var F=Array.prototype.slice.call(arguments,0),G,E,H,D,C=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];this.each(function(){if(F.length===0||typeof(F[0])==="object"){G=F.length===0?{}:j.extend({},F[0]);G.element=j(this);if(G.element.get(0).tagName.toLowerCase()==="select"){D=G.element.attr("multiple")}else{D=G.multiple||false;if("tags" in G){G.multiple=D=true}}E=D?new B():new v();E.init(G)}else{if(typeof(F[0])==="string"){if(b(F[0],C)<0){throw"Unknown method: "+F[0]}H=l;E=j(this).data("select2");if(E===l){return}if(F[0]==="container"){H=E.container}else{H=E[F[0]].apply(E,F.slice(1))}if(H!==l){return false}}else{throw"Invalid arguments to select2 plugin: "+F}}});return(H===l)?this:H};j.fn.select2.defaults={width:"copy",closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(C,D,F){var E=[];i(C.text,F.term,E);return E.join("")},formatSelection:function(D,C){return D?D.text:l},formatResultCssClass:function(C){return l},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(C,D){return"Please enter "+(D-C.length)+" more characters"},formatSelectionTooBig:function(C){return"You can only select "+C+" item"+(C==1?"":"s")},formatLoadMore:function(C){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(C){return C.id},matcher:function(C,D){return D.toUpperCase().indexOf(C.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:y,escapeMarkup:function(C){if(C&&typeof(C)==="string"){return C.replace(/&/g,"&amp;")}return C},blurOnChange:false};window.Select2={query:{ajax:p,local:r,tags:o},util:{debounce:f,markMatch:i},"class":{"abstract":e,single:v,multi:B}}
}(jQuery));(function(d,g){var f=d.jQuery||d.Cowboy||(d.Cowboy={}),e;f.throttle=e=function(m,l,a,b){var c,n=0;if(typeof l!=="boolean"){b=a;a=l;l=g}function k(){var p=this,h=+new Date()-n,q=arguments;function i(){n=+new Date();a.apply(p,q)}function j(){c=g}if(b&&!c){i()}c&&clearTimeout(c);if(b===g&&h>m){i()}else{if(l!==true){c=setTimeout(b?j:i,b===g?m-h:m)}}}if(f.guid){k.guid=a.guid=a.guid||f.guid++}return k};f.debounce=function(c,b,a){return a===g?e(c,b,false):e(c,a,b!==false)}})(this);/*!
 * jQuery UI 1.8.9
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(d,b){function a(c){return !d(c).parents().andSelf().filter(function(){return d.curCSS(this,"visibility")==="hidden"||d.expr.filters.hidden(this)}).length}d.ui=d.ui||{};if(!d.ui.version){d.extend(d.ui,{version:"1.8.9",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});d.fn.extend({_focus:d.fn.focus,focus:function(e,c){return typeof e==="number"?this.each(function(){var f=this;setTimeout(function(){d(f).focus();c&&c.call(f)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var c;c=d.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(d.curCSS(this,"position",1))&&/(auto|scroll)/.test(d.curCSS(this,"overflow",1)+d.curCSS(this,"overflow-y",1)+d.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(d.curCSS(this,"overflow",1)+d.curCSS(this,"overflow-y",1)+d.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!c.length?d(document):c},zIndex:function(e){if(e!==b){return this.css("zIndex",e)}if(this.length){e=d(this[0]);for(var c;e.length&&e[0]!==document;){c=e.css("position");if(c==="absolute"||c==="relative"||c==="fixed"){c=parseInt(e.css("zIndex"),10);if(!isNaN(c)&&c!==0){return c}}e=e.parent()}}return 0},disableSelection:function(){return this.bind((d.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(c){c.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});d.each(["Width","Height"],function(f,c){function l(n,i,h,e){d.each(k,function(){i-=parseFloat(d.curCSS(n,"padding"+this,true))||0;if(h){i-=parseFloat(d.curCSS(n,"border"+this+"Width",true))||0}if(e){i-=parseFloat(d.curCSS(n,"margin"+this,true))||0}});return i}var k=c==="Width"?["Left","Right"]:["Top","Bottom"],j=c.toLowerCase(),g={innerWidth:d.fn.innerWidth,innerHeight:d.fn.innerHeight,outerWidth:d.fn.outerWidth,outerHeight:d.fn.outerHeight};d.fn["inner"+c]=function(e){if(e===b){return g["inner"+c].call(this)}return this.each(function(){d(this).css(j,l(this,e)+"px")})};d.fn["outer"+c]=function(h,e){if(typeof h!=="number"){return g["outer"+c].call(this,h)}return this.each(function(){d(this).css(j,l(this,h,true,e)+"px")})}});d.extend(d.expr[":"],{data:function(e,c,f){return !!d.data(e,f[3])},focusable:function(e){var c=e.nodeName.toLowerCase(),f=d.attr(e,"tabindex");if("area"===c){c=e.parentNode;f=c.name;if(!e.href||!f||c.nodeName.toLowerCase()!=="map"){return false}e=d("img[usemap=#"+f+"]")[0];return !!e&&a(e)}return(/input|select|textarea|button|object/.test(c)?!e.disabled:"a"==c?e.href||!isNaN(f):!isNaN(f))&&a(e)},tabbable:function(e){var c=d.attr(e,"tabindex");return(isNaN(c)||c>=0)&&d(e).is(":focusable")}});d(function(){var e=document.body,c=e.appendChild(c=document.createElement("div"));d.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});d.support.minHeight=c.offsetHeight===100;d.support.selectstart="onselectstart" in c;e.removeChild(c).style.display="none"});d.extend(d.ui,{plugin:{add:function(f,c,h){f=d.ui[f].prototype;for(var g in h){f.plugins[g]=f.plugins[g]||[];f.plugins[g].push([c,h[g]])}},call:function(f,c,h){if((c=f.plugins[c])&&f.element[0].parentNode){for(var g=0;g<c.length;g++){f.options[c[g][0]]&&c[g][1].apply(f.element,h)}}}},contains:function(e,c){return document.compareDocumentPosition?e.compareDocumentPosition(c)&16:e!==c&&e.contains(c)
},hasScroll:function(e,c){if(d(e).css("overflow")==="hidden"){return false}c=c&&c==="left"?"scrollLeft":"scrollTop";var f=false;if(e[c]>0){return true}e[c]=1;f=e[c]>0;e[c]=0;return f},isOverAxis:function(e,c,f){return e>c&&e<c+f},isOver:function(f,c,l,k,j,g){return d.ui.isOverAxis(f,l,j)&&d.ui.isOverAxis(c,k,g)}})}})(jQuery);
/*!
 * jQuery UI Widget 1.8.9
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(a,e){if(a.cleanData){var d=a.cleanData;a.cleanData=function(b){for(var g=0,f;(f=b[g])!=null;g++){a(f).triggerHandler("remove")}d(b)}}else{var c=a.fn.remove;a.fn.remove=function(b,f){return this.each(function(){if(!f){if(!b||a.filter(b,[this]).length){a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")})}}return c.call(a(this),b,f)})}}a.widget=function(b,j,i){var h=b.split(".")[0],g;b=b.split(".")[1];g=h+"-"+b;if(!i){i=j;j=a.Widget}a.expr[":"][g]=function(f){return !!a.data(f,b)};a[h]=a[h]||{};a[h][b]=function(f,k){arguments.length&&this._createWidget(f,k)};j=new j;j.options=a.extend(true,{},j.options);a[h][b].prototype=a.extend(true,j,{namespace:h,widgetName:b,widgetEventPrefix:a[h][b].prototype.widgetEventPrefix||b,widgetBaseClass:g},i);a.widget.bridge(b,a[h][b])};a.widget.bridge=function(b,f){a.fn[b]=function(k){var j=typeof k==="string",i=Array.prototype.slice.call(arguments,1),g=this;k=!j&&i.length?a.extend.apply(null,[true,k].concat(i)):k;if(j&&k.charAt(0)==="_"){return g}j?this.each(function(){var l=a.data(this,b),h=l&&a.isFunction(l[k])?l[k].apply(l,i):l;if(h!==l&&h!==e){g=h;return false}}):this.each(function(){var h=a.data(this,b);h?h.option(k||{})._init():a.data(this,b,new f(k,this))});return g}};a.Widget=function(b,f){arguments.length&&this._createWidget(b,f)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,g){a.data(g,this.widgetName,this);this.element=a(g);this.options=a.extend(true,{},this.options,this._getCreateOptions(),b);var f=this;this.element.bind("remove."+this.widgetName,function(){f.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,g){var f=b;if(arguments.length===0){return a.extend({},this.options)}if(typeof b==="string"){if(g===e){return this.options[b]}f={};f[b]=g}this._setOptions(f);return this},_setOptions:function(b){var f=this;a.each(b,function(h,g){f._setOption(h,g)});return this},_setOption:function(b,f){this.options[b]=f;if(b==="disabled"){this.widget()[f?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",f)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(b,j,i){var h=this.options[b];j=a.Event(j);j.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();i=i||{};if(j.originalEvent){b=a.event.props.length;for(var g;b;){g=a.event.props[--b];j[g]=j.originalEvent[g]}}this.element.trigger(j,i);return !(a.isFunction(h)&&h.call(this.element[0],j,i)===false||j.isDefaultPrevented())}}})(jQuery);
/*!
 * jQuery UI Mouse 1.8.9
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c)
}).bind("click."+this.widgetName,function(c){if(true===a.data(c.target,b.widgetName+".preventClickEvent")){a.removeData(c.target,b.widgetName+".preventClickEvent");c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(d){d.originalEvent=d.originalEvent||{};if(!d.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(d);this._mouseDownEvent=d;var c=this,h=d.which==1,g=typeof this.options.cancel=="string"?a(d.target).parents().add(d.target).filter(this.options.cancel).length:false;if(!h||g||!this._mouseCapture(d)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=this._mouseStart(d)!==false;if(!this._mouseStarted){d.preventDefault();return true}}this._mouseMoveDelegate=function(b){return c._mouseMove(b)};this._mouseUpDelegate=function(b){return c._mouseUp(b)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);d.preventDefault();return d.originalEvent.mouseHandled=true}},_mouseMove:function(b){if(a.browser.msie&&!(document.documentMode>=9)&&!b.button){return this._mouseUp(b)}if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==false)?this._mouseDrag(b):this._mouseUp(b)}return !this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",true);this._mouseStop(b)}return false},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);(function(f){f.ui=f.ui||{};var e=/left|center|right/,d=/top|center|bottom/,b=f.fn.position,a=f.fn.offset;f.fn.position=function(c){if(!c||!c.of){return b.apply(this,arguments)}c=f.extend({},c);var i=f(c.of),q=i[0],o=(c.collision||"flip").split(" "),p=c.offset?c.offset.split(" "):[0,0],n,l,m;if(q.nodeType===9){n=i.width();l=i.height();m={top:0,left:0}}else{if(q.setTimeout){n=i.width();l=i.height();m={top:i.scrollTop(),left:i.scrollLeft()}}else{if(q.preventDefault){c.at="left top";n=l=0;m={top:c.of.pageY,left:c.of.pageX}}else{n=i.outerWidth();l=i.outerHeight();m=i.offset()}}}f.each(["my","at"],function(){var g=(c[this]||"").split(" ");if(g.length===1){g=e.test(g[0])?g.concat(["center"]):d.test(g[0])?["center"].concat(g):["center","center"]}g[0]=e.test(g[0])?g[0]:"center";g[1]=d.test(g[1])?g[1]:"center";c[this]=g});if(o.length===1){o[1]=o[0]}p[0]=parseInt(p[0],10)||0;if(p.length===1){p[1]=p[0]}p[1]=parseInt(p[1],10)||0;if(c.at[0]==="right"){m.left+=n}else{if(c.at[0]==="center"){m.left+=n/2}}if(c.at[1]==="bottom"){m.top+=l}else{if(c.at[1]==="center"){m.top+=l/2}}m.left+=p[0];m.top+=p[1];return this.each(function(){var u=f(this),s=u.outerWidth(),k=u.outerHeight(),j=parseInt(f.curCSS(this,"marginLeft",true))||0,h=parseInt(f.curCSS(this,"marginTop",true))||0,y=s+j+(parseInt(f.curCSS(this,"marginRight",true))||0),x=k+h+(parseInt(f.curCSS(this,"marginBottom",true))||0),t=f.extend({},m),g;if(c.my[0]==="right"){t.left-=s}else{if(c.my[0]==="center"){t.left-=s/2}}if(c.my[1]==="bottom"){t.top-=k}else{if(c.my[1]==="center"){t.top-=k/2}}t.left=Math.round(t.left);t.top=Math.round(t.top);g={left:t.left-j,top:t.top-h};f.each(["left","top"],function(v,r){f.ui.position[o[v]]&&f.ui.position[o[v]][r](t,{targetWidth:n,targetHeight:l,elemWidth:s,elemHeight:k,collisionPosition:g,collisionWidth:y,collisionHeight:x,offset:p,my:c.my,at:c.at})
});f.fn.bgiframe&&u.bgiframe();u.offset(f.extend(t,{using:c.using}))})};f.ui.position={fit:{left:function(c,g){var h=f(window);h=g.collisionPosition.left+g.collisionWidth-h.width()-h.scrollLeft();c.left=h>0?c.left-h:Math.max(c.left-g.collisionPosition.left,c.left)},top:function(c,g){var h=f(window);h=g.collisionPosition.top+g.collisionHeight-h.height()-h.scrollTop();c.top=h>0?c.top-h:Math.max(c.top-g.collisionPosition.top,c.top)}},flip:{left:function(c,i){if(i.at[0]!=="center"){var m=f(window);m=i.collisionPosition.left+i.collisionWidth-m.width()-m.scrollLeft();var k=i.my[0]==="left"?-i.elemWidth:i.my[0]==="right"?i.elemWidth:0,l=i.at[0]==="left"?i.targetWidth:-i.targetWidth,j=-2*i.offset[0];c.left+=i.collisionPosition.left<0?k+l+j:m>0?k+l+j:0}},top:function(c,i){if(i.at[1]!=="center"){var m=f(window);m=i.collisionPosition.top+i.collisionHeight-m.height()-m.scrollTop();var k=i.my[1]==="top"?-i.elemHeight:i.my[1]==="bottom"?i.elemHeight:0,l=i.at[1]==="top"?i.targetHeight:-i.targetHeight,j=-2*i.offset[1];c.top+=i.collisionPosition.top<0?k+l+j:m>0?k+l+j:0}}}};if(!f.offset.setOffset){f.offset.setOffset=function(c,i){if(/static/.test(f.curCSS(c,"position"))){c.style.position="relative"}var m=f(c),k=m.offset(),l=parseInt(f.curCSS(c,"top",true),10)||0,j=parseInt(f.curCSS(c,"left",true),10)||0;k={top:i.top-k.top+l,left:i.left-k.left+j};"using" in i?i.using.call(c,k):m.css(k)};f.fn.offset=function(c){var g=this[0];if(!g||!g.ownerDocument){return null}if(c){return this.each(function(){f.offset.setOffset(this,c)})}return a.call(this)}}})(jQuery);(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--){this.items[b].item.removeData("sortable-item")}return this},_setOption:function(d,c){if(d==="disabled"){this.options[d]=c;this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")}else{a.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(g,d){if(this.reverting){return false}if(this.options.disabled||this.options.type=="static"){return false}this._refreshItems(g);var j=null,i=this;a(g.target).parents().each(function(){if(a.data(this,"sortable-item")==i){j=a(this);return false}});if(a.data(g.target,"sortable-item")==i){j=a(g.target)}if(!j){return false}if(this.options.handle&&!d){var h=false;a(this.options.handle,j).find("*").andSelf().each(function(){if(this==g.target){h=true}});if(!h){return false}}this.currentItem=j;this._removeCurrentsFromItems();return true},_mouseStart:function(f,d,h){d=this.options;var g=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(f);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(f);this.originalPageX=f.pageX;this.originalPageY=f.pageY;d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();d.containment&&this._setContainment();if(d.cursor){if(a("body").css("cursor")){this._storedCursor=a("body").css("cursor")}a("body").css("cursor",d.cursor)}if(d.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",d.opacity)}if(d.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",d.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",f,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!h){for(h=this.containers.length-1;h>=0;h--){this.containers[h]._trigger("activate",f,g._uiHash(this))}}if(a.ui.ddmanager){a.ui.ddmanager.current=this}a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,f);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(f);return true},_mouseDrag:function(g){this.position=this._generatePosition(g);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var d=this.options,j=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-g.pageY<d.scrollSensitivity){this.scrollParent[0].scrollTop=j=this.scrollParent[0].scrollTop+d.scrollSpeed}else{if(g.pageY-this.overflowOffset.top<d.scrollSensitivity){this.scrollParent[0].scrollTop=j=this.scrollParent[0].scrollTop-d.scrollSpeed}}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-g.pageX<d.scrollSensitivity){this.scrollParent[0].scrollLeft=j=this.scrollParent[0].scrollLeft+d.scrollSpeed}else{if(g.pageX-this.overflowOffset.left<d.scrollSensitivity){this.scrollParent[0].scrollLeft=j=this.scrollParent[0].scrollLeft-d.scrollSpeed}}}else{if(g.pageY-a(document).scrollTop()<d.scrollSensitivity){j=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed)}else{if(a(window).height()-(g.pageY-a(document).scrollTop())<d.scrollSensitivity){j=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed)}}if(g.pageX-a(document).scrollLeft()<d.scrollSensitivity){j=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed)}else{if(a(window).width()-(g.pageX-a(document).scrollLeft())<d.scrollSensitivity){j=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)}}}j!==false&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,g)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(d=this.items.length-1;d>=0;d--){j=this.items[d];var i=j.item[0],h=this._intersectsWithPointer(j);if(h){if(i!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=i&&!a.ui.contains(this.placeholder[0],i)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],i):true)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(j)){this._rearrange(g,j)}else{break}this._trigger("change",g,this._uiHash());break}}}this._contactContainers(g);a.ui.ddmanager&&a.ui.ddmanager.drag(this,g);this._trigger("sort",g,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(e,d){if(e){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,e);if(this.options.revert){var f=this;d=f.placeholder.offset();f.reverting=true;a(this.helper).animate({left:d.left-this.offset.parent.left-f.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:d.top-this.offset.parent.top-f.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){f._clear(e)})}else{this._clear(e,d)
}return false}},cancel:function(){var d=this;if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,d._uiHash(this));if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",null,d._uiHash(this));this.containers[c].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(e){var d=this._getItemsAsjQuery(e&&e.connected),f=[];e=e||{};a(d).each(function(){var b=(a(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);if(b){f.push((e.key||b[1]+"[]")+"="+(e.key&&e.expression?b[1]:b[2]))}});!f.length&&e.key&&f.push(e.key+"=");return f.join("&")},toArray:function(e){var d=this._getItemsAsjQuery(e&&e.connected),f=[];e=e||{};d.each(function(){f.push(a(e.item||this).attr(e.attribute||"id")||"")});return f},_intersectsWith:function(v){var u=this.positionAbs.left,t=u+this.helperProportions.width,s=this.positionAbs.top,r=s+this.helperProportions.height,q=v.left,p=q+v.width,o=v.top,m=o+v.height,n=this.offset.click.top,d=this.offset.click.left;n=s+n>o&&s+n<m&&u+d>q&&u+d<p;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>v[this.floating?"width":"height"]?n:q<u+this.helperProportions.width/2&&t-this.helperProportions.width/2<p&&o<s+this.helperProportions.height/2&&r-this.helperProportions.height/2<m},_intersectsWithPointer:function(e){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height);e=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);d=d&&e;e=this._getDragVerticalDirection();var f=this._getDragHorizontalDirection();if(!d){return false}return this.floating?f&&f=="right"||e=="down"?2:1:e&&(e=="down"?2:1)},_intersectsWithSides:function(f){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,f.top+f.height/2,f.height);f=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,f.left+f.width/2,f.width);var h=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return this.floating&&g?g=="right"&&f||g=="left"&&!f:h&&(h=="down"&&d||h=="up"&&!d)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(i){var d=[],n=[],m=this._connectWith();if(m&&i){for(i=m.length-1;i>=0;i--){for(var l=a(m[i]),k=l.length-1;k>=0;k--){var j=a.data(l[k],"sortable");if(j&&j!=this&&!j.options.disabled){n.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}}}}n.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(i=n.length-1;i>=0;i--){n[i][0].each(function(){d.push(this)})}return a(d)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data(sortable-item)"),d=0;d<this.items.length;d++){for(var f=0;f<e.length;
f++){e[f]==this.items[d].item[0]&&this.items.splice(d,1)}}},_refreshItems:function(j){this.items=[];this.containers=[this];var d=this.items,p=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],j,{item:this.currentItem}):a(this.options.items,this.element),this]],o=this._connectWith();if(o){for(var n=o.length-1;n>=0;n--){for(var m=a(o[n]),l=m.length-1;l>=0;l--){var k=a.data(m[l],"sortable");if(k&&k!=this&&!k.options.disabled){p.push([a.isFunction(k.options.items)?k.options.items.call(k.element[0],j,{item:this.currentItem}):a(k.options.items,k.element),k]);this.containers.push(k)}}}}for(n=p.length-1;n>=0;n--){j=p[n][1];o=p[n][0];l=0;for(m=o.length;l<m;l++){k=a(o[l]);k.data("sortable-item",j);d.push({item:k,instance:j,width:0,height:0,left:0,top:0})}}},refreshPositions:function(f){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var d=this.items.length-1;d>=0;d--){var h=this.items[d],g=this.options.toleranceElement?a(this.options.toleranceElement,h.item):h.item;if(!f){h.width=g.outerWidth();h.height=g.outerHeight()}g=g.offset();h.left=g.left;h.top=g.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(d=this.containers.length-1;d>=0;d--){g=this.containers[d].element.offset();this.containers[d].containerCache.left=g.left;this.containers[d].containerCache.top=g.top;this.containers[d].containerCache.width=this.containers[d].element.outerWidth();this.containers[d].containerCache.height=this.containers[d].element.outerHeight()}}return this},_createPlaceholder:function(f){var d=f||this,h=d.options;if(!h.placeholder||h.placeholder.constructor==String){var g=h.placeholder;h.placeholder={element:function(){var b=a(document.createElement(d.currentItem[0].nodeName)).addClass(g||d.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!g){b.style.visibility="hidden"}return b},update:function(c,b){if(!(g&&!h.forcePlaceholderSize)){b.height()||b.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10));b.width()||b.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||0,10)-parseInt(d.currentItem.css("paddingRight")||0,10))}}}}d.placeholder=a(h.placeholder.element.call(d.element,d.currentItem));d.currentItem.after(d.placeholder);h.placeholder.update(d,d.placeholder)},_contactContainers:function(i){for(var d=null,n=null,m=this.containers.length-1;m>=0;m--){if(!a.ui.contains(this.currentItem[0],this.containers[m].element[0])){if(this._intersectsWith(this.containers[m].containerCache)){if(!(d&&a.ui.contains(this.containers[m].element[0],d.element[0]))){d=this.containers[m];n=m}}else{if(this.containers[m].containerCache.over){this.containers[m]._trigger("out",i,this._uiHash(this));this.containers[m].containerCache.over=0}}}}if(d){if(this.containers.length===1){this.containers[n]._trigger("over",i,this._uiHash(this));this.containers[n].containerCache.over=1}else{if(this.currentContainer!=this.containers[n]){d=10000;m=null;for(var l=this.positionAbs[this.containers[n].floating?"left":"top"],k=this.items.length-1;k>=0;k--){if(a.ui.contains(this.containers[n].element[0],this.items[k].item[0])){var j=this.items[k][this.containers[n].floating?"left":"top"];if(Math.abs(j-l)<d){d=Math.abs(j-l);m=this.items[k]}}}if(m||this.options.dropOnEmpty){this.currentContainer=this.containers[n];m?this._rearrange(i,m,null,true):this._rearrange(i,null,this.containers[n].element,true);this._trigger("change",i,this._uiHash());this.containers[n]._trigger("change",i,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[n]._trigger("over",i,this._uiHash(this));this.containers[n].containerCache.over=1}}}}},_createHelper:function(d){var c=this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;
d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]);if(d[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(d[0].style.width==""||c.forceHelperSize){d.width(this.currentItem.width())}if(d[0].style.height==""||c.forceHelperSize){d.height(this.currentItem.height())}return d},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left" in b){this.offset.click.left=b.left+this.margins.left}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top" in b){this.offset.click.top=b.top+this.margins.top}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode}if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(e.containment)){var d=a(e.containment)[0];e=a(e.containment).offset();var f=a(d).css("overflow")!="hidden";this.containment=[e.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,e.left+(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(f,d){if(!d){d=this.position}f=f=="absolute"?1:-1;var h=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(h[0].tagName);return{top:d.top+this.offset.relative.top*f+this.offset.parent.top*f-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:h.scrollTop())*f),left:d.left+this.offset.relative.left*f+this.offset.parent.left*f-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:h.scrollLeft())*f)}
},_generatePosition:function(h){var d=this.options,l=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,k=/(html|body)/i.test(l[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var j=h.pageX,i=h.pageY;if(this.originalPosition){if(this.containment){if(h.pageX-this.offset.click.left<this.containment[0]){j=this.containment[0]+this.offset.click.left}if(h.pageY-this.offset.click.top<this.containment[1]){i=this.containment[1]+this.offset.click.top}if(h.pageX-this.offset.click.left>this.containment[2]){j=this.containment[2]+this.offset.click.left}if(h.pageY-this.offset.click.top>this.containment[3]){i=this.containment[3]+this.offset.click.top}}if(d.grid){i=this.originalPageY+Math.round((i-this.originalPageY)/d.grid[1])*d.grid[1];i=this.containment?!(i-this.offset.click.top<this.containment[1]||i-this.offset.click.top>this.containment[3])?i:!(i-this.offset.click.top<this.containment[1])?i-d.grid[1]:i+d.grid[1]:i;j=this.originalPageX+Math.round((j-this.originalPageX)/d.grid[0])*d.grid[0];j=this.containment?!(j-this.offset.click.left<this.containment[0]||j-this.offset.click.left>this.containment[2])?j:!(j-this.offset.click.left<this.containment[0])?j-d.grid[0]:j+d.grid[0]:j}}return{top:i-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():k?0:l.scrollTop()),left:j-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():k?0:l.scrollLeft())}},_rearrange:function(h,d,l,k){l?l[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?d.item[0]:d.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var j=this,i=this.counter;window.setTimeout(function(){i==j.counter&&j.refreshPositions(!k)},0)},_clear:function(f,d){this.reverting=false;var h=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var g in this._storedCSS){if(this._storedCSS[g]=="auto"||this._storedCSS[g]=="static"){this._storedCSS[g]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!d&&h.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!d){h.push(function(b){this._trigger("update",b,this._uiHash())})}if(!a.ui.contains(this.element[0],this.currentItem[0])){d||h.push(function(b){this._trigger("remove",b,this._uiHash())});for(g=this.containers.length-1;g>=0;g--){if(a.ui.contains(this.containers[g].element[0],this.currentItem[0])&&!d){h.push(function(b){return function(c){b._trigger("receive",c,this._uiHash(this))}}.call(this,this.containers[g]));h.push(function(b){return function(c){b._trigger("update",c,this._uiHash(this))}}.call(this,this.containers[g]))}}}for(g=this.containers.length-1;g>=0;g--){d||h.push(function(b){return function(c){b._trigger("deactivate",c,this._uiHash(this))}}.call(this,this.containers[g]));if(this.containers[g].containerCache.over){h.push(function(b){return function(c){b._trigger("out",c,this._uiHash(this))}}.call(this,this.containers[g]));this.containers[g].containerCache.over=0}}this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!d){this._trigger("beforeStop",f,this._uiHash());
for(g=0;g<h.length;g++){h[g].call(this,f)}this._trigger("stop",f,this._uiHash())}return false}d||this._trigger("beforeStop",f,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!d){for(g=0;g<h.length;g++){h[g].call(this,f)}this._trigger("stop",f,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},_uiHash:function(d){var c=d||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:d?d.element:null}}});a.extend(a.ui.sortable,{version:"1.8.9"})})(jQuery);(function(a){a.widget("ui.autocomplete",{options:{appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var d=this,c=this.element[0].ownerDocument,e;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(f){if(!(d.options.disabled||d.element.attr("readonly"))){e=false;var b=a.ui.keyCode;switch(f.keyCode){case b.PAGE_UP:d._move("previousPage",f);break;case b.PAGE_DOWN:d._move("nextPage",f);break;case b.UP:d._move("previous",f);f.preventDefault();break;case b.DOWN:d._move("next",f);f.preventDefault();break;case b.ENTER:case b.NUMPAD_ENTER:if(d.menu.active){e=true;f.preventDefault()}case b.TAB:if(!d.menu.active){return}d.menu.select(f);break;case b.ESCAPE:d.element.val(d.term);d.close(f);break;default:clearTimeout(d.searching);d.searching=setTimeout(function(){if(d.term!=d.element.val()){d.selectedItem=null;d.search(null,f)}},d.options.delay);break}}}).bind("keypress.autocomplete",function(b){if(e){e=false;b.preventDefault()}}).bind("focus.autocomplete",function(){if(!d.options.disabled){d.selectedItem=null;d.previous=d.element.val()}}).bind("blur.autocomplete",function(b){if(!d.options.disabled){clearTimeout(d.searching);d.closing=setTimeout(function(){d.close(b);d._change(b)},150)}});this._initSource();this.response=function(){return d._response.apply(d,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(f){var b=d.menu.element[0];a(f.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(h){h.target!==d.element[0]&&h.target!==b&&!a.ui.contains(b,h.target)&&d.close()})},1);setTimeout(function(){clearTimeout(d.closing)},13)}).menu({focus:function(f,b){b=b.item.data("item.autocomplete");false!==d._trigger("focus",f,{item:b})&&/^key/.test(f.originalEvent.type)&&d.element.val(b.value)},selected:function(j,i){var f=i.item.data("item.autocomplete"),b=d.previous;if(d.element[0]!==c.activeElement){d.element.focus();d.previous=b;setTimeout(function(){d.previous=b;d.selectedItem=f},1)}false!==d._trigger("select",j,{item:f})&&d.element.val(f.value);d.term=d.element.val();d.close(j);d.selectedItem=f},blur:function(){d.menu.element.is(":visible")&&d.element.val()!==d.term&&d.element.val(d.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(d,c){a.Widget.prototype._setOption.apply(this,arguments);d==="source"&&this._initSource();if(d==="appendTo"){this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0])}d==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var d=this,c,e;if(a.isArray(this.options.source)){c=this.options.source;this.source=function(f,b){b(a.ui.autocomplete.filter(c,f.term))}}else{if(typeof this.options.source==="string"){e=this.options.source;
this.source=function(f,b){d.xhr&&d.xhr.abort();d.xhr=a.ajax({url:e,data:f,dataType:"json",success:function(l,k,j){j===d.xhr&&b(l);d.xhr=null},error:function(h){h===d.xhr&&b([]);d.xhr=null}})}}else{this.source=this.options.source}}},search:function(d,c){d=d!=null?d:this.element.val();this.term=this.element.val();if(d.length<this.options.minLength){return this.close(c)}clearTimeout(this.closing);if(this._trigger("search",c)!==false){return this._search(d)}},_search:function(b){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:b},this.response)},_response:function(b){if(!this.options.disabled&&b&&b.length){b=this._normalize(b);this._suggest(b);this._trigger("open")}else{this.close()}this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(b){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",b)}},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(b){if(b.length&&b[0].label&&b[0].value){return b}return a.map(b,function(c){if(typeof c==="string"){return{label:c,value:c}}return a.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(d){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,d);this.menu.deactivate();this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position))},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(d,c){var e=this;a.each(c,function(f,b){e._renderItem(d,b)})},_renderItem:function(d,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(d)},_move:function(d,c){if(this.menu.element.is(":visible")){if(this.menu.first()&&/^previous/.test(d)||this.menu.last()&&/^next/.test(d)){this.element.val(this.term);this.menu.deactivate()}else{this.menu[d](c)}}else{this.search(null,c)}},widget:function(){return this.menu.element}});a.extend(a.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(d,c){var e=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(d,function(b){return e.test(b.label||b.value||b)})}})})(jQuery);(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(a(c.target).closest(".ui-menu-item a").length){c.preventDefault();b.select(c)}});this.refresh()},refresh:function(){var b=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(g,d){this.deactivate();if(this.hasScroll()){var h=d.offset().top-this.element.offset().top,j=this.element.attr("scrollTop"),i=this.element.height();if(h<0){this.element.attr("scrollTop",j+h)}else{h>=i&&this.element.attr("scrollTop",j+h-i+d.height())}}this.active=d.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",g,{item:d})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null}},next:function(b){this.move("next",".ui-menu-item:first",b)},previous:function(b){this.move("prev",".ui-menu-item:last",b)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(d,c,e){if(this.active){d=this.active[d+"All"](".ui-menu-item").eq(0);d.length?this.activate(e,d):this.activate(e,this.element.children(c))}else{this.activate(e,this.element.children(c))
}},nextPage:function(e){if(this.hasScroll()){if(!this.active||this.last()){this.activate(e,this.element.children(".ui-menu-item:first"))}else{var d=this.active.offset().top,g=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-d-g+a(this).height();return b<10&&b>-10});h.length||(h=this.element.children(".ui-menu-item:last"));this.activate(e,h)}}else{this.activate(e,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(d){if(this.hasScroll()){if(!this.active||this.first()){this.activate(d,this.element.children(".ui-menu-item:last"))}else{var c=this.active.offset().top,e=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+e-a(this).height();return b<10&&b>-10});result.length||(result=this.element.children(".ui-menu-item:first"));this.activate(d,result)}}else{this.activate(d,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(b){this._trigger("selected",b,{item:this.active})}})})(jQuery);(function(e,d){var b={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},a={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};e.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(f){var c=e(this).css(f).offset().top;c<0&&e(this).css("top",f.top-c)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle=""}this.options.title=this.options.title||this.originalTitle;var i=this,c=i.options,n=c.title||"&#160;",m=e.ui.dialog.getTitleId(i.element),k=(i.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c.dialogClass).css({zIndex:c.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(f){if(c.closeOnEscape&&f.keyCode&&f.keyCode===e.ui.keyCode.ESCAPE){i.close(f);f.preventDefault()}}).attr({role:"dialog","aria-labelledby":m}).mousedown(function(f){i.moveToTop(false,f)});i.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(k);var l=(i.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(k),j=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(f){i.close(f);return false}).appendTo(l);(i.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(j);e("<span></span>").addClass("ui-dialog-title").attr("id",m).html(n).prependTo(l);if(e.isFunction(c.beforeclose)&&!e.isFunction(c.beforeClose)){c.beforeClose=c.beforeclose}l.find("*").add(l).disableSelection();c.draggable&&e.fn.draggable&&i._makeDraggable();c.resizable&&e.fn.resizable&&i._makeResizable();i._createButtons(c.buttons);i._isOpen=false;e.fn.bgiframe&&k.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var c=this;c.overlay&&c.overlay.destroy();c.uiDialog.hide();c.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");c.uiDialog.remove();c.originalTitle&&c.element.attr("title",c.originalTitle);return c},widget:function(){return this.uiDialog},close:function(f){var c=this,h,g;if(false!==c._trigger("beforeClose",f)){c.overlay&&c.overlay.destroy();
c.uiDialog.unbind("keypress.ui-dialog");c._isOpen=false;if(c.options.hide){c.uiDialog.hide(c.options.hide,function(){c._trigger("close",f)})}else{c.uiDialog.hide();c._trigger("close",f)}e.ui.dialog.overlay.resize();if(c.options.modal){h=0;e(".ui-dialog").each(function(){if(this!==c.uiDialog[0]){g=e(this).css("z-index");isNaN(g)||(h=Math.max(h,g))}});e.ui.dialog.maxZ=h}return c}},isOpen:function(){return this._isOpen},moveToTop:function(f,c){var h=this,g=h.options;if(g.modal&&!f||!g.stack&&!g.modal){return h._trigger("focus",c)}if(g.zIndex>e.ui.dialog.maxZ){e.ui.dialog.maxZ=g.zIndex}if(h.overlay){e.ui.dialog.maxZ+=1;h.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)}f={scrollTop:h.element.attr("scrollTop"),scrollLeft:h.element.attr("scrollLeft")};e.ui.dialog.maxZ+=1;h.uiDialog.css("z-index",e.ui.dialog.maxZ);h.element.attr(f);h._trigger("focus",c);return h},open:function(){if(!this._isOpen){var f=this,c=f.options,g=f.uiDialog;f.overlay=c.modal?new e.ui.dialog.overlay(f):null;f._size();f._position(c.position);g.show(c.show);f.moveToTop(true);c.modal&&g.bind("keypress.ui-dialog",function(j){if(j.keyCode===e.ui.keyCode.TAB){var h=e(":tabbable",this),i=h.filter(":first");h=h.filter(":last");if(j.target===h[0]&&!j.shiftKey){i.focus(1);return false}else{if(j.target===i[0]&&j.shiftKey){h.focus(1);return false}}}});e(f.element.find(":tabbable").get().concat(g.find(".ui-dialog-buttonpane :tabbable").get().concat(g.get()))).eq(0).focus();f._isOpen=true;f._trigger("open");return f}},_createButtons:function(f){var c=this,j=false,i=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),h=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(i);c.uiDialog.find(".ui-dialog-buttonpane").remove();typeof f==="object"&&f!==null&&e.each(f,function(){return !(j=true)});if(j){e.each(f,function(k,g){g=e.isFunction(g)?{click:g,text:k}:g;k=e('<button type="button"></button>').attr(g,true).unbind("click").click(function(){g.click.apply(c.element[0],arguments)}).appendTo(h);e.fn.button&&k.button()});i.appendTo(c.uiDialog)}},_makeDraggable:function(){function f(g){return{position:g.position,offset:g.offset}}var c=this,j=c.options,i=e(document),h;c.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(k,g){h=j.height==="auto"?"auto":e(this).height();e(this).height(e(this).height()).addClass("ui-dialog-dragging");c._trigger("dragStart",k,f(g))},drag:function(k,g){c._trigger("drag",k,f(g))},stop:function(k,g){j.position=[g.position.left-i.scrollLeft(),g.position.top-i.scrollTop()];e(this).removeClass("ui-dialog-dragging").height(h);c._trigger("dragStop",k,f(g));e.ui.dialog.overlay.resize()}})},_makeResizable:function(f){function c(g){return{originalPosition:g.originalPosition,originalSize:g.originalSize,position:g.position,size:g.size}}f=f===d?this.options.resizable:f;var j=this,i=j.options,h=j.uiDialog.css("position");f=typeof f==="string"?f:"n,e,s,w,se,sw,ne,nw";j.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:j.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:j._minHeight(),handles:f,start:function(k,g){e(this).addClass("ui-dialog-resizing");j._trigger("resizeStart",k,c(g))},resize:function(k,g){j._trigger("resize",k,c(g))},stop:function(k,g){e(this).removeClass("ui-dialog-resizing");i.height=e(this).height();i.width=e(this).width();j._trigger("resizeStop",k,c(g));e.ui.dialog.overlay.resize()}}).css("position",h).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var c=this.options;return c.height==="auto"?c.minHeight:Math.min(c.minHeight,c.height)},_position:function(f){var c=[],h=[0,0],g;if(f){if(typeof f==="string"||typeof f==="object"&&"0" in f){c=f.split?f.split(" "):[f[0],f[1]];if(c.length===1){c[1]=c[0]}e.each(["left","top"],function(i,j){if(+c[i]===c[i]){h[i]=c[i];c[i]=j}});f={my:c.join(" "),at:c.join(" "),offset:h.join(" ")}
}f=e.extend({},e.ui.dialog.prototype.options.position,f)}else{f=e.ui.dialog.prototype.options.position}(g=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},f));g||this.uiDialog.hide()},_setOptions:function(f){var c=this,h={},g=false;e.each(f,function(i,j){c._setOption(i,j);if(i in b){g=true}if(i in a){h[i]=j}});g&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",h)},_setOption:function(f,c){var j=this,i=j.uiDialog;switch(f){case"beforeclose":f="beforeClose";break;case"buttons":j._createButtons(c);break;case"closeText":j.uiDialogTitlebarCloseText.text(""+c);break;case"dialogClass":i.removeClass(j.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c);break;case"disabled":c?i.addClass("ui-dialog-disabled"):i.removeClass("ui-dialog-disabled");break;case"draggable":var h=i.is(":data(draggable)");h&&!c&&i.draggable("destroy");!h&&c&&j._makeDraggable();break;case"position":j._position(c);break;case"resizable":(h=i.is(":data(resizable)"))&&!c&&i.resizable("destroy");h&&typeof c==="string"&&i.resizable("option","handles",c);!h&&c!==false&&j._makeResizable(c);break;case"title":e(".ui-dialog-title",j.uiDialogTitlebar).html(""+(c||"&#160;"));break}e.Widget.prototype._setOption.apply(j,arguments)},_size:function(){var f=this.options,c,h,g=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(f.minWidth>f.width){f.width=f.minWidth}c=this.uiDialog.css({height:"auto",width:f.width}).height();h=Math.max(0,f.minHeight-c);if(f.height==="auto"){if(e.support.minHeight){this.element.css({minHeight:h,height:"auto"})}else{this.uiDialog.show();f=this.element.css("height","auto").height();g||this.uiDialog.hide();this.element.height(Math.max(f,h))}}else{this.element.height(Math.max(f.height-c,0))}this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});e.extend(e.ui.dialog,{version:"1.8.9",uuid:0,maxZ:0,getTitleId:function(c){c=c.attr("id");if(!c){this.uuid+=1;c=this.uuid}return"ui-dialog-title-"+c},overlay:function(c){this.$el=e.ui.dialog.overlay.create(c)}});e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(c){return c+".dialog-overlay"}).join(" "),create:function(f){if(this.instances.length===0){setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(g){if(e(g.target).zIndex()<e.ui.dialog.overlay.maxZ){return false}})},1);e(document).bind("keydown.dialog-overlay",function(g){if(f.options.closeOnEscape&&g.keyCode&&g.keyCode===e.ui.keyCode.ESCAPE){f.close(g);g.preventDefault()}});e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize)}var c=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});e.fn.bgiframe&&c.bgiframe();this.instances.push(c);return c},destroy:function(f){var c=e.inArray(f,this.instances);c!=-1&&this.oldInstances.push(this.instances.splice(c,1)[0]);this.instances.length===0&&e([document,window]).unbind(".dialog-overlay");f.remove();var g=0;e.each(this.instances,function(){g=Math.max(g,this.css("z-index"))});this.maxZ=g},height:function(){var f,c;if(e.browser.msie&&e.browser.version<7){f=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return f<c?e(window).height()+"px":f+"px"}else{return e(document).height()+"px"}},width:function(){var f,c;if(e.browser.msie&&e.browser.version<7){f=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return f<c?e(window).width()+"px":f+"px"}else{return e(document).width()+"px"}},resize:function(){var c=e([]);e.each(e.ui.dialog.overlay.instances,function(){c=c.add(this)
});c.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}});e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(a){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var c=this,d=this.options;this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");d.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");this.range=a([]);if(d.range){if(d.range===true){this.range=a("<div></div>");if(!d.values){d.values=[this._valueMin(),this._valueMin()]}if(d.values.length&&d.values.length!==2){d.values=[d.values[0],d.values[0]]}}else{this.range=a("<div></div>")}this.range.appendTo(this.element).addClass("ui-slider-range");if(d.range==="min"||d.range==="max"){this.range.addClass("ui-slider-range-"+d.range)}this.range.addClass("ui-widget-header")}a(".ui-slider-handle",this.element).length===0&&a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");if(d.values&&d.values.length){for(;a(".ui-slider-handle",this.element).length<d.values.length;){a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle")}}this.handles=a(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){if(d.disabled){a(this).blur()}else{a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");a(this).addClass("ui-state-focus")}}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)});this.handles.keydown(function(n){var m=true,l=a(this).data("index.ui-slider-handle"),j,k,b;if(!c.options.disabled){switch(n.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:m=false;if(!c._keySliding){c._keySliding=true;a(this).addClass("ui-state-active");j=c._start(n,l);if(j===false){return}}break}b=c.options.step;j=c.options.values&&c.options.values.length?(k=c.values(l)):(k=c.value());switch(n.keyCode){case a.ui.keyCode.HOME:k=c._valueMin();break;case a.ui.keyCode.END:k=c._valueMax();break;case a.ui.keyCode.PAGE_UP:k=c._trimAlignValue(j+(c._valueMax()-c._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:k=c._trimAlignValue(j-(c._valueMax()-c._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(j===c._valueMax()){return}k=c._trimAlignValue(j+b);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(j===c._valueMin()){return}k=c._trimAlignValue(j-b);break}c._slide(n,l,k);return m}}).keyup(function(f){var b=a(this).data("index.ui-slider-handle");if(c._keySliding){c._keySliding=false;c._stop(f,b);c._change(f,b);a(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(d){var i=this.options,n,m,l,j,k;if(i.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();n=this._normValueFromMouse({x:d.pageX,y:d.pageY});m=this._valueMax()-this._valueMin()+1;j=this;this.handles.each(function(c){var b=Math.abs(n-j.values(c));if(m>b){m=b;
l=a(this);k=c}});if(i.range===true&&this.values(1)===i.min){k+=1;l=a(this.handles[k])}if(this._start(d,k)===false){return false}this._mouseSliding=true;j._handleIndex=k;l.addClass("ui-state-active").focus();i=l.offset();this._clickOffset=!a(d.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:d.pageX-i.left-l.width()/2,top:d.pageY-i.top-l.height()/2-(parseInt(l.css("borderTopWidth"),10)||0)-(parseInt(l.css("borderBottomWidth"),10)||0)+(parseInt(l.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(d,k,n);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(c){var d=this._normValueFromMouse({x:c.pageX,y:c.pageY});this._slide(c,this._handleIndex,d);return false},_mouseStop:function(c){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(c,this._handleIndex);this._change(c,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(c){var d;if(this.orientation==="horizontal"){d=this.elementSize.width;c=c.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{d=this.elementSize.height;c=c.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}d=c/d;if(d>1){d=1}if(d<0){d=0}if(this.orientation==="vertical"){d=1-d}c=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+d*c)},_start:function(d,e){var f={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(e);f.values=this.values()}return this._trigger("start",d,f)},_slide:function(d,f,h){var g;if(this.options.values&&this.options.values.length){g=this.values(f?0:1);if(this.options.values.length===2&&this.options.range===true&&(f===0&&h>g||f===1&&h<g)){h=g}if(h!==this.values(f)){g=this.values();g[f]=h;d=this._trigger("slide",d,{handle:this.handles[f],value:h,values:g});this.values(f?0:1);d!==false&&this.values(f,h,true)}}else{if(h!==this.value()){d=this._trigger("slide",d,{handle:this.handles[f],value:h});d!==false&&this.value(h)}}},_stop:function(d,e){var f={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(e);f.values=this.values()}this._trigger("stop",d,f)},_change:function(d,e){if(!this._keySliding&&!this._mouseSliding){var f={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){f.value=this.values(e);f.values=this.values()}this._trigger("change",d,f)}},value:function(c){if(arguments.length){this.options.value=this._trimAlignValue(c);this._refreshValue();this._change(null,0)}return this._value()},values:function(d,g){var j,i,h;if(arguments.length>1){this.options.values[d]=this._trimAlignValue(g);this._refreshValue();this._change(null,d)}if(arguments.length){if(a.isArray(arguments[0])){j=this.options.values;i=arguments[0];for(h=0;h<j.length;h+=1){j[h]=this._trimAlignValue(i[h]);this._change(null,h)}this._refreshValue()}else{return this.options.values&&this.options.values.length?this._values(d):this.value()}}else{return this._values()}},_setOption:function(d,f){var h,g=0;if(a.isArray(this.options.values)){g=this.options.values.length}a.Widget.prototype._setOption.apply(this,arguments);switch(d){case"disabled":if(f){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();
for(h=0;h<g;h+=1){this._change(null,h)}this._animateOff=false;break}},_value:function(){var c=this.options.value;return c=this._trimAlignValue(c)},_values:function(d){var e,f;if(arguments.length){e=this.options.values[d];return e=this._trimAlignValue(e)}else{e=this.options.values.slice();for(f=0;f<e.length;f+=1){e[f]=this._trimAlignValue(e[f])}return e}},_trimAlignValue:function(d){if(d<=this._valueMin()){return this._valueMin()}if(d>=this._valueMax()){return this._valueMax()}var e=this.options.step>0?this.options.step:1,f=(d-this._valueMin())%e;alignValue=d-f;if(Math.abs(f)*2>=e){alignValue+=f>0?e:-e}return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var s=this.options.range,t=this.options,r=this,q=!this._animateOff?t.animate:false,p,n={},o,m,k,d;if(this.options.values&&this.options.values.length){this.handles.each(function(b){p=(r.values(b)-r._valueMin())/(r._valueMax()-r._valueMin())*100;n[r.orientation==="horizontal"?"left":"bottom"]=p+"%";a(this).stop(1,1)[q?"animate":"css"](n,t.animate);if(r.options.range===true){if(r.orientation==="horizontal"){if(b===0){r.range.stop(1,1)[q?"animate":"css"]({left:p+"%"},t.animate)}if(b===1){r.range[q?"animate":"css"]({width:p-o+"%"},{queue:false,duration:t.animate})}}else{if(b===0){r.range.stop(1,1)[q?"animate":"css"]({bottom:p+"%"},t.animate)}if(b===1){r.range[q?"animate":"css"]({height:p-o+"%"},{queue:false,duration:t.animate})}}}o=p})}else{m=this.value();k=this._valueMin();d=this._valueMax();p=d!==k?(m-k)/(d-k)*100:0;n[r.orientation==="horizontal"?"left":"bottom"]=p+"%";this.handle.stop(1,1)[q?"animate":"css"](n,t.animate);if(s==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[q?"animate":"css"]({width:p+"%"},t.animate)}if(s==="max"&&this.orientation==="horizontal"){this.range[q?"animate":"css"]({width:100-p+"%"},{queue:false,duration:t.animate})}if(s==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[q?"animate":"css"]({height:p+"%"},t.animate)}if(s==="max"&&this.orientation==="vertical"){this.range[q?"animate":"css"]({height:100-p+"%"},{queue:false,duration:t.animate})}}}});a.extend(a.ui.slider,{version:"1.8.9"})})(jQuery);(function(d,G){function K(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};
d.extend(this._defaults,this.regional[""]);this.dpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function E(a,b){d.extend(a,b);for(var c in b){if(b[c]==null||b[c]==G){a[c]=b[c]}}return a}d.extend(d.ui,{datepicker:{version:"1.8.9"}});var y=(new Date).getTime();d.extend(K.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){E(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f=e=="div"||e=="span";if(!a.id){this.uuid+=1;a.id="dp"+this.uuid}var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{});if(e=="input"){this._connectDatepicker(a,i)}else{f&&this._inlineDatepicker(a,i)}},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);if(!c.hasClass(this.markerClassName)){this._attachments(c,b);c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});this._autoSize(b);d.data(a,"datepicker",b)}},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();if(c){b.append=d('<span class="'+this._appendClass+'">'+c+"</span>");a[e?"before":"after"](b.append)}a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");if(c=="focus"||c=="both"){a.focus(this._showDatepicker)}if(c=="button"||c=="both"){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(f==""?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(a[0]);return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var e=function(f){for(var h=0,i=0,g=0;g<f.length;g++){if(f[g].length>h){h=f[g].length;i=g}}return i};b.setMonth(e(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);if(!c.hasClass(this.markerClassName)){c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});d.data(a,"datepicker",b);this._setDate(b,this._getDefaultDate(b),true);this._updateDatepicker(b);this._updateAlternate(b);b.dpDiv.show()}},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;if(!a){this.uuid+=1;this._dialogInput=d('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);a=this._dialogInst=this._newInst(this._dialogInput,false);a.settings={};d.data(this._dialogInput[0],"datepicker",a)}E(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos){this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]
}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");if(e=="input"){c.append.remove();c.trigger.remove();b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else{if(e=="div"||e=="span"){b.removeClass(this.markerClassName).empty()}}}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=false;c.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(e=="div"||e=="span"){b.children("."+this._inlineClass).children().removeClass("ui-state-disabled")}}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=true;c.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(e=="div"||e=="span"){b.children("."+this._inlineClass).children().addClass("ui-state-disabled")}}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a){return false}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return true}}return false},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?d.extend({},d.datepicker._defaults):e?b=="all"?d.extend({},e.settings):this._get(e,b):null}var f=b||{};if(typeof b=="string"){f={};f[b]=c}if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,true);E(e.settings,f);this._attachments(d(a),e);this._autoSize(e);this._setDateDatepicker(a,h);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a)){this._setDate(a,b);this._updateDatepicker(a);this._updateAlternate(a)}},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=true,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=true;if(d.datepicker._datepickerShowing){switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=false;break;case 13:c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv);c[0]?d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]):d.datepicker._hideDatepicker();return false;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:if(a.ctrlKey||a.metaKey){d.datepicker._clearDate(a.target)}c=a.ctrlKey||a.metaKey;break;case 36:if(a.ctrlKey||a.metaKey){d.datepicker._gotoToday(a.target)}c=a.ctrlKey||a.metaKey;break;case 37:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,e?+1:-1,"D")}c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey){d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M")
}break;case 38:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,-7,"D")}c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,e?-1:+1,"D")}c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey){d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M")}break;case 40:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,+7,"D")}c=a.ctrlKey||a.metaKey;break;default:c=false}}else{if(a.keyCode==36&&a.ctrlKey){d.datepicker._showDatepicker(this)}else{c=false}}if(c){a.preventDefault();a.stopPropagation()}},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==G?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||c<" "||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal){try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))){d.datepicker._setDateFromField(a);d.datepicker._updateAlternate(a);d.datepicker._updateDatepicker(a)}}catch(b){d.datepicker.log(b)}}return true},_showDatepicker:function(a){a=a.target||a;if(a.nodeName.toLowerCase()!="input"){a=d("input",a.parentNode)[0]}if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&d.datepicker._curInst.dpDiv.stop(true,true);var c=d.datepicker._get(b,"beforeShow");E(b.settings,c?c.apply(a,[a,b]):{});b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);if(d.datepicker._inDialog){a.value=""}if(!d.datepicker._pos){d.datepicker._pos=d.datepicker._findPos(a);d.datepicker._pos[1]+=a.offsetHeight}var e=false;d(a).parents().each(function(){e|=d(this).css("position")=="fixed";return !e});if(e&&d.browser.opera){d.datepicker._pos[0]-=document.documentElement.scrollLeft;d.datepicker._pos[1]-=document.documentElement.scrollTop}c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),h=function(){d.datepicker._datepickerShowing=true;var i=b.dpDiv.find("iframe.ui-datepicker-cover");if(i.length){var g=d.datepicker._getBorders(b.dpDiv);i.css({left:-g[0],top:-g[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.effects&&d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h):b.dpDiv[c||"show"](c?f:null,h);if(!c||!f){h()}b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=this,c=d.datepicker._getBorders(a.dpDiv);a.dpDiv.empty().append(this._generateHTML(a));var e=a.dpDiv.find("iframe.ui-datepicker-cover");e.length&&e.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()});a.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){d(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!b._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])){d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");d(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).addClass("ui-datepicker-next-hover")
}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();c=this._getNumberOfMonths(a);e=c[1];e>1?a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"):a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");a.dpDiv[(c[0]!=1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input.focus();if(a.yearshtml){var f=a.yearshtml;setTimeout(function(){f===a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);f=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(c){return{thin:1,medium:2,thick:3}[c]||c};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,i=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+d(document).scrollLeft(),j=document.documentElement.clientHeight+d(document).scrollTop();b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+i?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,b.top+f>j&&j>f?Math.abs(f+i):0);return b},_findPos:function(a){for(var b=this._get(this._getInst(a),"isRTL");a&&(a.type=="hidden"||a.nodeType!=1);){a=a[b?"previousSibling":"nextSibling"]}a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=d.data(a,"datepicker"))){if(this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b);this._curInst=null};d.effects&&d.effects[a]?b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?c:null,e);a||e();if(a=this._get(b,"onClose")){a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b])}this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(d.datepicker._curInst){a=d(a.target);a[0].id!=d.datepicker._mainDivId&&a.parents("#"+d.datepicker._mainDivId).length==0&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);if(!this._isDisabledDatepicker(a[0])){this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c);this._updateDatepicker(e)}},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay){b.selectedDay=b.currentDay;b.drawMonth=b.selectedMonth=b.currentMonth;b.drawYear=b.selectedYear=b.currentYear}else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e._selectingMonthYear=false;e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_clickMonthYear:function(a){var b=this._getInst(d(a)[0]);b.input&&b._selectingMonthYear&&setTimeout(function(){b.input.focus()},0);b._selectingMonthYear=!b._selectingMonthYear},_selectDay:function(a,b,c,e){var f=d(a);if(!(d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0]))){f=this._getInst(f[0]);f.selectedDay=f.currentDay=d("a",e).html();
f.selectedMonth=f.currentMonth=b;f.selectedYear=f.currentYear=c;this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]);b=b!=null?b:this._formatDate(a);a.input&&a.input.val(b);this._updateAlternate(a);var c=this._get(a,"onSelect");if(c){c.apply(a.input?a.input[0]:null,[b,a])}else{a.input&&a.input.trigger("change")}if(a.inline){this._updateDatepicker(a)}else{this._hideDatepicker();this._lastInput=a.input[0];typeof a.input[0]!="object"&&a.input.focus();this._lastInput=null}},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;e=typeof e!="string"?e:(new Date).getFullYear()%100+parseInt(e,10);for(var f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,i=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,j=c=-1,l=-1,u=-1,k=false,o=function(p){(p=z+1<a.length&&a.charAt(z+1)==p)&&z++;return p},m=function(p){var v=o(p);p=new RegExp("^\\d{1,"+(p=="@"?14:p=="!"?20:p=="y"&&v?4:p=="o"?3:2)+"}");p=b.substring(s).match(p);if(!p){throw"Missing number at position "+s}s+=p[0].length;return parseInt(p[0],10)},n=function(p,v,H){p=o(p)?H:v;for(v=0;v<p.length;v++){if(b.substr(s,p[v].length).toLowerCase()==p[v].toLowerCase()){s+=p[v].length;return v+1}}throw"Unknown name at position "+s},r=function(){if(b.charAt(s)!=a.charAt(z)){throw"Unexpected literal at position "+s}s++},s=0,z=0;z<a.length;z++){if(k){if(a.charAt(z)=="'"&&!o("'")){k=false}else{r()}}else{switch(a.charAt(z)){case"d":l=m("d");break;case"D":n("D",f,h);break;case"o":u=m("o");break;case"m":j=m("m");break;case"M":j=n("M",i,g);break;case"y":c=m("y");break;case"@":var w=new Date(m("@"));c=w.getFullYear();j=w.getMonth()+1;l=w.getDate();break;case"!":w=new Date((m("!")-this._ticksTo1970)/10000);c=w.getFullYear();j=w.getMonth()+1;l=w.getDate();break;case"'":if(o("'")){r()}else{k=true}break;default:r()}}}if(c==-1){c=(new Date).getFullYear()}else{if(c<100){c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100)}}if(u>-1){j=1;l=u;do{e=this._getDaysInMonth(c,j-1);if(l<=e){break}j++;l-=e}while(1)}w=this._daylightSavingAdjust(new Date(c,j-1,l));if(w.getFullYear()!=c||w.getMonth()+1!=j||w.getDate()!=l){throw"Invalid date"}return w},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var i=function(o){(o=k+1<a.length&&a.charAt(k+1)==o)&&k++;return o},g=function(o,m,n){m=""+m;if(i(o)){for(;m.length<n;){m="0"+m}}return m},j=function(o,m,n,r){return i(o)?r[m]:n[m]},l="",u=false;if(b){for(var k=0;k<a.length;k++){if(u){if(a.charAt(k)=="'"&&!i("'")){u=false}else{l+=a.charAt(k)}}else{switch(a.charAt(k)){case"d":l+=g("d",b.getDate(),2);break;case"D":l+=j("D",b.getDay(),e,f);break;case"o":l+=g("o",(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000,3);
break;case"m":l+=g("m",b.getMonth()+1,2);break;case"M":l+=j("M",b.getMonth(),h,c);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=b.getTime()*10000+this._ticksTo1970;break;case"'":if(i("'")){l+="'"}else{u=true}break;default:l+=a.charAt(k)}}}}return l},_possibleChars:function(a){for(var b="",c=false,e=function(h){(h=f+1<a.length&&a.charAt(f+1)==h)&&f++;return h},f=0;f<a.length;f++){if(c){if(a.charAt(f)=="'"&&!e("'")){c=false}else{b+=a.charAt(f)}}else{switch(a.charAt(f)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":if(e("'")){b+="'"}else{c=true}break;default:b+=a.charAt(f)}}}return b},_get:function(a,b){return a.settings[b]!==G?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var i=this._getFormatConfig(a);try{f=this.parseDate(c,e,i)||h}catch(g){this.log(g);e=b?"":e}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=e?f.getDate():0;a.currentMonth=e?f.getMonth():0;a.currentYear=e?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(h){var i=new Date;i.setDate(i.getDate()+h);return i},f=function(h){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),h,d.datepicker._getFormatConfig(a))}catch(i){}var g=(h.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,j=g.getFullYear(),l=g.getMonth();g=g.getDate();for(var u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,k=u.exec(h);k;){switch(k[2]||"d"){case"d":case"D":g+=parseInt(k[1],10);break;case"w":case"W":g+=parseInt(k[1],10)*7;break;case"m":case"M":l+=parseInt(k[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(j,l));break;case"y":case"Y":j+=parseInt(k[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(j,l));break}k=u.exec(h)}return new Date(j,l,g)};if(b=(b=b==null||b===""?c:typeof b=="string"?f(b):typeof b=="number"?isNaN(b)?c:e(b):new Date(b.getTime()))&&b.toString()=="Invalid Date"?c:b){b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0)}return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a){return null}a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var e=!b,f=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();if((f!=a.selectedMonth||h!=a.selectedYear)&&!c){this._notifyChange(a)}this._adjustInstDate(a);if(a.input){a.input.val(e?"":this._formatDate(a))}},_getDate:function(a){return !a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),i=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),j=this._get(a,"stepMonths"),l=i[0]!=1||i[1]!=1,u=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");g=a.drawMonth-g;var m=a.drawYear;if(g<0){g+=12;m--}if(o){var n=this._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth()-i[0]*i[1]+1,o.getDate()));for(n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(m,g,1))>n;){g--;if(g<0){g=11;m--}}}a.drawMonth=g;a.drawYear=m;n=this._get(a,"prevText");n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(m,g-j,1)),this._getFormatConfig(a));
n=this._canAdjustMonth(a,-1,m,g)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', -"+j+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>";var r=this._get(a,"nextText");r=!h?r:this.formatDate(r,this._daylightSavingAdjust(new Date(m,g+j,1)),this._getFormatConfig(a));f=this._canAdjustMonth(a,+1,m,g)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', +"+j+", 'M');\" title=\""+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>";j=this._get(a,"currentText");r=this._get(a,"gotoCurrent")&&a.currentDay?u:b;j=!h?j:this.formatDate(j,r,this._getFormatConfig(a));h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+y+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>":"";e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,r)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._gotoToday('#"+a.id+"');\">"+j+"</button>":"")+(c?"":h)+"</div>":"";h=parseInt(this._get(a,"firstDay"),10);h=isNaN(h)?0:h;j=this._get(a,"showWeek");r=this._get(a,"dayNames");this._get(a,"dayNamesShort");var s=this._get(a,"dayNamesMin"),z=this._get(a,"monthNames"),w=this._get(a,"monthNamesShort"),p=this._get(a,"beforeShowDay"),v=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var L=this._getDefaultDate(a),I="",C=0;C<i[0];C++){for(var M="",D=0;D<i[1];D++){var N=this._daylightSavingAdjust(new Date(m,g,a.selectedDay)),t=" ui-corner-all",x="";if(l){x+='<div class="ui-datepicker-group';if(i[1]>1){switch(D){case 0:x+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case i[1]-1:x+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:x+=" ui-datepicker-group-middle";t="";break}}x+='">'}x+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&C==0?c?f:n:"")+(/all|right/.test(t)&&C==0?c?n:f:"")+this._generateMonthYearHeader(a,g,m,k,o,C>0||D>0,z,w)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var A=j?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(t=0;t<7;t++){var q=(t+h)%7;A+="<th"+((t+h+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+r[q]+'">'+s[q]+"</span></th>"}x+=A+"</tr></thead><tbody>";A=this._getDaysInMonth(m,g);if(m==a.selectedYear&&g==a.selectedMonth){a.selectedDay=Math.min(a.selectedDay,A)}t=(this._getFirstDayOfMonth(m,g)-h+7)%7;A=l?6:Math.ceil((t+A)/7);q=this._daylightSavingAdjust(new Date(m,g,1-t));for(var O=0;O<A;O++){x+="<tr>";var P=!j?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(q)+"</td>";for(t=0;t<7;t++){var F=p?p.apply(a.input?a.input[0]:null,[q]):[true,""],B=q.getMonth()!=g,J=B&&!H||!F[0]||k&&q<k||o&&q>o;P+='<td class="'+((t+h+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(q.getTime()==N.getTime()&&g==a.selectedMonth&&a._keyEvent||L.getTime()==q.getTime()&&L.getTime()==N.getTime()?" "+this._dayOverClass:"")+(J?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!v?"":" "+F[1]+(q.getTime()==u.getTime()?" "+this._currentClass:"")+(q.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!B||v)&&F[2]?' title="'+F[2]+'"':"")+(J?"":' onclick="DP_jQuery_'+y+".datepicker._selectDay('#"+a.id+"',"+q.getMonth()+","+q.getFullYear()+', this);return false;"')+">"+(B&&!v?"&#xa0;":J?'<span class="ui-state-default">'+q.getDate()+"</span>":'<a class="ui-state-default'+(q.getTime()==b.getTime()?" ui-state-highlight":"")+(q.getTime()==u.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+'" href="#">'+q.getDate()+"</a>")+"</td>";
q.setDate(q.getDate()+1);q=this._daylightSavingAdjust(q)}x+=P+"</tr>"}g++;if(g>11){g=0;m++}x+="</tbody></table>"+(l?"</div>"+(i[0]>0&&D==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");M+=x}I+=M}I+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");a._keyEvent=false;return I},_generateMonthYearHeader:function(a,b,c,e,f,h,i,g){var j=this._get(a,"changeMonth"),l=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',o="";if(h||!j){o+='<span class="ui-datepicker-month">'+i[b]+"</span>"}else{i=e&&e.getFullYear()==c;var m=f&&f.getFullYear()==c;o+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";for(var n=0;n<12;n++){if((!i||n>=e.getMonth())&&(!m||n<=f.getMonth())){o+='<option value="'+n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>"}}o+="</select>"}u||(k+=o+(h||!(j&&l)?"&#xa0;":""));a.yearshtml="";if(h||!l){k+='<span class="ui-datepicker-year">'+c+"</span>"}else{g=this._get(a,"yearRange").split(":");var r=(new Date).getFullYear();i=function(s){s=s.match(/c[+-].*/)?c+parseInt(s.substring(1),10):s.match(/[+-].*/)?r+parseInt(s,10):parseInt(s,10);return isNaN(s)?r:s};b=i(g[0]);g=Math.max(b,i(g[1]||""));b=e?Math.max(b,e.getFullYear()):b;g=f?Math.min(g,f.getFullYear()):g;for(a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";b<=g;b++){a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>"}a.yearshtml+="</select>";if(d.browser.mozilla){k+='<select class="ui-datepicker-year"><option value="'+c+'" selected="selected">'+c+"</option></select>"}else{k+=a.yearshtml;a.yearshtml=null}}k+=this._get(a,"yearSuffix");if(u){k+=(h||!(j&&l)?"&#xa0;":"")+o}k+="</div>";return k},_adjustInstDate:function(a,b,c){var e=a.drawYear+(c=="Y"?b:0),f=a.drawMonth+(c=="M"?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+(c=="D"?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b)));a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();if(c=="M"||c=="Y"){this._notifyChange(a)}},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");if(b){b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])}},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,e){var f=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,e+(b<0?b:f[0]*f[1]),1));b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;a.currentYear=a.selectedYear}b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));
return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv);d.datepicker.initialized=true}var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget")){return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))}if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))}return this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new K;d.datepicker.initialized=false;d.datepicker.uuid=(new Date).getTime();d.datepicker.version="1.8.9";window["DP_jQuery_"+y]=d})(jQuery);jQuery.effects||function(l,i){function e(j){var f;if(j&&j.constructor==Array&&j.length==3){return j}if(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(j)){return[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]}if(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(j)){return[parseFloat(f[1])*2.55,parseFloat(f[2])*2.55,parseFloat(f[3])*2.55]}if(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(j)){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}if(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(j)){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}if(/rgba\(0, 0, 0, 0\)/.exec(j)){return d.transparent}return d[l.trim(j).toLowerCase()]}function x(k,j){var f;do{f=l.curCSS(k,j);if(f!=""&&f!="transparent"||l.nodeName(k,"body")){break}j="backgroundColor"}while(k=k.parentNode);return e(f)}function c(){var n=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,j={},f,m;if(n&&n.length&&n[0]&&n[n[0]]){for(var k=n.length;k--;){f=n[k];if(typeof n[f]=="string"){m=f.replace(/\-(\w)/g,function(p,o){return o.toUpperCase()});j[m]=n[f]}}}else{for(f in n){if(typeof n[f]==="string"){j[f]=n[f]}}}return j}function b(k){var j,f;for(j in k){f=k[j];if(f==null||l.isFunction(f)||j in w||/scrollbar/.test(j)||!/color/i.test(j)&&isNaN(parseFloat(f))){delete k[j]}}return k}function v(m,j){var f={_:0},k;for(k in j){if(m[k]!=j[k]){f[k]=j[k]}}return f}function h(m,j,f,k){if(typeof m=="object"){k=j;f=null;j=m;m=j.effect}if(l.isFunction(j)){k=j;f=null;j={}}if(typeof j=="number"||l.fx.speeds[j]){k=f;f=j;j={}}if(l.isFunction(f)){k=f;f=null}j=j||{};f=f||j.duration;f=l.fx.off?0:typeof f=="number"?f:f in l.fx.speeds?l.fx.speeds[f]:l.fx.speeds._default;k=k||j.complete;return[m,j,f,k]}function g(f){if(!f||typeof f==="number"||l.fx.speeds[f]){return true}if(typeof f==="string"&&!l.effects[f]){return true}return false}l.effects={};l.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(j,f){l.fx.step[f]=function(k){if(!k.colorInit){k.start=x(k.elem,f);k.end=e(k.end);k.colorInit=true}k.elem.style[f]="rgb("+Math.max(Math.min(parseInt(k.pos*(k.end[0]-k.start[0])+k.start[0],10),255),0)+","+Math.max(Math.min(parseInt(k.pos*(k.end[1]-k.start[1])+k.start[1],10),255),0)+","+Math.max(Math.min(parseInt(k.pos*(k.end[2]-k.start[2])+k.start[2],10),255),0)+")"}});var d={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},a=["add","remove","toggle"],w={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};
l.effects.animateClass=function(m,j,f,k){if(l.isFunction(f)){k=f;f=null}return this.queue("fx",function(){var r=l(this),q=r.attr("style")||" ",p=b(c.call(this)),n,o=r.attr("className");l.each(a,function(s,t){m[t]&&r[t+"Class"](m[t])});n=b(c.call(this));r.attr("className",o);r.animate(v(p,n),j,f,function(){l.each(a,function(s,t){m[t]&&r[t+"Class"](m[t])});if(typeof r.attr("style")=="object"){r.attr("style").cssText="";r.attr("style").cssText=q}else{r.attr("style",q)}k&&k.apply(this,arguments)});p=l.queue(this);n=p.splice(p.length-1,1)[0];p.splice(1,0,n);l.dequeue(this)})};l.fn.extend({_addClass:l.fn.addClass,addClass:function(m,j,f,k){return j?l.effects.animateClass.apply(this,[{add:m},j,f,k]):this._addClass(m)},_removeClass:l.fn.removeClass,removeClass:function(m,j,f,k){return j?l.effects.animateClass.apply(this,[{remove:m},j,f,k]):this._removeClass(m)},_toggleClass:l.fn.toggleClass,toggleClass:function(n,j,f,m,k){return typeof j=="boolean"||j===i?f?l.effects.animateClass.apply(this,[j?{add:n}:{remove:n},f,m,k]):this._toggleClass(n,j):l.effects.animateClass.apply(this,[{toggle:n},j,f,m])},switchClass:function(n,j,f,m,k){return l.effects.animateClass.apply(this,[{add:j,remove:n},f,m,k])}});l.extend(l.effects,{version:"1.8.9",save:function(k,j){for(var f=0;f<j.length;f++){j[f]!==null&&k.data("ec.storage."+j[f],k[0].style[j[f]])}},restore:function(k,j){for(var f=0;f<j.length;f++){j[f]!==null&&k.css(j[f],k.data("ec.storage."+j[f]))}},setMode:function(j,f){if(f=="toggle"){f=j.is(":hidden")?"show":"hide"}return f},getBaseline:function(k,j){var f;switch(k[0]){case"top":f=0;break;case"middle":f=0.5;break;case"bottom":f=1;break;default:f=k[0]/j.height}switch(k[1]){case"left":k=0;break;case"center":k=0.5;break;case"right":k=1;break;default:k=k[1]/j.width}return{x:k,y:f}},createWrapper:function(k){if(k.parent().is(".ui-effects-wrapper")){return k.parent()}var j={width:k.outerWidth(true),height:k.outerHeight(true),"float":k.css("float")},f=l("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});k.wrap(f);f=k.parent();if(k.css("position")=="static"){f.css({position:"relative"});k.css({position:"relative"})}else{l.extend(j,{position:k.css("position"),zIndex:k.css("z-index")});l.each(["top","left","bottom","right"],function(n,m){j[m]=k.css(m);if(isNaN(parseInt(j[m],10))){j[m]="auto"}});k.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return f.css(j).show()},removeWrapper:function(f){if(f.parent().is(".ui-effects-wrapper")){return f.parent().replaceWith(f)}return f},setTransition:function(m,j,f,k){k=k||{};l.each(j,function(o,n){unit=m.cssUnit(n);if(unit[0]>0){k[n]=unit[0]*f+unit[1]}});return k}});l.fn.extend({effect:function(m){var j=h.apply(this,arguments),f={options:j[1],duration:j[2],callback:j[3]};j=f.options.mode;var k=l.effects[m];if(l.fx.off||!k){return j?this[j](f.duration,f.callback):this.each(function(){f.callback&&f.callback.call(this)})}return k.call(this,f)},_show:l.fn.show,show:function(j){if(g(j)){return this._show.apply(this,arguments)}else{var f=h.apply(this,arguments);f[1].mode="show";return this.effect.apply(this,f)}},_hide:l.fn.hide,hide:function(j){if(g(j)){return this._hide.apply(this,arguments)}else{var f=h.apply(this,arguments);f[1].mode="hide";return this.effect.apply(this,f)}},__toggle:l.fn.toggle,toggle:function(j){if(g(j)||typeof j==="boolean"||l.isFunction(j)){return this.__toggle.apply(this,arguments)}else{var f=h.apply(this,arguments);f[1].mode="toggle";return this.effect.apply(this,f)}},cssUnit:function(k){var j=this.css(k),f=[];l.each(["em","px","%","pt"],function(n,m){if(j.indexOf(m)>0){f=[parseFloat(j),m]}});return f}});l.easing.jswing=l.easing.swing;l.extend(l.easing,{def:"easeOutQuad",swing:function(n,j,f,m,k){return l.easing[l.easing.def](n,j,f,m,k)},easeInQuad:function(n,j,f,m,k){return m*(j/=k)*j+f},easeOutQuad:function(n,j,f,m,k){return -m*(j/=k)*(j-2)+f},easeInOutQuad:function(n,j,f,m,k){if((j/=k/2)<1){return m/2*j*j+f
}return -m/2*(--j*(j-2)-1)+f},easeInCubic:function(n,j,f,m,k){return m*(j/=k)*j*j+f},easeOutCubic:function(n,j,f,m,k){return m*((j=j/k-1)*j*j+1)+f},easeInOutCubic:function(n,j,f,m,k){if((j/=k/2)<1){return m/2*j*j*j+f}return m/2*((j-=2)*j*j+2)+f},easeInQuart:function(n,j,f,m,k){return m*(j/=k)*j*j*j+f},easeOutQuart:function(n,j,f,m,k){return -m*((j=j/k-1)*j*j*j-1)+f},easeInOutQuart:function(n,j,f,m,k){if((j/=k/2)<1){return m/2*j*j*j*j+f}return -m/2*((j-=2)*j*j*j-2)+f},easeInQuint:function(n,j,f,m,k){return m*(j/=k)*j*j*j*j+f},easeOutQuint:function(n,j,f,m,k){return m*((j=j/k-1)*j*j*j*j+1)+f},easeInOutQuint:function(n,j,f,m,k){if((j/=k/2)<1){return m/2*j*j*j*j*j+f}return m/2*((j-=2)*j*j*j*j+2)+f},easeInSine:function(n,j,f,m,k){return -m*Math.cos(j/k*(Math.PI/2))+m+f},easeOutSine:function(n,j,f,m,k){return m*Math.sin(j/k*(Math.PI/2))+f},easeInOutSine:function(n,j,f,m,k){return -m/2*(Math.cos(Math.PI*j/k)-1)+f},easeInExpo:function(n,j,f,m,k){return j==0?f:m*Math.pow(2,10*(j/k-1))+f},easeOutExpo:function(n,j,f,m,k){return j==k?f+m:m*(-Math.pow(2,-10*j/k)+1)+f},easeInOutExpo:function(n,j,f,m,k){if(j==0){return f}if(j==k){return f+m}if((j/=k/2)<1){return m/2*Math.pow(2,10*(j-1))+f}return m/2*(-Math.pow(2,-10*--j)+2)+f},easeInCirc:function(n,j,f,m,k){return -m*(Math.sqrt(1-(j/=k)*j)-1)+f},easeOutCirc:function(n,j,f,m,k){return m*Math.sqrt(1-(j=j/k-1)*j)+f},easeInOutCirc:function(n,j,f,m,k){if((j/=k/2)<1){return -m/2*(Math.sqrt(1-j*j)-1)+f}return m/2*(Math.sqrt(1-(j-=2)*j)+1)+f},easeInElastic:function(p,j,f,o,n){p=1.70158;var m=0,k=o;if(j==0){return f}if((j/=n)==1){return f+o}m||(m=n*0.3);if(k<Math.abs(o)){k=o;p=m/4}else{p=m/(2*Math.PI)*Math.asin(o/k)}return -(k*Math.pow(2,10*(j-=1))*Math.sin((j*n-p)*2*Math.PI/m))+f},easeOutElastic:function(p,j,f,o,n){p=1.70158;var m=0,k=o;if(j==0){return f}if((j/=n)==1){return f+o}m||(m=n*0.3);if(k<Math.abs(o)){k=o;p=m/4}else{p=m/(2*Math.PI)*Math.asin(o/k)}return k*Math.pow(2,-10*j)*Math.sin((j*n-p)*2*Math.PI/m)+o+f},easeInOutElastic:function(p,j,f,o,n){p=1.70158;var m=0,k=o;if(j==0){return f}if((j/=n/2)==2){return f+o}m||(m=n*0.3*1.5);if(k<Math.abs(o)){k=o;p=m/4}else{p=m/(2*Math.PI)*Math.asin(o/k)}if(j<1){return -0.5*k*Math.pow(2,10*(j-=1))*Math.sin((j*n-p)*2*Math.PI/m)+f}return k*Math.pow(2,-10*(j-=1))*Math.sin((j*n-p)*2*Math.PI/m)*0.5+o+f},easeInBack:function(o,j,f,n,m,k){if(k==i){k=1.70158}return n*(j/=m)*j*((k+1)*j-k)+f},easeOutBack:function(o,j,f,n,m,k){if(k==i){k=1.70158}return n*((j=j/m-1)*j*((k+1)*j+k)+1)+f},easeInOutBack:function(o,j,f,n,m,k){if(k==i){k=1.70158}if((j/=m/2)<1){return n/2*j*j*(((k*=1.525)+1)*j-k)+f}return n/2*((j-=2)*j*(((k*=1.525)+1)*j+k)+2)+f},easeInBounce:function(n,j,f,m,k){return m-l.easing.easeOutBounce(n,k-j,0,m,k)+f},easeOutBounce:function(n,j,f,m,k){return(j/=k)<1/2.75?m*7.5625*j*j+f:j<2/2.75?m*(7.5625*(j-=1.5/2.75)*j+0.75)+f:j<2.5/2.75?m*(7.5625*(j-=2.25/2.75)*j+0.9375)+f:m*(7.5625*(j-=2.625/2.75)*j+0.984375)+f},easeInOutBounce:function(n,j,f,m,k){if(j<k/2){return l.easing.easeInBounce(n,j*2,0,m,k)*0.5+f}return l.easing.easeOutBounce(n,j*2-k,0,m,k)*0.5+m*0.5+f}})}(jQuery);(function(a){a.effects.blind=function(b){return this.queue(function(){var c=a(this),l=["position","top","bottom","left","right"],m=a.effects.setMode(c,b.options.mode||"hide"),o=b.options.direction||"vertical";a.effects.save(c,l);c.show();var n=a.effects.createWrapper(c).css({overflow:"hidden"}),k=o=="vertical"?"height":"width";o=o=="vertical"?n.height():n.width();m=="show"&&n.css(k,0);var j={};j[k]=m=="show"?o:0;n.animate(j,b.duration,b.options.easing,function(){m=="hide"&&c.hide();a.effects.restore(c,l);a.effects.removeWrapper(c);b.callback&&b.callback.apply(c[0],arguments);c.dequeue()})})}})(jQuery);(function(a){a.effects.bounce=function(c){return this.queue(function(){var v=a(this),e=["position","top","bottom","left","right"],q=a.effects.setMode(v,c.options.mode||"effect"),t=c.options.direction||"up",u=c.options.distance||20,b=c.options.times||5,p=c.duration||250;/show|hide/.test(q)&&e.push("opacity");
a.effects.save(v,e);v.show();a.effects.createWrapper(v);var s=t=="up"||t=="down"?"top":"left";t=t=="up"||t=="left"?"pos":"neg";u=c.options.distance||(s=="top"?v.outerHeight({margin:true})/3:v.outerWidth({margin:true})/3);if(q=="show"){v.css("opacity",0).css(s,t=="pos"?-u:u)}if(q=="hide"){u/=b*2}q!="hide"&&b--;if(q=="show"){var r={opacity:1};r[s]=(t=="pos"?"+=":"-=")+u;v.animate(r,p/2,c.options.easing);u/=2;b--}for(r=0;r<b;r++){var o={},n={};o[s]=(t=="pos"?"-=":"+=")+u;n[s]=(t=="pos"?"+=":"-=")+u;v.animate(o,p/2,c.options.easing).animate(n,p/2,c.options.easing);u=q=="hide"?u*2:u/2}if(q=="hide"){r={opacity:0};r[s]=(t=="pos"?"-=":"+=")+u;v.animate(r,p/2,c.options.easing,function(){v.hide();a.effects.restore(v,e);a.effects.removeWrapper(v);c.callback&&c.callback.apply(this,arguments)})}else{o={};n={};o[s]=(t=="pos"?"-=":"+=")+u;n[s]=(t=="pos"?"+=":"-=")+u;v.animate(o,p/2,c.options.easing).animate(n,p/2,c.options.easing,function(){a.effects.restore(v,e);a.effects.removeWrapper(v);c.callback&&c.callback.apply(this,arguments)})}v.queue("fx",function(){v.dequeue()});v.dequeue()})}})(jQuery);(function(a){a.effects.clip=function(b){return this.queue(function(){var e=a(this),j=["position","top","bottom","left","right","height","width"],m=a.effects.setMode(e,b.options.mode||"hide"),o=b.options.direction||"vertical";a.effects.save(e,j);e.show();var n=a.effects.createWrapper(e).css({overflow:"hidden"});n=e[0].tagName=="IMG"?n:e;var l={size:o=="vertical"?"height":"width",position:o=="vertical"?"top":"left"};o=o=="vertical"?n.height():n.width();if(m=="show"){n.css(l.size,0);n.css(l.position,o/2)}var k={};k[l.size]=m=="show"?o:0;k[l.position]=m=="show"?0:o/2;n.animate(k,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){m=="hide"&&e.hide();a.effects.restore(e,j);a.effects.removeWrapper(e);b.callback&&b.callback.apply(e[0],arguments);e.dequeue()}})})}})(jQuery);(function(a){a.effects.drop=function(b){return this.queue(function(){var d=a(this),k=["position","top","bottom","left","right","opacity"],n=a.effects.setMode(d,b.options.mode||"hide"),c=b.options.direction||"left";a.effects.save(d,k);d.show();a.effects.createWrapper(d);var m=c=="up"||c=="down"?"top":"left";c=c=="up"||c=="left"?"pos":"neg";var l=b.options.distance||(m=="top"?d.outerHeight({margin:true})/2:d.outerWidth({margin:true})/2);if(n=="show"){d.css("opacity",0).css(m,c=="pos"?-l:l)}var j={opacity:n=="show"?1:0};j[m]=(n=="show"?c=="pos"?"+=":"-=":c=="pos"?"-=":"+=")+l;d.animate(j,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){n=="hide"&&d.hide();a.effects.restore(d,k);a.effects.removeWrapper(d);b.callback&&b.callback.apply(this,arguments);d.dequeue()}})})}})(jQuery);(function(a){a.effects.fade=function(b){return this.queue(function(){var f=a(this),e=a.effects.setMode(f,b.options.mode||"hide");f.animate({opacity:e},{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments);f.dequeue()}})})}})(jQuery);(function(a){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),h=["backgroundImage","backgroundColor","opacity"],i=a.effects.setMode(c,b.options.mode||"show"),g={backgroundColor:c.css("backgroundColor")};if(i=="hide"){g.opacity=0}a.effects.save(c,h);c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(g,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){i=="hide"&&c.hide();a.effects.restore(c,h);i=="show"&&!a.support.opacity&&this.style.removeAttribute("filter");b.callback&&b.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);(function(a){a.effects.pulsate=function(b){return this.queue(function(){var d=a(this),e=a.effects.setMode(d,b.options.mode||"show");times=(b.options.times||5)*2-1;duration=b.duration?b.duration/2:a.fx.speeds._default/2;isVisible=d.is(":visible");animateTo=0;if(!isVisible){d.css("opacity",0).show();animateTo=1}if(e=="hide"&&isVisible||e=="show"&&!isVisible){times--
}for(e=0;e<times;e++){d.animate({opacity:animateTo},duration,b.options.easing);animateTo=(animateTo+1)%2}d.animate({opacity:animateTo},duration,b.options.easing,function(){animateTo==0&&d.hide();b.callback&&b.callback.apply(this,arguments)});d.queue("fx",function(){d.dequeue()}).dequeue()})}})(jQuery);(function(a){a.effects.slide=function(b){return this.queue(function(){var d=a(this),k=["position","top","bottom","left","right"],m=a.effects.setMode(d,b.options.mode||"show"),c=b.options.direction||"left";a.effects.save(d,k);d.show();a.effects.createWrapper(d).css({overflow:"hidden"});var l=c=="up"||c=="down"?"top":"left";c=c=="up"||c=="left"?"pos":"neg";var n=b.options.distance||(l=="top"?d.outerHeight({margin:true}):d.outerWidth({margin:true}));if(m=="show"){d.css(l,c=="pos"?isNaN(n)?"-"+n:-n:n)}var j={};j[l]=(m=="show"?c=="pos"?"+=":"-=":c=="pos"?"-=":"+=")+n;d.animate(j,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){m=="hide"&&d.hide();a.effects.restore(d,k);a.effects.removeWrapper(d);b.callback&&b.callback.apply(this,arguments);d.dequeue()}})})}})(jQuery);/*!
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(i,f){var t=i.fn.domManip,h="_tmplitem",u=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,p={},e={},y,x={key:0,data:{}},w=0,q=0,g=[];function k(B,A,D,E){var C={data:E||(E===0||E===false)?E:(A?A.data:{}),_wrap:A?A._wrap:null,tmpl:null,parent:A||null,nodes:[],calls:c,nest:b,wrap:n,html:r,update:z};if(B){i.extend(C,B,{nodes:[],parent:A})}if(D){C.tmpl=D;C._ctnt=C._ctnt||C.tmpl(i,C);C.key=++w;(g.length?e:p)[w]=C}return C}i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(A,B){i.fn[A]=function(C){var F=[],I=i(C),E,G,D,J,H=this.length===1&&this[0].parentNode;y=p||{};if(H&&H.nodeType===11&&H.childNodes.length===1&&I.length===1){I[B](this[0]);F=this}else{for(G=0,D=I.length;G<D;G++){q=G;E=(G>0?this.clone(true):this).get();i(I[G])[B](E);F=F.concat(E)}q=0;F=this.pushStack(F,A,I.selector)}J=y;y=null;i.tmpl.complete(J);return F}});i.fn.extend({tmpl:function(C,B,A){return i.tmpl(this[0],C,B,A)},tmplItem:function(){return i.tmplItem(this[0])},template:function(A){return i.template(A,this[0])},domManip:function(E,H,G,I){if(E[0]&&i.isArray(E[0])){var B=i.makeArray(arguments),A=E[0],F=A.length,C=0,D;while(C<F&&!(D=i.data(A[C++],"tmplItem"))){}if(D&&q){B[2]=function(J){i.tmpl.afterManip(this,J,G)}}t.apply(this,B)}else{t.apply(this,arguments)}q=0;if(!y){i.tmpl.complete(p)}return this}});i.extend({tmpl:function(C,F,E,B){var D,A=!B;if(A){B=x;C=i.template[C]||i.template(null,C);e={}}else{if(!C){C=B.tmpl;p[B.key]=B;B.nodes=[];if(B.wrapped){s(B,B.wrapped)}return i(m(B,null,B.tmpl(i,B)))}}if(!C){return[]}if(typeof F==="function"){F=F.call(B||{})}if(E&&E.wrapped){s(E,E.wrapped)}D=i.isArray(F)?i.map(F,function(G){return G?k(E,B,C,G):null}):[k(E,B,C,F)];return A?i(m(B,null,D)):D},tmplItem:function(B){var A;if(B instanceof i){B=B[0]}while(B&&B.nodeType===1&&!(A=i.data(B,"tmplItem"))&&(B=B.parentNode)){}return A||x},template:function(B,A){if(A){if(typeof A==="string"){A=l(A)}else{if(A instanceof i){A=A[0]||{}}}if(A.nodeType){A=i.data(A,"tmpl")||i.data(A,"tmpl",l(A.innerHTML))}return typeof B==="string"?(i.template[B]=A):A}return B?(typeof B!=="string"?i.template(null,B):(i.template[B]||i.template(null,u.test(B)?B:i(B)))):null},encode:function(A){return(""+A).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});i.extend(i.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(A){p={}},afterManip:function v(C,A,D){var B=A.nodeType===11?i.makeArray(A.childNodes):A.nodeType===1?[A]:[];D.call(C,A);o(B);q++}});function m(A,E,C){var D,B=C?i.map(C,function(F){return(typeof F==="string")?(A.key?F.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+h+'="'+A.key+'" $2'):F):m(F,A,F._ctnt)}):A;if(E){return B}B=B.join("");B.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(G,H,F,I){D=i(F).get();o(D);if(H){D=a(H).concat(D)}if(I){D=D.concat(a(I))}});return D?D:a(B)}function a(B){var A=document.createElement("div");A.innerHTML=B;return i.makeArray(A.childNodes)}function l(A){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+i.trim(A).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(I,C,G,D,E,J,F){var L=i.tmpl.tag[G],B,H,K;
if(!L){throw"Unknown template tag: "+G}B=L._default||[];if(J&&!/\w$/.test(E)){E+=J;J=""}if(E){E=j(E);F=F?(","+j(F)+")"):(J?")":"");H=J?(E.indexOf(".")>-1?E+j(J):("("+E+").call($item"+F)):E;K=J?H:"(typeof("+E+")==='function'?("+E+").call($item):("+E+"))"}else{K=H=B.$1||"null"}D=j(D);return"');"+L[C?"close":"open"].split("$notnull_1").join(E?"typeof("+E+")!=='undefined' && ("+E+")!=null":"true").split("$1a").join(K).split("$1").join(H).split("$2").join(D||B.$2||"")+"__.push('"})+"');}return __;")}function s(B,A){B._wrap=m(B,true,i.isArray(A)?A:[u.test(A)?A:i(A).html()]).join("")}function j(A){return A?A.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function d(A){var B=document.createElement("div");B.appendChild(A.cloneNode(true));return B.innerHTML}function o(G){var I="_"+q,B,A,E={},F,D,C;for(F=0,D=G.length;F<D;F++){if((B=G[F]).nodeType!==1){continue}A=B.getElementsByTagName("*");for(C=A.length-1;C>=0;C--){H(A[C])}H(B)}function H(O){var L,N=O,M,J,K;if((K=O.getAttribute(h))){while(N.parentNode&&(N=N.parentNode).nodeType===1&&!(L=N.getAttribute(h))){}if(L!==K){N=N.parentNode?(N.nodeType===11?0:(N.getAttribute(h)||0)):0;if(!(J=p[K])){J=e[K];J=k(J,p[N]||e[N]);J.key=++w;p[w]=J}if(q){P(K)}}O.removeAttribute(h)}else{if(q&&(J=i.data(O,"tmplItem"))){P(J.key);p[J.key]=J;N=i.data(O.parentNode,"tmplItem");N=N?N.key:0}}if(J){M=J;while(M&&M.key!=N){M.nodes.push(O);M=M.parent}delete J._ctnt;delete J._wrap;i.data(O,"tmplItem",J)}function P(Q){Q=Q+I;J=E[Q]=(E[Q]||k(J,p[J.parent.key+I]||J.parent))}}}function c(C,A,D,B){if(!C){return g.pop()}g.push({_:C,tmpl:A,item:this,data:D,options:B})}function b(A,C,B){return i.tmpl(i.template(A),C,B,this)}function n(C,A){var B=C.options||{};B.wrapped=A;return i.tmpl(i.template(C.tmpl),C.data,B,C.item)}function r(B,C){var A=this._wrap;return i.map(i(i.isArray(A)?A.join(""):A).filter(B||"*"),function(D){return C?D.innerText||D.textContent:D.outerHTML||d(D)})}function z(){var A=this.nodes;i.tmpl(null,null,null,this).insertBefore(A[0]);i(A).remove()}})(jQuery);(function(a){a.fn.lightBox=function(p){p=jQuery.extend({overlayBgColor:"#000",overlayOpacity:0.8,fixedNavigation:false,imageLoading:"/assets/images/lightbox/lightbox-ico-loading.gif",imageBtnPrev:"/assets/images/lightbox/lightbox-btn-prev.gif",imageBtnNext:"/assets/images/lightbox/lightbox-btn-next.gif",imageBtnClose:"/assets/images/lightbox/BI-close-button.png",imageBlank:"/assets/images/lightbox/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],beforeOpen:function(){},onClose:function(){},overrideTitle:function(){},activeImage:0},p);var i=this;function r(){o(this,i);return false}function o(v,u){a("embed, object, select, iframe.ad").css({visibility:"hidden"});c();p.imageArray.length=0;p.activeImage=0;if(u.length==1){p.imageArray.push(new Array(v.getAttribute("href"),v.getAttribute("title")))}else{for(var t=0;t<u.length;t++){p.imageArray.push(new Array(u[t].getAttribute("href"),u[t].getAttribute("title")))}}while(p.imageArray[p.activeImage][0]!=v.getAttribute("href")){p.activeImage++}l()}function c(){a("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+p.imageBtnClose+'"></a></div><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+p.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div></div></div></div>');var t=f();a("#jquery-overlay").css({backgroundColor:p.overlayBgColor,opacity:p.overlayOpacity,width:t[0],height:t[1]}).fadeIn();var u=h();a("#jquery-lightbox").css({top:u[1]+(t[3]/10),left:u[0]}).show();a("#jquery-overlay,#jquery-lightbox").click(function(){b()});a("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){b();return false});a(window).resize(function(){var v=f();a("#jquery-overlay").css({width:v[0],height:v[1]});var w=h();a("#jquery-lightbox").css({top:w[1]+(v[3]/10),left:w[0]})})}function l(){p.beforeOpen();a("#lightbox-loading").show();if(p.fixedNavigation){a("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}else{a("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}var t=new Image();t.onload=function(){a("#lightbox-image").attr("src",p.imageArray[p.activeImage][0]);j(t.width,t.height);t.onload=function(){}};t.src=p.imageArray[p.activeImage][0]}function j(w,z){var t=a("#lightbox-container-image-box").width();var y=a("#lightbox-container-image-box").height();var x=(w+(p.containerBorderSize*2));var v=(z+(p.containerBorderSize*2));var u=t-x;var A=y-v;a("#lightbox-container-image-box").animate({width:x,height:v},p.containerResizeSpeed,function(){g()});if((u==0)&&(A==0)){if(a.browser.msie){n(250)}else{n(100)}}a("#lightbox-container-image-data-box").css({width:w});a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:z+(p.containerBorderSize*2)})}function g(){a("#lightbox-loading").hide();a("#lightbox-image").fadeIn(function(){k();s()});q()}function k(){var t=p.overrideTitle()||p.imageArray[p.activeImage][1];a("#lightbox-container-image-data-box").slideDown("fast");a("#lightbox-image-details-caption").hide();if(t){a("#lightbox-image-details-caption").html(t).show()}if(p.imageArray.length>1){a("#lightbox-image-details-currentNumber").html(p.txtImage+" "+(p.activeImage+1)+" "+p.txtOf+" "+p.imageArray.length).show()}}function s(){a("#lightbox-nav").show();a("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+p.imageBlank+") no-repeat"});
if(p.activeImage!=0){if(p.fixedNavigation){a("#lightbox-nav-btnPrev").css({background:"url("+p.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){p.activeImage=p.activeImage-1;l();return false})}else{a("#lightbox-nav-btnPrev").unbind().hover(function(){a(this).css({background:"url("+p.imageBtnPrev+") left 15% no-repeat"})},function(){a(this).css({background:"transparent url("+p.imageBlank+") no-repeat"})}).show().bind("click",function(){p.activeImage=p.activeImage-1;l();return false})}}if(p.activeImage!=(p.imageArray.length-1)){if(p.fixedNavigation){a("#lightbox-nav-btnNext").css({background:"url("+p.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){p.activeImage=p.activeImage+1;l();return false})}else{a("#lightbox-nav-btnNext").unbind().hover(function(){a(this).css({background:"url("+p.imageBtnNext+") right 15% no-repeat"})},function(){a(this).css({background:"transparent url("+p.imageBlank+") no-repeat"})}).show().bind("click",function(){p.activeImage=p.activeImage+1;l();return false})}}m()}function m(){a(document).keydown(function(t){d(t)})}function e(){a(document).unbind()}function d(t){if(t==null){keycode=event.keyCode;escapeKey=27}else{keycode=t.keyCode;escapeKey=t.DOM_VK_ESCAPE}key=String.fromCharCode(keycode).toLowerCase();if((key==p.keyToClose)||(key=="x")||(keycode==escapeKey)){b()}if((key==p.keyToPrev)||(keycode==37)){if(p.activeImage!=0){p.activeImage=p.activeImage-1;l();e()}}if((key==p.keyToNext)||(keycode==39)){if(p.activeImage!=(p.imageArray.length-1)){p.activeImage=p.activeImage+1;l();e()}}}function q(){if((p.imageArray.length-1)>p.activeImage){objNext=new Image();objNext.src=p.imageArray[p.activeImage+1][0]}if(p.activeImage>0){objPrev=new Image();objPrev.src=p.imageArray[p.activeImage-1][0]}}function b(){a("#jquery-lightbox").remove();a("#jquery-overlay").fadeOut(function(){a("#jquery-overlay").remove()});a("embed, object, select, iframe.ad").css({visibility:"visible"});p.onClose()}function f(){var v,t;if(window.innerHeight&&window.scrollMaxY){v=window.innerWidth+window.scrollMaxX;t=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){v=document.body.scrollWidth;t=document.body.scrollHeight}else{v=document.body.offsetWidth;t=document.body.offsetHeight}}var u,w;if(self.innerHeight){if(document.documentElement.clientWidth){u=document.documentElement.clientWidth}else{u=self.innerWidth}w=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){u=document.documentElement.clientWidth;w=document.documentElement.clientHeight}else{if(document.body){u=document.body.clientWidth;w=document.body.clientHeight}}}if(t<w){pageHeight=w}else{pageHeight=t}if(v<u){pageWidth=v}else{pageWidth=u}arrayPageSize=new Array(pageWidth,pageHeight,u,w);return arrayPageSize}function h(){var u,t;if(self.pageYOffset){t=self.pageYOffset;u=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){t=document.documentElement.scrollTop;u=document.documentElement.scrollLeft}else{if(document.body){t=document.body.scrollTop;u=document.body.scrollLeft}}}arrayPageScroll=new Array(u,t);return arrayPageScroll}function n(v){var u=new Date();t=null;do{var t=new Date()}while(t-u<v)}return this.unbind("click").click(r)}})(jQuery);(function(a){a.extend({onAvailable:function(c,f){if(typeof f!=="function"){throw new TypeError()}var e=a.onAvailable;if(!(c instanceof Array)){c=[c]}for(var b=0,d=c.length;b<d;++b){e.listeners.push({id:c[b],callback:f,obj:arguments[2],override:arguments[3],checkContent:!!arguments[4]})}if(!e.interval){e.interval=window.setInterval(e.checkAvailable,e.POLL_INTERVAL)}return this},onContentReady:function(c,e,d,b){a.onAvailable(c,e,d,b,true)}});a.extend(a.onAvailable,{POLL_RETRIES:2000,POLL_INTERVAL:20,interval:null,listeners:[],executeCallback:function(c,d){var b=c;if(d.override){if(d.override===true){b=d.obj}else{b=d.override}}d.callback.call(b,d.obj)},checkAvailable:function(){var f=a.onAvailable;var d=f.listeners;for(var b=0;b<d.length;++b){var e=d[b];var c=document.getElementById(e.id);if(c&&(!e.checkContent||(e.checkContent&&(c.nextSibling||c.parentNode.nextSibling||a.isReady)))){f.executeCallback(c,e);d.splice(b,1);--b}if(d.length===0||--f.POLL_RETRIES===0){f.interval=window.clearInterval(f.interval)}}}})})(jQuery);(function(d){var f={put:function(h,g){(g||window).location.hash=this.encoder(h)},get:function(i){var h=((i||window).location.hash).replace(/^#/,"");try{return d.browser.mozilla?h:decodeURIComponent(h)}catch(g){return h}},encoder:encodeURIComponent};var c={id:"__jQuery_history",init:function(){var g='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';d("body").prepend(g);return this},_document:function(){return d("#"+this.id)[0].contentWindow.document},put:function(h){var g=this._document();g.open();g.close();f.put(h,g)},get:function(){return f.get(this._document())}};function e(h){h=d.extend({unescape:false},h||{});f.encoder=i(h.unescape);function i(j){if(j===true){return function(k){return k}}if(typeof j=="string"&&(j=g(j.split("")))||typeof j=="function"){return function(k){return j(encodeURIComponent(k))}}return encodeURIComponent}function g(k){var j=new RegExp(d.map(k,encodeURIComponent).join("|"),"ig");return function(l){return l.replace(j,decodeURIComponent)}}}var b={};b.base={callback:undefined,type:undefined,check:function(){},load:function(g){},init:function(h,g){e(g);a.callback=h;a._options=g;a._init()},_init:function(){},_options:{}};b.timer={_appState:undefined,_init:function(){var g=f.get();a._appState=g;a.callback(g);setInterval(a.check,100)},check:function(){var g=f.get();if(g!=a._appState){a._appState=g;a.callback(g)}},load:function(g){if(g!=a._appState){f.put(g);a._appState=g;a.callback(g)}}};b.iframeTimer={_appState:undefined,_init:function(){var g=f.get();a._appState=g;c.init().put(g);a.callback(g);setInterval(a.check,100)},check:function(){var h=c.get(),g=f.get();if(g!=h){if(g==a._appState){a._appState=h;f.put(h);a.callback(h)}else{a._appState=g;c.put(g);a.callback(g)}}},load:function(g){if(g!=a._appState){f.put(g);c.put(g);a._appState=g;a.callback(g)}}};b.hashchangeEvent={_init:function(){a.callback(f.get());d(window).bind("hashchange",a.check)},check:function(){a.callback(f.get())},load:function(g){f.put(g)}};var a=d.extend({},b.base);if(d.browser.msie&&(d.browser.version<8||document.documentMode<8)){a.type="iframeTimer"}else{if("onhashchange" in window){a.type="hashchangeEvent"}else{a.type="timer"}}d.extend(a,b[a.type]);d.history=a})(jQuery);(function(g){var c={every:1,eventType:"click",onTrigger:function(){},counterId:""};var f={};var l={};var m={};var h;var e=function(i){return".eventCounter."+(i?i:"")};var n=function(o,i){l[i.counterId]++;if(l[i.counterId]%i.every===0){i.onTrigger(o,f[i.counterId])}};var a=function(i,o){n(i,m[o])};var j=function(p,i){var q=i.counterId;var o=e(i.counterId);p.bind(i.eventType+o,function(r){n(r,i)});f[q]=g(f[q]).add(p)};var d=function(p,q){var i=m[q];var o=e(q);p.unbind(i.eventType+o);f[q]=jQuery.grep(f[q],function(r){return(!(g.inArray(r,p)!==-1))})};var k=function(i){if(!f.hasOwnProperty(i)){g.error("No eventCounter exists with id "+i)}};var b={init:function(i){if(i){g.extend(c,i)}if(!i.counterId){h++;i.counterId="counter"+h}f[i.counterId]=g();l[i.counterId]=0;m[i.counterId]=i;j(this,i);return this},destroy:function(o){if(o){k(o);d(this,o)}else{for(var i in f){if(f.hasOwnProperty(i)){d(this,i)}}}return this},add:function(i){k(i);j(g(this),m[i]);return this},increment:function(i,o){k(o);a(i,o);return this}};g.fn.eventCounter=function(i){if(b[i]){return b[i].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof i==="object"||!i){return b.init.apply(this,arguments)}else{g.error("Method "+i+" does not exist on jQuery.eventCounter")}}}}(jQuery));/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,e,b){var c="hashchange",h=document,f,g=$.event.special,i=h.documentMode,d="on"+c in e&&(i===b||i>7);function a(j){j=j||location.href;return"#"+j.replace(/^[^#]*#?(.*)$/,"$1")}$.fn[c]=function(j){return j?this.bind(c,j):this.trigger(c)};$.fn[c].delay=50;g[c]=$.extend(g[c],{setup:function(){if(d){return false}$(f.start)},teardown:function(){if(d){return false}$(f.stop)}});f=(function(){var j={},p,m=a(),k=function(q){return q},l=k,o=k;j.start=function(){p||n()};j.stop=function(){p&&clearTimeout(p);p=b};function n(){var r=a(),q=o(m);if(r!==m){l(m=r,q);$(e).trigger(c)}else{if(q!==m){location.href=location.href.replace(/#.*/,"")+q}}p=setTimeout(n,$.fn[c].delay)}$.browser.msie&&!d&&(function(){var q,r;j.start=function(){if(!q){r=$.fn[c].src;r=r&&r+a();q=$('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){r||l(a());n()}).attr("src",r||"javascript:0").insertAfter("body")[0].contentWindow;h.onpropertychange=function(){try{if(event.propertyName==="title"){q.document.title=h.title}}catch(s){}}}};j.stop=k;o=function(){return a(q.location.href)};l=function(v,s){var u=q.document,t=$.fn[c].domain;if(v!==s){u.title=h.title;u.open();t&&u.write('<script>document.domain="'+t+'"<\/script>');u.close();q.location.hash=v}}})();return j})()})(jQuery,this);(function(a){a.fn.extend({defaultValue:function(b){if("placeholder" in document.createElement("input")){return !1}return this.each(function(){if(a(this).data("defaultValued")){return !1}var c=a(this),e=c.attr("placeholder"),j={input:c};c.data("defaultValued",!0);var k=function(){var d;if(c.context.nodeName.toLowerCase()=="input"){d=a("<input />").attr({type:"text"})}else{if(c.context.nodeName.toLowerCase()=="textarea"){d=a("<textarea />")}else{throw"DefaultValue only works with input and textareas"}}d.attr({value:e,"class":c.attr("class")+" empty",size:c.attr("size"),style:c.attr("style"),tabindex:c.attr("tabindex"),rows:c.attr("rows"),cols:c.attr("cols"),name:"defaultvalue-clone-"+((1+Math.random())*65536|0).toString(16).substring(1)});d.focus(function(){d.hide();c.show();setTimeout(function(){c.focus()},1)});return d}();j.clone=k;k.insertAfter(c);var i=function(){c.val().length<=0?(k.show(),c.hide()):(k.hide(),c.show().trigger("click"))};c.bind("blur",i);i();b&&b(j)})}})})(jQuery);(function(a){a.fn.hoverIntent=function(k,j){var l={sensitivity:7,interval:100,timeout:0};l=a.extend(l,j?{over:k,out:j}:k);var n,m,h,d;var e=function(f){n=f.pageX;m=f.pageY};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(h-n)+Math.abs(d-m))<l.sensitivity){a(f).unbind("mousemove",e);f.hoverIntent_s=1;return l.over.apply(f,[g])}else{h=n;d=m;f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}};var i=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return l.out.apply(f,[g])};var b=function(o){var g=jQuery.extend({},o);var f=this;if(f.hoverIntent_t){f.hoverIntent_t=clearTimeout(f.hoverIntent_t)}if(o.type=="mouseenter"){h=g.pageX;d=g.pageY;a(f).bind("mousemove",e);if(f.hoverIntent_s!=1){f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}}else{a(f).unbind("mousemove",e);if(f.hoverIntent_s==1){f.hoverIntent_t=setTimeout(function(){i(g,f)},l.timeout)}}};return this.bind("mouseenter",b).bind("mouseleave",b)}})(jQuery);(function(a){var c=a.event,b;c.special.smartresize={setup:function(){a(this).bind("resize",c.special.smartresize.handler)},teardown:function(){a(this).unbind("resize",c.special.smartresize.handler)},handler:function(f,e){var h=this,i=arguments;f.type="smartresize";b&&clearTimeout(b);b=setTimeout(function(){jQuery.event.handle.apply(h,i)},e==="execAsap"?0:100)}};a.fn.smartresize=function(d){return d?this.bind("smartresize",d):this.trigger("smartresize",["execAsap"])};a.fn.masonry=function(e,d){var f={getBricks:function(i,g,h){var j=h.itemSelector===undefined;g.$bricks=h.appendedContent===undefined?j?i.children():i.find(h.itemSelector):j?h.appendedContent:h.appendedContent.filter(h.itemSelector)},placeBrick:function(p,r,s,q,n){r=Math.min.apply(Math,s);for(var l=r+p.outerHeight(true),o=s.length,j=o,g=q.colCount+1-o;o--;){if(s[o]==r){j=o}}p.applyStyle({left:q.colW*j+q.posLeft,top:r},a.extend(true,{},n.animationOptions));for(o=0;o<g;o++){q.colY[j+o]=l}},setup:function(i,g,h){f.getBricks(i,h,g);if(h.masoned){h.previousData=i.data("masonry")}h.colW=g.columnWidth===undefined?h.masoned?h.previousData.colW:h.$bricks.outerWidth(true):g.columnWidth;h.colCount=Math.floor(i.width()/h.colW);h.colCount=Math.max(h.colCount,1)},arrange:function(k,g,i){var l;if(!i.masoned||g.appendedContent!==undefined){i.$bricks.css("position","absolute")}if(i.masoned){i.posTop=i.previousData.posTop;i.posLeft=i.previousData.posLeft}else{k.css("position","relative");var j=a(document.createElement("div"));k.prepend(j);i.posTop=Math.round(j.position().top);i.posLeft=Math.round(j.position().left);j.remove()}if(i.masoned&&g.appendedContent!==undefined){i.colY=i.previousData.colY;for(l=i.previousData.colCount;l<i.colCount;l++){i.colY[l]=i.posTop}}else{i.colY=[];for(l=i.colCount;l--;){i.colY.push(i.posTop)}}a.fn.applyStyle=i.masoned&&g.animate?a.fn.animate:a.fn.css;g.singleMode?i.$bricks.each(function(){var h=a(this);f.placeBrick(h,i.colCount,i.colY,i,g)}):i.$bricks.each(function(){var o=a(this),q=Math.ceil(o.outerWidth(true)/i.colW);q=Math.min(q,i.colCount);if(q===1){f.placeBrick(o,i.colCount,i.colY,i,g)}else{var n=i.colCount+1-q,h=[];for(l=0;l<n;l++){var r=i.colY.slice(l,l+q);h[l]=Math.max.apply(Math,r)}f.placeBrick(o,n,h,i,g)}});i.wallH=Math.max.apply(Math,i.colY);k.applyStyle({height:i.wallH-i.posTop},a.extend(true,[],g.animationOptions));i.masoned||setTimeout(function(){k.addClass("masoned")},1);d.call(i.$bricks);k.data("masonry",i)},resize:function(i,g,h){h.masoned=!!i.data("masonry");var j=i.data("masonry").colCount;f.setup(i,g,h);h.colCount!=j&&f.arrange(i,g,h)}};return this.each(function(){var k=a(this),g={};g.masoned=!!k.data("masonry");var i=g.masoned?k.data("masonry").options:{},l=a.extend({},a.fn.masonry.defaults,i,e),j=i.resizeable;g.options=l.saveOptions?l:i;d=d||function(){};f.getBricks(k,g,l);if(!g.$bricks.length){return this}f.setup(k,l,g);f.arrange(k,l,g);!j&&l.resizeable&&a(window).bind("smartresize.masonry",function(){f.resize(k,l,g)});j&&!l.resizeable&&a(window).unbind("smartresize.masonry")})};a.fn.masonry.defaults={singleMode:false,columnWidth:undefined,itemSelector:undefined,appendedContent:undefined,saveOptions:true,resizeable:true,animate:false,animationOptions:{}}})(jQuery);(function(){function d(){}function b(i,h){for(var j=i.length;j--;){if(i[j].listener===h){return j}}return -1}function g(h){return function(){return this[h].apply(this,arguments)}}var a=d.prototype,c=this,f=c.EventEmitter;a.getListeners=function(k){var j,l,h=this._getEvents();if("object"==typeof k){j={};for(l in h){h.hasOwnProperty(l)&&k.test(l)&&(j[l]=h[l])}}else{j=h[k]||(h[k]=[])}return j},a.flattenListeners=function(i){var h,j=[];for(h=0;i.length>h;h+=1){j.push(i[h].listener)}return j},a.getListenersAsObject=function(i){var h,j=this.getListeners(i);return j instanceof Array&&(h={},h[i]=j),h||j},a.addListener=function(k,m){var h,j=this.getListenersAsObject(k),l="object"==typeof m;for(h in j){j.hasOwnProperty(h)&&-1===b(j[h],m)&&j[h].push(l?m:{listener:m,once:!1})}return this},a.on=g("addListener"),a.addOnceListener=function(i,h){return this.addListener(i,{listener:h,once:!0})},a.once=g("addOnceListener"),a.defineEvent=function(h){return this.getListeners(h),this},a.defineEvents=function(i){for(var h=0;i.length>h;h+=1){this.defineEvent(i[h])}return this},a.removeListener=function(k,m){var h,j,l=this.getListenersAsObject(k);for(j in l){l.hasOwnProperty(j)&&(h=b(l[j],m),-1!==h&&l[j].splice(h,1))}return this},a.off=g("removeListener"),a.addListeners=function(i,h){return this.manipulateListeners(!1,i,h)},a.removeListeners=function(i,h){return this.manipulateListeners(!0,i,h)},a.manipulateListeners=function(m,j,q){var h,l,p=m?this.removeListener:this.addListener,k=m?this.removeListeners:this.addListeners;if("object"!=typeof j||j instanceof RegExp){for(h=q.length;h--;){p.call(this,j,q[h])}}else{for(h in j){j.hasOwnProperty(h)&&(l=j[h])&&("function"==typeof l?p.call(this,h,l):k.call(this,h,l))}}return this},a.removeEvent=function(k){var j,l=typeof k,h=this._getEvents();if("string"===l){delete h[k]}else{if("object"===l){for(j in h){h.hasOwnProperty(j)&&k.test(j)&&delete h[j]}}else{delete this._events}}return this},a.removeAllListeners=g("removeEvent"),a.emitEvent=function(m,j){var q,h,l,p,k=this.getListenersAsObject(m);for(l in k){if(k.hasOwnProperty(l)){for(h=k[l].length;h--;){q=k[l][h],q.once===!0&&this.removeListener(m,q.listener),p=q.listener.apply(this,j||[]),p===this._getOnceReturnValue()&&this.removeListener(m,q.listener)}}}return this},a.trigger=g("emitEvent"),a.emit=function(i){var h=Array.prototype.slice.call(arguments,1);return this.emitEvent(i,h)},a.setOnceReturnValue=function(h){return this._onceReturnValue=h,this},a._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},a._getEvents=function(){return this._events||(this._events={})},d.noConflict=function(){return c.EventEmitter=f,d},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return d}):"object"==typeof module&&module.exports?module.exports=d:this.EventEmitter=d}).call(this),function(d){function b(e){var h=d.event;return h.target=h.target||h.srcElement||e,h}var g=document.documentElement,a=function(){};g.addEventListener?a=function(i,h,j){i.addEventListener(h,j,!1)}:g.attachEvent&&(a=function(j,k,h){j[k+h]=h.handleEvent?function(){var e=b(j);h.handleEvent.call(h,e)}:function(){var e=b(j);h.call(j,e)},j.attachEvent("on"+k,j[k+h])});var c=function(){};g.removeEventListener?c=function(i,h,j){i.removeEventListener(h,j,!1)}:g.detachEvent&&(c=function(k,j,l){k.detachEvent("on"+j,k[j+l]);try{delete k[j+l]}catch(h){k[j+l]=void 0}});var f={bind:a,unbind:c};"function"==typeof define&&define.amd?define("eventie/eventie",f):d.eventie=f}(this),function(b,a){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(d,c){return a(b,d,c)}):"object"==typeof exports?module.exports=a(b,require("wolfy87-eventemitter"),require("eventie")):b.imagesLoaded=a(b,b.EventEmitter,b.eventie)}(window,function(p,A,j){function k(c,a){for(var d in a){c[d]=a[d]}return c}function b(a){return"[object Array]"===q.call(a)}function g(d){var c=[];if(b(d)){c=d}else{if("number"==typeof d.length){for(var f=0,a=d.length;
a>f;f++){c.push(d[f])}}else{c.push(d)}}return c}function B(d,a,f){if(!(this instanceof B)){return new B(d,a)}"string"==typeof d&&(d=document.querySelectorAll(d)),this.elements=g(d),this.options=k({},this.options),"function"==typeof a?f=a:k(this.options,a),f&&this.on("always",f),this.getImages(),x&&(this.jqDeferred=new x.Deferred);var c=this;setTimeout(function(){c.check()})}function m(a){this.img=a}function w(a){this.src=a,y[a]=this}var x=p.jQuery,z=p.console,l=z!==void 0,q=Object.prototype.toString;B.prototype=new A,B.prototype.options={},B.prototype.getImages=function(){this.images=[];for(var v=0,c=this.elements.length;c>v;v++){var D=this.elements[v];"IMG"===D.nodeName&&this.addImage(D);var a=D.nodeType;if(a&&(1===a||9===a||11===a)){for(var h=D.querySelectorAll("img"),C=0,d=h.length;d>C;C++){var u=h[C];this.addImage(u)}}}},B.prototype.addImage=function(c){var a=new m(c);this.images.push(a)},B.prototype.check=function(){function f(n,i){return c.options.debug&&l&&z.log("confirm",n,i),c.progress(n),s++,s===a&&c.complete(),!0}var c=this,s=0,a=this.images.length;if(this.hasAnyBroken=!1,!a){return this.complete(),void 0}for(var d=0;a>d;d++){var h=this.images[d];h.on("confirm",f),h.check()}},B.prototype.progress=function(c){this.hasAnyBroken=this.hasAnyBroken||!c.isLoaded;var a=this;setTimeout(function(){a.emit("progress",a,c),a.jqDeferred&&a.jqDeferred.notify&&a.jqDeferred.notify(a,c)})},B.prototype.complete=function(){var c=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var a=this;setTimeout(function(){if(a.emit(c,a),a.emit("always",a),a.jqDeferred){var d=a.hasAnyBroken?"reject":"resolve";a.jqDeferred[d](a)}})},x&&(x.fn.imagesLoaded=function(c,a){var d=new B(this,c,a);return d.jqDeferred.promise(x(this))}),m.prototype=new A,m.prototype.check=function(){var c=y[this.img.src]||new w(this.img.src);if(c.isConfirmed){return this.confirm(c.isLoaded,"cached was confirmed"),void 0}if(this.img.complete&&void 0!==this.img.naturalWidth){return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0}var a=this;c.on("confirm",function(d,f){return a.confirm(d.isLoaded,f),!0}),c.check()},m.prototype.confirm=function(c,a){this.isLoaded=c,this.emit("confirm",this,a)};var y={};return w.prototype=new A,w.prototype.check=function(){if(!this.isChecked){var a=new Image;j.bind(a,"load",this),j.bind(a,"error",this),a.src=this.src,this.isChecked=!0}},w.prototype.handleEvent=function(c){var a="on"+c.type;this[a]&&this[a](c)},w.prototype.onload=function(a){this.confirm(!0,"onload"),this.unbindProxyEvents(a)},w.prototype.onerror=function(a){this.confirm(!1,"onerror"),this.unbindProxyEvents(a)},w.prototype.confirm=function(c,a){this.isConfirmed=!0,this.isLoaded=c,this.emit("confirm",this,a)},w.prototype.unbindProxyEvents=function(a){j.unbind(a.target,"load",this),j.unbind(a.target,"error",this)},B});/*! jQuery Mobile v1.2.1 jquerymobile.com | jquery.org/license */
(function(b,a,c){typeof define=="function"&&define.amd?define(["jquery"],function(d){return c(d,b,a),d.mobile}):c(b.jQuery,b,a)})(this,document,function(c,a,d,b){(function(aC,am,at,ao){function ai(f){while(f&&typeof f.originalEvent!="undefined"){f=f.originalEvent}return f}function G(x,g){var k=x.type,y,f,u,j,r,m,e,q,w;x=aC.Event(x),x.type=g,y=x.originalEvent,f=aC.event.props,k.search(/^(mouse|click)/)>-1&&(f=aB);if(y){for(e=f.length,j;e;){j=f[--e],x[j]=y[j]}}k.search(/mouse(down|up)|click/)>-1&&!x.which&&(x.which=1);if(k.search(/^touch/)!==-1){u=ai(y),k=u.touches,r=u.changedTouches,m=k&&k.length?k[0]:r&&r.length?r[0]:ao;if(m){for(q=0,w=al.length;q<w;q++){j=al[q],x[j]=m[j]}}}return x}function W(e){var h={},g,f;while(e){g=aC.data(e,ay);for(f in g){g[f]&&(h[f]=h.hasVirtualBinding=!0)}e=e.parentNode}return h}function ae(e,g){var f;while(e){f=aC.data(e,ay);if(f&&(!g||f[g])){return e}e=e.parentNode}return null}function aw(){aA=!1}function Y(){aA=!0}function ag(){ac=0,ak.length=0,au=!1,Y()}function V(){aw()}function X(){aH(),aE=setTimeout(function(){aE=0,ag()},aC.vmouse.resetTimerDuration)}function aH(){aE&&(clearTimeout(aE),aE=0)}function ad(f,h,g){var e;if(g&&g[f]||!g&&ae(h.target,f)){e=G(h,f),aC(h.target).trigger(e)}return e}function Q(e){var g=aC.data(e.target,an);if(!au&&(!ac||ac!==g)){var f=ad("v"+e.type,e);f&&(f.isDefaultPrevented()&&e.preventDefault(),f.isPropagationStopped()&&e.stopPropagation(),f.isImmediatePropagationStopped()&&e.stopImmediatePropagation())}}function aa(f){var j=ai(f).touches,g,e;if(j&&j.length===1){g=f.target,e=W(g);if(e.hasVirtualBinding){ac=aj++,aC.data(g,an,ac),aH(),V(),aD=!1;var h=ai(f).touches[0];az=h.pageX,aq=h.pageY,ad("vmouseover",f,e),ad("vmousedown",f,e)}}}function af(f){if(aA){return}aD||ad("vmousecancel",f,W(f.target)),aD=!0,X()}function ax(f){if(aA){return}var j=ai(f).touches[0],h=aD,e=aC.vmouse.moveDistanceThreshold,g=W(f.target);aD=aD||Math.abs(j.pageX-az)>e||Math.abs(j.pageY-aq)>e,aD&&!h&&ad("vmousecancel",f,g),ad("vmousemove",f,g),X()}function ab(h){if(aA){return}Y();var f=W(h.target),i;ad("vmouseup",h,f);if(!aD){var g=ad("vclick",h,f);g&&g.isDefaultPrevented()&&(i=ai(h).changedTouches[0],ak.push({touchID:ac,x:i.clientX,y:i.clientY}),au=!0)}ad("vmouseout",h,f),aD=!1,X()}function Z(e){var g=aC.data(e,ay),f;if(g){for(f in g){if(g[f]){return !0}}}return !1}function ap(){}function K(e){var f=e.substr(1);return{setup:function(h,g){Z(this)||aC.data(this,ay,{});var i=aC.data(this,ay);i[e]=!0,av[e]=(av[e]||0)+1,av[e]===1&&aF.bind(f,Q),aC(this).bind(f,ap),ah&&(av.touchstart=(av.touchstart||0)+1,av.touchstart===1&&aF.bind("touchstart",aa).bind("touchend",ab).bind("touchmove",ax).bind("scroll",af))},teardown:function(i,h){--av[e],av[e]||aF.unbind(f,Q),ah&&(--av.touchstart,av.touchstart||aF.unbind("touchstart",aa).unbind("touchmove",ax).unbind("touchend",ab).unbind("scroll",af));var j=aC(this),g=aC.data(this,ay);g&&(g[e]=!1),j.unbind(f,ap),Z(this)||j.removeData(ay)}}}var ay="virtualMouseBindings",an="virtualTouchID",ar="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),al="clientX clientY pageX pageY screenX screenY".split(" "),aG=aC.event.mouseHooks?aC.event.mouseHooks.props:[],aB=aC.event.props.concat(aG),av={},aE=0,az=0,aq=0,aD=!1,ak=[],au=!1,aA=!1,ah="addEventListener" in at,aF=aC(at),aj=1,ac=0,J;aC.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var z=0;z<ar.length;z++){aC.event.special[ar[z]]=K(ar[z])}ah&&at.addEventListener("click",function(s){var h=ak.length,e=s.target,k,g,q,p,m,j;if(h){k=s.clientX,g=s.clientY,J=aC.vmouse.clickDistanceThreshold,q=e;while(q){for(p=0;p<h;p++){m=ak[p],j=0;if(q===e&&Math.abs(m.x-k)<J&&Math.abs(m.y-g)<J||aC.data(q,an)===m.touchID){s.preventDefault(),s.stopPropagation();return}}q=q.parentNode}}},!0)})(c,a,d),function(h,f){var g={touch:"ontouchend" in d};h.mobile=h.mobile||{},h.mobile.support=h.mobile.support||{},h.extend(h.support,g),h.extend(h.mobile.support,g)
}(c),function(l,p,g){function k(f,s,o){var e=o.type;o.type=s,l.event.handle.call(f,o),o.type=e}l.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,f){l.fn[f]=function(i){return i?this.bind(f,i):this.trigger(f)},l.attrFn&&(l.attrFn[f]=!0)});var j=l.mobile.support.touch,q="touchmove scroll",h=j?"touchstart":"mousedown",n=j?"touchend":"mouseup",m=j?"touchmove":"mousemove";l.event.special.scrollstart={enabled:!0,setup:function(){function u(i,o){s=o,k(f,s?"scrollstart":"scrollstop",i)}var f=this,v=l(f),s,e;v.bind(q,function(i){if(!l.event.special.scrollstart.enabled){return}s||u(i,!0),clearTimeout(e),e=setTimeout(function(){u(i,!1)},50)})}},l.event.special.tap={tapholdThreshold:750,setup:function(){var e=this,f=l(e);f.bind("vmousedown",function(w){function t(){clearTimeout(v)}function r(){t(),f.unbind("vclick",z).unbind("vmouseup",t),l(d).unbind("vmousecancel",r)}function z(i){r(),x===i.target&&k(e,"tap",i)}if(w.which&&w.which!==1){return !1}var x=w.target,y=w.originalEvent,v;f.bind("vmouseup",t).bind("vclick",z),l(d).bind("vmousecancel",r),v=setTimeout(function(){k(e,"taphold",l.Event("taphold",{target:x}))},l.event.special.tap.tapholdThreshold)})}},l.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1000,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,setup:function(){var e=this,f=l(e);f.bind(h,function(u){function w(i){if(!v){return}var o=i.originalEvent.touches?i.originalEvent.touches[0]:i;x={time:(new Date).getTime(),coords:[o.pageX,o.pageY]},Math.abs(v.coords[0]-x.coords[0])>l.event.special.swipe.scrollSupressionThreshold&&i.preventDefault()}var r=u.originalEvent.touches?u.originalEvent.touches[0]:u,v={time:(new Date).getTime(),coords:[r.pageX,r.pageY],origin:l(u.target)},x;f.bind(m,w).one(n,function(i){f.unbind(m,w),v&&x&&x.time-v.time<l.event.special.swipe.durationThreshold&&Math.abs(v.coords[0]-x.coords[0])>l.event.special.swipe.horizontalDistanceThreshold&&Math.abs(v.coords[1]-x.coords[1])<l.event.special.swipe.verticalDistanceThreshold&&v.origin.trigger("swipe").trigger(v.coords[0]>x.coords[0]?"swipeleft":"swiperight"),v=x=g})})}},l.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(e,f){l.event.special[e]={setup:function(){l(this).bind(f,l.noop)}}})}(c,this)});!function(c){var b='[data-dismiss="alert"]',a=function(d){c(d).on("click",b,this.close)};a.prototype.close=function(i){var h=c(this),f=h.attr("data-target"),g;if(!f){f=h.attr("href");f=f&&f.replace(/.*(?=#[^\s]*$)/,"")}g=c(f);i&&i.preventDefault();g.length||(g=h.hasClass("alert")?h:h.parent());g.trigger(i=c.Event("close"));if(i.isDefaultPrevented()){return}g.removeClass("in");function d(){g.trigger("closed").remove()}c.support.transition&&g.hasClass("fade")?g.on(c.support.transition.end,d):d()};c.fn.alert=function(d){return this.each(function(){var f=c(this),e=f.data("alert");if(!e){f.data("alert",(e=new a(this)))}if(typeof d=="string"){e[d].call(f)}})};c.fn.alert.Constructor=a;c(function(){c("body").on("click.alert.data-api",b,a.prototype.close)})}(window.jQuery);!function(b){var c=function(e,d){this.$element=b(e);this.options=b.extend({},b.fn.collapse.defaults,d);if(this.options.parent){this.$parent=b(this.options.parent)}this.options.toggle&&this.toggle()};c.prototype={constructor:c,dimension:function(){var d=this.$element.hasClass("width");return d?"width":"height"},show:function(){var g,d,f,e;if(this.transitioning||this.$element.hasClass("in")){return}g=this.dimension();d=b.camelCase(["scroll",g].join("-"));f=this.$parent&&this.$parent.find("> .accordion-group > .in");if(f&&f.length){e=f.data("collapse");if(e&&e.transitioning){return}f.collapse("hide");e||f.data("collapse",null)}this.$element[g](0);this.transition("addClass",b.Event("show"),"shown");b.support.transition&&this.$element[g](this.$element[0][d])},hide:function(){var d;if(this.transitioning||!this.$element.hasClass("in")){return}d=this.dimension();this.reset(this.$element[d]());this.transition("removeClass",b.Event("hide"),"hidden");this.$element[d](0)},reset:function(d){var e=this.dimension();this.$element.removeClass("collapse")[e](d||"auto")[0].offsetWidth;this.$element[d!==null?"addClass":"removeClass"]("collapse");return this},transition:function(h,e,f){var g=this,d=function(){if(e.type=="show"){g.reset()}g.transitioning=0;g.$element.trigger(f)};this.$element.trigger(e);if(e.isDefaultPrevented()){return}this.transitioning=1;this.$element[h]("in");b.support.transition&&this.$element.hasClass("collapse")?this.$element.one(b.support.transition.end,d):d()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var a=b.fn.collapse;b.fn.collapse=function(d){return this.each(function(){var g=b(this),f=g.data("collapse"),e=b.extend({},b.fn.collapse.defaults,g.data(),typeof d=="object"&&d);if(!f){g.data("collapse",(f=new c(this,e)))}if(typeof d=="string"){f[d]()}})};b.fn.collapse.defaults={toggle:true};b.fn.collapse.Constructor=c;b.fn.collapse.noConflict=function(){b.fn.collapse=a;return this};b(document).on("click.collapse.data-api","[data-toggle=collapse]",function(i){var h=b(this),d,g=h.attr("data-target")||i.preventDefault()||(d=h.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=b(g).data("collapse")?"toggle":h.data();h[b(g).hasClass("in")?"addClass":"removeClass"]("collapsed");b(g).collapse(f)})}(window.jQuery);!function(c){var b=function(e,d){this.options=d;this.$element=c(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",c.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var d=this,f=c.Event("show");this.$element.trigger(f);if(this.isShown||f.isDefaultPrevented()){return}this.isShown=true;this.escape();this.backdrop(function(){var e=c.support.transition&&d.$element.hasClass("fade");if(!d.$element.parent().length){d.$element.appendTo(document.body)}d.$element.show();if(e){d.$element[0].offsetWidth}d.$element.addClass("in").attr("aria-hidden",false);d.enforceFocus();e?d.$element.one(c.support.transition.end,function(){d.$element.focus().trigger("shown")}):d.$element.focus().trigger("shown")})},hide:function(f){f&&f.preventDefault();var d=this;f=c.Event("hide");this.$element.trigger(f);if(!this.isShown||f.isDefaultPrevented()){return}this.isShown=false;this.escape();c(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",true);c.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var d=this;c(document).on("focusin.modal",function(f){if(d.$element[0]!==f.target&&!d.$element.has(f.target).length){d.$element.focus()}})},escape:function(){var d=this;if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.modal",function(f){f.which==27&&d.hide()})}else{if(!this.isShown){this.$element.off("keyup.dismiss.modal")}}},hideWithTransition:function(){var d=this,e=setTimeout(function(){d.$element.off(c.support.transition.end);d.hideModal()},500);this.$element.one(c.support.transition.end,function(){clearTimeout(e);d.hideModal()})},hideModal:function(){var d=this;this.$element.hide();this.backdrop(function(){d.removeBackdrop();d.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(g){var f=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=c.support.transition&&e;this.$backdrop=c('<div class="modal-backdrop '+e+'" />').appendTo(document.body);this.$backdrop.click(this.options.backdrop=="static"?c.proxy(this.$element[0].focus,this.$element[0]):c.proxy(this.hide,this));if(d){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");if(!g){return}d?this.$backdrop.one(c.support.transition.end,g):g()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");c.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(c.support.transition.end,g):g()}else{if(g){g()}}}}};var a=c.fn.modal;c.fn.modal=function(d){return this.each(function(){var g=c(this),f=g.data("modal"),e=c.extend({},c.fn.modal.defaults,g.data(),typeof d=="object"&&d);if(!f){g.data("modal",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}else{if(e.show){f.show()}}})};c.fn.modal.defaults={backdrop:true,keyboard:true,show:true};c.fn.modal.Constructor=b;c.fn.modal.noConflict=function(){c.fn.modal=a;return this};c(document).on("click.modal.data-api",'[data-toggle="modal"]',function(i){var h=c(this),f=h.attr("href"),d=c(h.attr("data-target")||(f&&f.replace(/.*(?=#[^\s]+$)/,""))),g=d.data("modal")?"toggle":c.extend({remote:!/#/.test(f)&&f},d.data(),h.data());i.preventDefault();d.modal(g).one("hide",function(){h.focus()})})}(window.jQuery);!function(c){var b=function(e,d){this.init("tooltip",e,d)};b.prototype={constructor:b,init:function(k,h,f){var l,d,j,e,g;this.type=k;this.$element=c(h);this.options=this.getOptions(f);this.enabled=true;j=this.options.trigger.split(" ");for(g=j.length;g--;){e=j[g];if(e=="click"){this.$element.on("click."+this.type,this.options.selector,c.proxy(this.toggle,this))}else{if(e!="manual"){l=e=="hover"?"mouseenter":"focus";d=e=="hover"?"mouseleave":"blur";this.$element.on(l+"."+this.type,this.options.selector,c.proxy(this.enter,this));this.$element.on(d+"."+this.type,this.options.selector,c.proxy(this.leave,this))}}}this.options.selector?(this._options=c.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()},getOptions:function(d){d=c.extend({},c.fn[this.type].defaults,this.$element.data(),d);if(d.delay&&typeof d.delay=="number"){d.delay={show:d.delay,hide:d.delay}}return d},enter:function(h){var g=c.fn[this.type].defaults,f={},d;this._options&&c.each(this._options,function(e,i){if(g[e]!=i){f[e]=i}},this);d=c(h.currentTarget)[this.type](f).data(this.type);if(!d.options.delay||!d.options.delay.show){return d.show()}clearTimeout(this.timeout);d.hoverState="in";this.timeout=setTimeout(function(){if(d.hoverState=="in"){d.show()}},d.options.delay.show)},leave:function(f){var d=c(f.currentTarget)[this.type](this._options).data(this.type);if(this.timeout){clearTimeout(this.timeout)}if(!d.options.delay||!d.options.delay.hide){return d.hide()}d.hoverState="out";this.timeout=setTimeout(function(){if(d.hoverState=="out"){d.hide()}},d.options.delay.hide)},show:function(){var i,k,g,j,d,h,f=c.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(f);if(f.isDefaultPrevented()){return}i=this.tip();this.setContent();if(this.options.animation){i.addClass("fade")}d=typeof this.options.placement=="function"?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement;i.detach().css({top:0,left:0,display:"block"});this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);k=this.getPosition();g=i[0].offsetWidth;j=i[0].offsetHeight;switch(d){case"bottom":h={top:k.top+k.height,left:k.left+k.width/2-g/2};break;case"top":h={top:k.top-j,left:k.left+k.width/2-g/2};break;case"left":h={top:k.top+k.height/2-j/2,left:k.left-g};break;case"right":h={top:k.top+k.height/2-j/2,left:k.left+k.width};break}this.applyPlacement(h,d);this.$element.trigger("shown")}},applyPlacement:function(g,h){var i=this.tip(),e=i[0].offsetWidth,l=i[0].offsetHeight,d,j,k,f;i.offset(g).addClass(h).addClass("in");d=i[0].offsetWidth;j=i[0].offsetHeight;if(h=="top"&&j!=l){g.top=g.top+l-j;f=true}if(h=="bottom"||h=="top"){k=0;if(g.left<0){k=g.left*-2;g.left=0;i.offset(g);d=i[0].offsetWidth;j=i[0].offsetHeight}this.replaceArrow(k-e+d,d,"left")}else{this.replaceArrow(j-l,j,"top")}if(f){i.offset(g)}},replaceArrow:function(f,e,d){this.arrow().css(d,f?(50*(1-f/e)+"%"):"")},setContent:function(){var e=this.tip(),d=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](d);e.removeClass("fade in top bottom left right")},hide:function(){var d=this,g=this.tip(),f=c.Event("hide");this.$element.trigger(f);if(f.isDefaultPrevented()){return}g.removeClass("in");function h(){var e=setTimeout(function(){g.off(c.support.transition.end).detach()},500);g.one(c.support.transition.end,function(){clearTimeout(e);g.detach()})}c.support.transition&&this.$tip.hasClass("fade")?h():g.detach();this.$element.trigger("hidden");return this},fixTitle:function(){var d=this.$element;if(d.attr("title")||typeof(d.attr("data-original-title"))!="string"){d.attr("data-original-title",d.attr("title")||"").attr("title","")}},hasContent:function(){return this.getTitle()},getPosition:function(){var d=this.$element[0];return c.extend({},(typeof d.getBoundingClientRect=="function")?d.getBoundingClientRect():{width:d.offsetWidth,height:d.offsetHeight},this.$element.offset())},getTitle:function(){var f,d=this.$element,e=this.options;f=d.attr("data-original-title")||(typeof e.title=="function"?e.title.call(d[0]):e.title);
return f},tip:function(){return this.$tip=this.$tip||c(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(f){var d=f?c(f.currentTarget)[this.type](this._options).data(this.type):this;d.tip().hasClass("in")?d.hide():d.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var a=c.fn.tooltip;c.fn.tooltip=function(d){return this.each(function(){var g=c(this),f=g.data("tooltip"),e=typeof d=="object"&&d;if(!f){g.data("tooltip",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}})};c.fn.tooltip.Constructor=b;c.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false};c.fn.tooltip.noConflict=function(){c.fn.tooltip=a;return this}}(window.jQuery);!function(c){var b=function(e,d){this.init("popover",e,d)};b.prototype=c.extend({},c.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var f=this.tip(),e=this.getTitle(),d=this.getContent();f.find(".popover-title")[this.options.html?"html":"text"](e);f.find(".popover-content")[this.options.html?"html":"text"](d);f.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,d=this.$element,f=this.options;e=(typeof f.content=="function"?f.content.call(d[0]):f.content)||d.attr("data-content");return e},tip:function(){if(!this.$tip){this.$tip=c(this.options.template)}return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var a=c.fn.popover;c.fn.popover=function(d){return this.each(function(){var g=c(this),f=g.data("popover"),e=typeof d=="object"&&d;if(!f){g.data("popover",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}})};c.fn.popover.Constructor=b;c.fn.popover.defaults=c.extend({},c.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});c.fn.popover.noConflict=function(){c.fn.popover=a;return this}}(window.jQuery);!function(c){var b=function(d){this.element=c(d)};b.prototype={constructor:b,show:function(){var j=this.element,g=j.closest("ul:not(.dropdown-menu)"),f=j.attr("data-target"),h,d,i;if(!f){f=j.attr("href");f=f&&f.replace(/.*(?=#[^\s]*$)/,"")}if(j.parent("li").hasClass("active")){return}h=g.find(".active:last a")[0];i=c.Event("show",{relatedTarget:h});j.trigger(i);if(i.isDefaultPrevented()){return}d=c(f);this.activate(j.parent("li"),g);this.activate(d,d.parent(),function(){j.trigger({type:"shown",relatedTarget:h})})},activate:function(f,e,i){var d=e.find("> .active"),h=i&&c.support.transition&&d.hasClass("fade");function g(){d.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");f.addClass("active");if(h){f[0].offsetWidth;f.addClass("in")}else{f.removeClass("fade")}if(f.parent(".dropdown-menu")){f.closest("li.dropdown").addClass("active")}i&&i()}h?d.one(c.support.transition.end,g):g();d.removeClass("in")}};var a=c.fn.tab;c.fn.tab=function(d){return this.each(function(){var f=c(this),e=f.data("tab");if(!e){f.data("tab",(e=new b(this)))}if(typeof d=="string"){e[d]()}})};c.fn.tab.Constructor=b;c.fn.tab.noConflict=function(){c.fn.tab=a;return this};c(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(d){d.preventDefault();c(this).tab("show")})}(window.jQuery);!function(f){var b="[data-toggle=dropdown]",a=function(h){var g=f(h).on("click.dropdown.data-api",this.toggle);f("html").on("click.dropdown.data-api",function(){g.parent().removeClass("open")})};a.prototype={constructor:a,toggle:function(j){var i=f(this),h,g;if(i.is(".disabled, :disabled")){return}h=e(i);g=h.hasClass("open");d();if(!g){if("ontouchstart" in document.documentElement){f('<div class="dropdown-backdrop"/>').insertBefore(f(this)).on("click",d)}h.toggleClass("open")}i.focus();return false},keydown:function(l){var k,m,g,j,i,h;if(!/(38|40|27)/.test(l.keyCode)){return}k=f(this);l.preventDefault();l.stopPropagation();if(k.is(".disabled, :disabled")){return}j=e(k);i=j.hasClass("open");if(!i||(i&&l.keyCode==27)){if(l.which==27){j.find(b).focus()}return k.click()}m=f("[role=menu] li:not(.divider):visible a",j);if(!m.length){return}h=m.index(m.filter(":focus"));if(l.keyCode==38&&h>0){h--}if(l.keyCode==40&&h<m.length-1){h++}if(!~h){h=0}m.eq(h).focus()}};function d(){f(".dropdown-backdrop").remove();f(b).each(function(){e(f(this)).removeClass("open")})}function e(i){var g=i.attr("data-target"),h;if(!g){g=i.attr("href");g=g&&/#/.test(g)&&g.replace(/.*(?=#[^\s]*$)/,"")}h=g&&f(g);if(!h||!h.length){h=i.parent()}return h}var c=f.fn.dropdown;f.fn.dropdown=function(g){return this.each(function(){var i=f(this),h=i.data("dropdown");if(!h){i.data("dropdown",(h=new a(this)))}if(typeof g=="string"){h[g].call(i)}})};f.fn.dropdown.Constructor=a;f.fn.dropdown.noConflict=function(){f.fn.dropdown=c;return this};f(document).on("click.dropdown.data-api",d).on("click.dropdown.data-api",".dropdown form",function(g){g.stopPropagation()}).on("click.dropdown.data-api",b,a.prototype.toggle).on("keydown.dropdown.data-api",b+", [role=menu]",a.prototype.keydown)}(window.jQuery);!function(a){a(function(){a.support.transition=(function(){var b=(function(){var e=document.createElement("bootstrap"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in d){if(e.style[c]!==undefined){return d[c]}}}());return b&&{end:b}})()})}(window.jQuery);(function(a,d){var c;a.namespace("location");function b(f){f=f.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e="[\\?&]"+f+"=([^&#]*)";var h=new RegExp(e);var g=h.exec(window.location.search);if(g==null){return""}else{return decodeURIComponent(g[1].replace(/\+/g," "))}}c={get:b};a.location.qs=c}(BI));(function(b,e){var c;var d={rootAssets:"/assets/CMS/assets/"};b.namespace("location");function f(g,h){d[g]=h}function a(g){return d[g]}c={set:f,get:a};b.location.cmsPath=c}(BI));(function(d,b,e){b.namespace("frontendAnalytics");var c;function a(f){if(!c&&typeof window.dataLayer!=="undefined"){c=window.dataLayer}if(c&&typeof f.google==="object"&&typeof f.google.path==="string"){c.push({event:"sendVirtualPageview",vpv:f.google.path})}if(typeof f.internal==="object"){var g={};if(typeof f.internal.vertical==="string"){g.vertical=f.internal.vertical}if(typeof f.internal.postId==="string"){g.post_id=f.internal.postId}if(typeof f.internal.author==="string"){g.author=f.internal.author}if(typeof f.internal.location==="string"){g.location=f.internal.location}d.get("/track.gif",g)}}b.frontendAnalytics={fire:a}}($,BI));(function(c,f){c.namespace("textHelper");function a(h){var g=[];h.forEach(function(i){if(i&&c.configs.commonWords.indexOf(i.toLowerCase())===-1&&isNaN(Number(i))){g.push(i.toLowerCase())}});return g}function b(g){if(!g){return""}g=g.toLowerCase();g=g.replace(/ & /g," and ");g=g.replace(/^\s+|\s+$/g,"");g=g.replace(/[ ]+/g,"-");g=g.replace(/[-]+/g,"-");g=g.replace(/[^a-z0-9-]+/g,"");return g}function d(h,j,g){g=g?g:".";j=j?j:",";var i=h.toString().split(g);i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,j);return i.join(g)}function e(g){if(g>10000){return"very-hot"}else{if(g>1000){return"hot"}else{if(g>400){return"warm"}else{return"cool"}}}}c.textHelper={filterCommonWords:a,stringToUrl:b,commatize:d,color:e}}(BI));(function(d,i,b){i.namespace("imageHelper");function e(n){var m=n.image,l=n.maxX,k=n.maxY;var j="/image/"+m.id;if(l){j+="-"+l}if(k){j+="-"+k}return j+"/"+m.filename}function g(m){if((!m.width||!m.height)&&m.size){m.width=m.size.split("x")[0];m.height=m.size.split("x")[1]}var j=m.width/m.height;var l;if(j.toString().indexOf(".")!=-1){var k=j.toString().split(".");l=Number(k[0]+"."+k[1][0])}else{l=j}return l}function h(k,j){if(g({width:k,height:1})===g({width:j,height:1})){return true}return false}var f={};function c(l){var j={url:i.imageHelper.IMAGE_INFO_URI,success:function(){},data:{}};d.extend(true,j,l);var k=l.success;if(typeof f[l.data.id]!=="undefined"){k(f[l.data.id]);return}j.success=function(m){if(!m.error){f[l.data.id]=m}k(m)};d.ajax(j)}function a(k){if(!k||!k.url){return false}var j=new XMLHttpRequest();j.open("GET",k.url,true);j.responseType="arraybuffer";j.addEventListener("load",function(){var m=new Uint8Array(j.response),n,l,o=m.length,p=0;if(m[0]!==71||m[1]!==73||m[2]!==70||m[3]!==56){k.callback(false);return}for(n=0,l=o-9;n<l,p<2;++n){if(m[n]===0&&m[n+1]===33&&m[n+2]===249&&m[n+3]===4&&m[n+8]===0&&(m[n+9]===44||m[n+9]===33)){p++}}if(k.callback){k.callback(p>1)}});j.send()}i.imageHelper={getImageUri:e,getImageInfo:c,approximateAspectRatio:g,areApproximatelyEqual:h,isAnimatedGif:a,WIDE:2/1,STANDARD:4/3,SQUARE:1,WIDESCREEN:16/9,IMAGE_INFO_URI:"/cms/image_manager?action=getInfo",IMAGE_SEARCH_URI:"/cms/image_manager?action=search",IMAGE_UPLOAD_URI:"/cms/image_manager?action=create",IMAGE_EDIT_URI:"/cms/image_manager?action=edit"}}($,BI));(function(f,i,c,d){var g;i.namespace("analytics");function k(){f(document).on("click",'a:not([href*="'+document.domain+'"])',function(m){var l=f(this).attr("data-bi-base");if(l===d){l=this.href}f.ajax({type:"GET",data:{click:l},url:"/track.gif",async:false})});return null}function j(m,n,o,l){if(typeof dataLayer!=="undefined"){dataLayer.push(["_trackEvent",m,n,o,l])}}function b(){var o="",m,p,r={rand:Math.random()};if(document.location){r.location=document.location}if(document.referrer){r.referer=document.referrer}if(m=i.location.qs.get("utm_medium")){r.utm_medium=m}if((typeof vertical!="undefined")&&vertical){r.vertical=vertical}if(p=i.location.qs.get("q")){r.q=p}if(window.post&&post){r.post_id=post.id||"";r.post_author=(post.author instanceof Array)?post.author.join("|"):post.author||"";r.post_author_ids=post.author_ids||"";r.post_type=post.post_type||""}if(typeof _bi_domain!="undefined"){o=document.location.protocol+"//"+_bi_domain}o+="/track.gif?";for(var l in r){o+="&"+l+"="+encodeURIComponent(r[l])}var n=new Image(1,1);n.src=o}function h(l){l.each(function(n,m){var o=f(m);var p=o.attr("data-bi-heatmap");o.on("mousedown","a",function(){f.post("/ws/heatmap",{homepage:p,uri:f(this).attr("href")})})})}function a(l,m){if(typeof PARSELY==="undefined"){return false}PARSELY.beacon.trackPageView({url:l,js:1,action_name:m});return true}f(function(){h(f("[data-bi-heatmap]"));f(document).on("click",'[data-track="ga-page"]',function(m){var l=f(this);var o=l.data("track-category");var p=l.data("track-action");var n=l.data("track-label");j(o,p,n)});k();b()});function e(){c.subscribe("editorial-sidebar-loaded",function(l){h(f("#"+l))})}e();g={trackOutbound:k,trackHeat:h,fire:b,gaPageTrack:j,parselyPageTrack:a};i.analytics=g}(jQuery,BI,amplify));(function(f,a,h){a.namespace("template");var b,c,g={};function e(i){f.ajax({url:i,dataType:"text",success:function(m){var j=g[i];var l=m;for(var k=0;k<j.length;k++){j[k].callback(f.tmpl(l,j[k].data))}g[i]=m}})}function d(i){if(i.frontend){return"/assets/"+i.tpl+".tpl"}else{return"/assets/js/lib/"+i.tpl+".tpl"}}a.template=function(j){j.data=j.data||{};var i=d(j);if(typeof g[i]==="string"){j.callback(f.tmpl(g[i],j.data));return}if(!g[i]){g[i]=[];g[i].push(j);e(i);return}g[i].push(j)}}(jQuery,BI));(function(f,h){var b;var a={};function d(k,l){var i=document.createElement("script");var j=false;i.type="text/javascript";i.async=true;i.src=k;if(l){i.id=l;if(f("#"+l).length>0||a[l]){return}a[l]=i}b.append(i)}function e(i,k,j){if(k){if(f("#"+k).length>0||a[k]){return}a[k]=true}f.getScript(i,function(){if(j){j()}})}function c(){f("[data-bi-ajax-route]").each(function(){var j=f(this);var i=j.data("bi-ajax-route");f.ajax({dataType:"html",url:i}).done(function(k){j.html(k);amplify.publish("bi-ajax-route-loaded",i)})})}function g(){b=f("head");c()}f(g);exposed={load:d,load2:e};BI.loader=exposed}(jQuery));(function(e,a,b){var g;var f=navigator.userAgent.match(/iPad/i)!=null;BI.namespace("video");var c=false;var i={};function j(k){var n=k.data("bi-video-id");if(i[n]){return}var m=BI.UUID.get();k.attr("id",m);if(!f){OO.Player.create(m,n)}else{k.css("height","auto");var l=e('<div class="corner-flag"><a href="'+k.attr("data-bi-video-url")+'"><img id="ooyala-ipad-thumb" src="'+k.attr("data-bi-video-thumbnail")+'" style="width:100%;"><div class="corner video"><i class="sprites"></i></div></a></div>');l.appendTo(k)}i[n]=true}function h(k){k.each(function(m,n){var l=e(n);j(l)})}function d(l){var k=e('[data-bi-video="ooyala"]',l);if(k.length<1){return}if(c){h(k)}else{BI.loader.load2("//player.ooyala.com/v3/6e12e8b3387a44daacfb73afba25a76e","ooyalaScript",function(){OO.ready(function(){a.publish("ooyala-ready")})});a.subscribe("ooyala-ready",function(){h(k)})}}a.subscribe("ooyala-ready",function(){c=true});e(function(){d(e(document.body))});a.subscribe("container-loaded",function(k){d(k)});a.subscribe("river:chunk:loaded",function(k){d(k.$container)});g={find:d};BI.video=g}(jQuery,amplify));(function(b,f){var e;b.namespace("dates");function a(i){var h;var g;if(i<60000){h=Math.floor(i/1000);g=d(h,"second")}else{if(i<3600000){h=Math.floor(i/60000);g=d(h,"minute")}else{if(i<86400000){h=Math.floor(i/3600000);g=d(h,"hour")}else{if(i<604800000){h=Math.floor(i/86400000);g=d(h,"day")}else{return"a while"}}}}return h+" "+g}function d(i,h,g){g=g?g:h+"s";return i==1?h:g}function c(j){var g=["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."];var i=new Date(j);var k=i.getMinutes()>=10?i.getMinutes():"0"+i.getMinutes();var h=i.getHours()>12?((i.getHours()-12)+":"+k):(i.getHours()+":"+k);h+=(i.getHours()>=12)?" PM":" AM";var l=g[i.getMonth()]+" "+i.getDate()+", "+h;return l}e={elapsedTime:a,formatDate:c};b.dates=e}(BI));(function(d,c,e){var b=function(g,f){this.$el=d(g);this.correctTotal=0;this.numberAnswered=0;this.options=d.extend(true,{data:{},layout:"flat"},f);this.init()};b.prototype.init=function(){var f=this;f.$el.hide();c.template({tpl:"CMS/assets/templates/quiz/chrome",frontend:true,data:f.options.data,callback:function(g){f.$el.html(g);f.$el.addClass("quiz-layout-"+f.options.layout);f.getEls();f.createSlides()}})};b.prototype.getEls=function(){this.$quizEl=this.$el.find(".quiz-content .question-slide-container");this.$nextButton=this.$el.find('.controls a[href="next"]');this.$finalSlide=this.$el.find(".slide.final");this.$totalQuestions=this.$finalSlide.find(".count");this.$totalCorrect=this.$finalSlide.find(".correct-count");this.$correctPercentage=this.$finalSlide.find(".correct-percentage")};b.prototype.createSlides=function(){var f=this;f.options.data.questions.forEach(function(h,g){h.index=g;f.createSlide(h,function(){if(g+1===f.options.data.questions.length){f.$allSlides=f.$el.find(".slide");f.bind();f.launch()}})})};b.prototype.createSlide=function(h,f){var g=this;c.template({tpl:"CMS/assets/templates/quiz/slide",frontend:true,data:h,callback:function(i){g.$quizEl.append(i);f()}})};b.prototype.bind=function(){var f=this;if(f.options.layout==="widget"){f.$nextButton.on("click",function(){f.advanceSlide();return false})}f.$el.on("click","li",function(){var g=d(this).parents(".question-slide");if(g.hasClass("answered")){return}f.answerQuestion(g,d(this));return false})};b.prototype.launch=function(){this.$el.show();if(this.options.layout==="widget"){this.activeSlide=-1;this.slideAnswered=true;this.advanceSlide()}else{if(this.options.layout==="flat"){this.showSlides();this.$finalSlide.hide()}}this.$totalQuestions.html(this.options.data.questions.length)};b.prototype.advanceSlide=function(){this.hideSlides();this.hideButtons();this.activeSlide++;var f=this.$allSlides.filter('[data-slide="'+this.activeSlide+'"]');f.show();if(this.activeSlide<this.options.data.questions.length+1){this.$nextButton.show()}};b.prototype.answerQuestion=function(i,k){k.addClass("chosen");i.addClass("answered");var j=k.data("answer");var h=i.data("slide")-1;var f=this.options.data.questions[h];var g=f.answers[j];f.answered=true;g.selected=true;if(g.correct){f.correct=true}else{f.correct=false}this.numberAnswered++;this.renderTotal()};b.prototype.renderTotal=function(){this.$totalCorrect.html(this.totalCorrect());this.$correctPercentage.html(this.correctPercentage());if(this.options.layout==="flat"&&this.numberAnswered===this.options.data.questions.length){this.$finalSlide.show()}};b.prototype.correctPercentage=function(){var h=this.totalCorrect();var f=this.options.data.questions.length;var g=Math.round((h/f)*100);return g};b.prototype.totalCorrect=function(){var f=0;this.options.data.questions.forEach(function(g,h){if(g.answered&&g.correct){f++}});return f};b.prototype.hideSlides=function(){this.$allSlides.hide()};b.prototype.showSlides=function(){this.$allSlides.show()};b.prototype.hideButtons=function(){this.$nextButton.hide()};b.prototype.destroy=function(){this.$el.html("");this.$el.removeData("biQuiz")};var a=["destroy","hideButtons","hideSlides","showSlides","totalCorrect","renderTotal","advanceSlide"];d.fn.biQuiz=function(g,f){return this.each(function(){var j=d(this),i=j.data("biQuiz"),h=typeof g==="object"&&g;if(!i){j.data("biQuiz",(i=new b(this,h)))}else{if(typeof g==="string"){if(a.indexOf(g)!==-1){i[g](f)}}}})}}(jQuery,BI));(function(e,g){var f={modalContentTmpl:"",dialog:{autoOpen:false,title:"Send Email",modal:true,width:400},ajax:{type:"POST",dataType:"json"},submitCallback:null};var d=function(l,j){var k;this.$el=e(l);this.options=e.extend(true,e.extend(true,{},f),j);var i=this;a(i)};function a(i){i.$el.bind("click",function(l){var j=i.options.modalContentTmpl;var k=e(j).modal();h(k,i);k.find(".modal-header h3").html(i.options.dialog.title);if(i.options.dialog.open){i.options.dialog.open(k)}l.preventDefault()})}function h(j,i){j.find('input[type="submit"]').click(function(l){var k=j.find("form");c(k,i);l.preventDefault()})}function c(j,i){if(i.options.ajax){b(j,i)}else{if(i.options.submitCallback){i.options.submitCallback(j)}}}function b(k,j){var i=e(k);var m=i.serialize();var l=i.attr("action");if(!l){return false}e.ajax(e.extend(true,j.options.ajax,{url:j.options.ajax.url||l,data:m,success:function(n){j.options.submitCallback(k,n)}}))}e.fn.emailModal=function(i){return this.each(function(){var l=e(this),k=l.data("emailModal"),j=typeof i=="object"&&i;if(!k){l.data("emailModal",(k=new d(this,j)))}else{if(typeof i=="string"){k[i]()}}})}}(jQuery));$(function(h){var b=90,a=0,i=BI.staticURI,g;curSlide=null;var d=function(n,l){var k=this;k.$el=h(n);k.$elInner=k.$el.find(".slideshow-inner-content");k.options=l||{};k.slides={};k.$controls=h(l.controlEl);k.currentView="slideshow";k.adsSeen=[];k.imagesLoaded=[];$byline=h(".slideshow .byline");k.currentHash=null;k.direction=null;k.$el.find("a[start-href]").attr("href",k.$el.find("a[start-href]").attr("start-href"));k.introContent=k.$el.find(".intro-content");for(var m=0;m<l.slides.length;m++){var j=l.slides[m];j.index=m;j.content=j.content||"";if(j.image){j.image.title=j.title||"";j.image.layout=j.image.layout||j.layout;if(!j.isAnimatedImage){j.image=k.formatImageSrc(j.image)}else{j.image=k.rawImageSrc(j.image)}}if(j.title&&j.title.length>b){j.gridTitle=j.title.substring(0,b)+"..."}else{if(j.title){j.gridTitle=j.title}else{j.title="";j.gridTitle=""}}k.slides[j.name]=j}k.init()};d.prototype.init=function(){var j=this;h(window).hashchange(function(){j.hashChange()});BI.template({tpl:"CMS/assets/templates/slideshow/controls",frontend:true,data:{onepageURL:j.options.onepageURL||window.location},callback:function(k){j.$controls.html(k);if(!j.options.hideRight){j.$controls.addClass("railShown")}j.$controls.find('a[rel="last"]').attr("href","#"+j.options.slides[j.options.slides.length-1].name);j.bindDOM();h(window).hashchange();j.preloadImagesRange(2)}})};d.prototype.nav=function(l){this.direction=l;if(l==="left"){var k=this.$el.find("a.btn[rel='prev']").attr("href");var m=this.slides[window.location.hash.substring(1)].index;if(m===0){console.log("ok");document.getElementsByClassName("intro-content")[0].style.display="block"}if(!k){return false}window.location.hash=k}else{if(l==="right"){var j=this.$el.find("a.btn[rel='next']").attr("href");var n=this.$el.find(".slide-intro-bottom a.sl-start").attr("href");if(!j&&n){j=n}if(j=="/category/features"){window.location.href="/category/features";return false}window.location.hash=j}}return false};d.prototype.bindDOM=function(){var k=this;k.$controls.on("click","a[rel='slideshow-view']",function(){k.hashChange(true);return false});k.$el.on("click",".slide-intro-bottom a",function(){h("html, body").animate({scrollTop:BI.masthead.height},300)});k.$el.on("click","a.btn[rel='prev']",function(){k.nav("left");BI.analytics.parselyPageTrack(BI.post.url,"PrevSlide");return false});var j;if(k.options.bridgeAdTemplate){j=function(){var m=k.slides[window.location.hash.substring(1)].index;switch(m){case 4:case 9:if(k.adsSeen.indexOf(m)===-1){k.adsSeen.push(m);k.$elInner.find(".row-fluid ~ *").remove();k.$elInner.find("span.slide-title").html('<h5 class="text-ad">Advertisement</h5>');k.$elInner.append(k.options.bridgeAdTemplate.replace('data-region="Bridge"','data-region="Bridge '+(m===4?"1":"2")+'"'))}else{k.nav("right")}break;default:k.nav("right");break}BI.analytics.parselyPageTrack(BI.post.url,"NextSlide");return false}}else{j=function(){k.nav("right");BI.analytics.parselyPageTrack(BI.post.url,"NextSlide");return false}}k.$el.on("click","a.btn[rel='next'], a.next[rel='next']",j);var l=true;h("input, textarea").focus(function(){l=false});h("input, textarea").blur(function(){l=true});h(document).keydown(function(m){if(l){switch(m.which){case 37:return k.nav("left");case 39:return j()}}})};var e;function f(){if(typeof instgrm==="undefined"&&!e){e=window.setInterval(f,50);return}if(typeof instgrm!=="undefined"){e=window.clearInterval(e);instgrm.Embeds.process()}}d.prototype.hashChange=function(m){var k=this;var n=window.location.hash.substring(1);if(m!==true&&n===k.currentHash){return}else{k.currentHash=n;this.preloadImagesRange(2)}if(n&&n in k.slides){c();k.introContent.hide();var j=k.slides[n];j.hash=n;BI.template({tpl:"CMS/assets/templates/slideshow/slide",frontend:true,data:j,callback:function(o){k.$elInner.html(o);if(h(o).find(".instagram-media").length){f()}k.updateControls(k.slides[n]["index"]);k.$controls.removeClass("first-page");$byline.removeClass("first-page");h("[data-fade-replace]").each(function(){h("#"+h(this).data("fade-replace")).hide();
h(this).fadeIn()});h(".share-container").addClass("slide-page")}})}else{k.updateControls(-1);k.$elInner.html("");k.introContent.show();k.$controls.addClass("first-page");$byline.addClass("first-page");h(".share-container").removeClass("slide-page");h("[data-fade-replace]").each(function(){h("#"+h(this).data("fade-replace")).fadeIn();h(this).hide()})}k.$controls.removeClass("grid-view");amplify.publish("slideshow-content-rendered");if(k.leaderboardFrame){h.fn.eventCounter("increment","click","leaderboard")}if(k.rightFrame){h.fn.eventCounter("increment","click","right-rail")}if(k.marketWidgetFrame){h.fn.eventCounter("increment","click","marketWidget")}if(k.marketWidgetTwoFrame){h.fn.eventCounter("increment","click","marketWidgetTwo")}if(n){var l={google:{path:location.pathname+"/"+k.slides[n].name},internal:{vertical:window.vertical||"",postId:window.post?window.post.id:"",author:window.post?window.post.author:"",location:location.pathname+"#"+k.slides[n].name}};BI.frontendAnalytics.fire(l)}};d.prototype.updateControls=function(m){var j=this;var l=j.$el.find("a[rel='prev']");var k=j.$el.find("a[rel='next']");if(m<=0){l.attr("href","#")}else{l.attr("href","#"+j.options.slides[m-1]["name"])}if(m<j.options.slides.length-1){k.attr("href","#"+j.options.slides[m+1]["name"])}else{k.attr("href","/category/features")}j.$el.find(".total").html(j.options.slides.length);j.$el.find(".current").html(m+1);if(m+1===j.options.slides.length){j.$controls.find('a.btn[rel="last"]').attr("disabled","disabled")}else{j.$controls.find('a.btn[rel="last"]').removeAttr("disabled")}};d.prototype.formatImageSrc=function(k){if(!k.src){var j;switch(k.layout){case"590":case"915":case"1170":j=1200;break;default:if(this.options.hideRight){j=1200}else{j=400}}k._src=k._src.split("-")[0]+"-"+j;k.src="/image/"+k._src+"/";if(BI.env.inProduction()){k.src=i+k.src}if(k.title){k.src+=BI.textHelper.stringToUrl(k.title)}else{k.src+="slide"}k.src+=".jpg"}return k};d.prototype.rawImageSrc=function(j){j.src="/image/"+j._src.split("-")[0]+"/slide_image.gif";return j};d.prototype.preloadImages=function(){for(var j in this.slides){if(this.slides[j].image){(new Image()).src=this.slides[j].image.src}}};d.prototype.preloadImage=function(j){var k=this.options.slides[j].name;if(this.slides[k].isAnimatedImage){return}if(this.slides[k].image){(new Image()).src=this.slides[k].image.src;this.imagesLoaded.push(j)}};d.prototype.preloadImagesRange=function(j){var l=this;if(!l.currentHash){if(l.imagesLoaded.indexOf(0)===-1){l.preloadImage(0)}return}curSlide=l.slides[l.currentHash].index;if(l.imagesLoaded.indexOf(curSlide)===-1){l.preloadImage(curSlide)}var k=1;for(var n=curSlide+1;n<curSlide+1+j;n++){k++;if(l.imagesLoaded.indexOf(n)===-1&&n<l.options.slides.length){l.preloadImage(n)}var m=curSlide-k+1;if(l.imagesLoaded.indexOf(m)===-1&&m>=0){l.preloadImage(m)}}return};function c(){var l=[],k,j;++a;for(j=g.length-1;j!==-1;--j){k=g[j];if((a%k.getAttribute("data-refresh-frequency"))===0){l.push(BI.DFP.adRegions[k.getAttribute("data-region")])}}if(l.length!==0){googletag.pubads().refresh(l)}}h.fn.slideshow=function(k,j){return this.each(function(){var n=h(this),m=n.data("slideshow"),l=typeof k=="object"&&k;if(!m){n.data("slideshow",(m=new d(this,l)))}else{if(typeof k=="string"){m[k](j)}}})};h(function(){g=document.querySelectorAll(".ad[data-refresh-frequency]");var k=h("[data-bi-slideshow]");var j=h("a[data-bi-slideshow-onepage]");if(k.length>0){var l=BI.post.isDraft?"/post/preview":BI.post.url;h.ajax({url:l,data:{action:"getSlides",post_id:post.id},type:"GET",success:function(n){if(typeof n==="string"){n=JSON.parse(n)}var m={controlEl:".content .slideshow-controls",hideRight:k.data("bi-slideshow-hideright"),layout:k.data("bi-slideshow-layout"),onepageURL:j.attr("href"),slides:n.slides};if(n.bridgeAdTemplate){m.bridgeAdTemplate=n.bridgeAdTemplate}k.slideshow(m)}})}})}(jQuery));(function(k,d,b){var g=14;var e=false;var c=[];function f(){if(typeof SailthruScout==="undefined"){return}SailthruScout.setup=function(m){for(var l in m){SailthruScout.config[l]=m[l]}if(m.renderItem){SailthruScout.renderItem=m.renderItem}if(m.jQuery){SailthruScout.jq=m.jQuery}else{if(window.jQuery){SailthruScout.jq=window.jQuery}else{if(window.$){SailthruScout.jq=window.$}}}SailthruScout.fetchContent(SailthruScout.config.numVisible+5);function n(){var p=SailthruScout.jq(this).index();var q=SailthruScout.visibleContent[p].id;var o=SailthruScout.visibleContent[p].url;SailthruScout.track(q,"mhit",{index:p,url:o});return true}if(typeof(SailthruScout.jq().on)==="function"){SailthruScout.jq(document).on("mousedown",".concierge-post",n)}else{SailthruScout.jq(".concierge-post").live("mousedown",n)}};SailthruScout.setup({domain:k.sailthruHorizonURI,numVisible:g,noPageView:true,trackType:"sidebar",renderItem:function(m,l){k.sailthru.posts.push(m);if(g<=k.sailthru.posts.length){e=true;c.forEach(function(n){i(n.number,n.callback,n.renderer)});c=[];amplify.publish("sailthru:ready")}}})}function j(m,l,n){k.template({tpl:m,frontend:true,data:l,callback:n})}function a(u,q,m,s){var n={author:true,date:true,views:true};m=d.extend(true,n,m);var t=k.textHelper.commatize(u.views);var o=k.textHelper.color(u.views);var l=k.dates.formatDate(u.date*1000);var p="";if(m.author){if(u.author&&u.author.indexOf(",")!==-1){var r=u.author.split(/,/);r.forEach(function(v,w){if(!v){return}else{p+='<a href="/author/'+k.textHelper.stringToUrl(v)+'">'+v+"</a>";if(w!==r.length-1){p+=", "}}})}else{if(u.author){p='<a href="/author/'+k.textHelper.stringToUrl(u.author)+'">'+u.author+"</a>"}}}j("CMS/assets/templates/sailthru/byline",{config:m,viewscls:o,author:p,views:t,datestr:l},s)}function h(o,n,m,q){var p=o.image;if(typeof p.thumb!=="undefined"){p=p.thumb}p=p.split("/");var l={filename:p[p.length-1],id:p[p.length-2].split("-")[0]};p="http://"+p[p.length-4]+"/image/"+l.id+"/"+l.filename+"?maxX=425";a(o,n,null,function(r){r=d("<div>").html(r).html();j("CMS/assets/templates/sailthru/tout",{item:o,byline:r,image:p},q)})}function i(n,r,p){if(!e){c.push({number:n,callback:r,renderer:p});return}var m=0;var q=0;var o=0;var l=[];while(m<n){if(k.sailthru.posts[m]){p(k.sailthru.posts[m],m,{},function(s){l.push(s);o++;if(o===q){setTimeout(function(){r(l)},0)}});q++}m++}}d(f);k.sailthru={posts:[],toutRender:h,bylineRender:a,renderPosts:i}}(BI,jQuery));(function(b){function a(){if(typeof COMSCORE!="undefined"){COMSCORE.beacon({c1:"2",c2:"9900186"})}else{if(typeof console!="undefined"&&console.log){console.log("Failed to trigger comscore, no COMSCORE object on page")}}}b.comscore={trigger:a}}(BI));$(function(){if(window.location.href.indexOf("https")!==-1){$("body").append('<iframe width="0" height="0" style="display: none" src="//rt.legolas-media.com/lgrt?ci=2&ti=16231&pbi=10919&lgif=1"></iframe>')}});(function(e,k,c){var m;var d={};var h=3;var j=0;var a;e(function(){m=e(".linkedin .network-listings ul");if(!m){return}if(e("#linkedin-page").length>0){a=true;h=10}if(typeof IN==="undefined"){return}IN.Event.onOnce(IN,"auth",g);i();if(window.location.hash==="#network-tab"){var n=e(".linkedin");n.find(".tabs-dotted ul li").removeClass("active");n.find(".network-listings").show();n.find(".selected-listings").hide();n.find('.tabs-dotted ul li [rel="network"]').parent("li").addClass("active")}});function g(){IN.API.Raw("people/~/network/updates:(update-content:(person:(id,first-name,last-name,pictureUrl,current-share:(content:(thumbnail-url,submitted-url,title,description)))))?type=SHAR").result(function(q){e.each(q.values,function(s,t){if(typeof(t.updateContent.person.currentShare.content)!=="undefined"){if(t.updateContent.person.currentShare.content.submittedUrl.indexOf("businessinsider")!=-1){b({thumbnail:t.updateContent.person.currentShare.content.thumbnailUrl,url:t.updateContent.person.currentShare.content.submittedUrl,title:t.updateContent.person.currentShare.content.title,name:t.updateContent.person.firstName+" "+t.updateContent.person.lastName,img:t.updateContent.person.pictureUrl})}}});var p=[];var r;for(var o in d){if(d.hasOwnProperty(o)&&j<h){if(!a){l(d[o])}else{r=d[o][0].url.split("/");p.push(r[r.length-1])}j++}}if(p.length>0){var n="trending_on_linkedin?action=network_list&ids="+p.concat();e.ajax({url:n}).done(function(s){if(s.html===""){m.replaceWith("<p>Sorry, we were unable to find any stories shared in your network.</p>")}else{m.replaceWith(s.html)}f()})}if(j===0){e(".linkedin .no-articles").show();f()}})}function b(n){if(!d[n.url]){d[n.url]=[n]}else{d[n.url].push(n)}}function l(o){var n;var p="and";if(o.length>2){p=","}if(o.length===1){o=o[0];n="<li>";if(o.url&&o.thumbnail){n+='<a class="float-left" href="'+o.url+'"><img src="'+o.thumbnail+'" border="0"></a>'}n+='<div class="float-left linkedin-link"><a href="'+o.url+'">';n+='<div class="float-right">';n+="</div>";n+=o.title;n+='</a><br /><span class="share-by"> Shared by '+o.name+"</span>";n+="</div>";n+="</li>"}else{var q="";o.forEach(function(s,r){if(r>1){return}if(q){q+=" "+p+" "}q+="<img class='user-img' src='"+s.img+"'>";q+=s.name});if(o.length>2){q+=" and "+(o.length-2)+" more"}n+="<li>";if(o.url&&o.thumbnail){n='<a class="float-left" href="'+o.url+'"><img src="'+o.thumbnail+'" border="0"></a>'}n+='<div class="listings">';n+='<a href="'+o.url+'">';n+='<div class="float-right">';n+="</div>";n+=o.title;n+='</a><br /><span class="share-by"> Shared by '+q+"</span>";n+="</div>";n+="</li>"}e(function(){m.append(n);f()})}function f(){e(".linkedin .not-logged").remove();e(".linkedin .login").hide()}function i(){e(".linkedin .nav a").click(function(o){if(e(this).attr("rel")==="network"){newLink="/trending_on_linkedin#network-tab"}else{newLink="/trending_on_linkedin"}e(".linkedin .footer p a").attr("href",newLink);e(this).tab("show");o.preventDefault()});e(".linkedin .login, .linkedin .not-logged .linkedin_login_link").click(function(){if(typeof(user_id)!=="undefined"){IN.User.authorize(g);return false}});var n=document.URL.replace(k.env.getDomain(),"");n=n.replace(/^\/perfect_market\/navigation(\?vertical=)?/,"/");n=n.replace(/&?msg=[^&]*/,"");n=n.replace(/\?$/,"");if(!n.match(/^\/login/)){e(".linkedin .not-logged .linkedin_login_link, .linkedin .header .login").attr("href",e(".linkedin .not-logged .linkedin_login_link").attr("href")+"?redirect="+n)}}}(jQuery,BI));(function(e,c,g){c.namespace("OoyalaEmbed");var d;var b=false;function a(i){i.preventDefault();d.setVolume(1);document.getElementById(d.elementId).removeEventListener("click",a);document.getElementById(d.elementId).removeEventListener("mousedown",a)}function f(i){d=i;d.mb.subscribe(OO.EVENTS.PLAYBACK_READY,"page",function(j){if(!b){d.setVolume(0);b=true}});document.getElementById(d.elementId).addEventListener("click",a);document.getElementById(d.elementId).addEventListener("mousedown",a)}var h={autoplay:true,onCreate:f};c.OoyalaEmbed={autoplay_muted:h}}(window,BI));(function(c,e){var a;if(!c.fn.tooltip){return}function b(f){a=c('[data-toggle="tooltip"]',f);if(a.length>0){a.tooltip()}}function d(){b(c(document))}c(d);amplify.subscribe("river:chunk:loaded",function(f){b(f.$container)})}(jQuery));(function(){function a(){if(window.location.search.indexOf("IR=C")!==-1&&!BI.cookies.get("IR")){BI.cookies.set("IR","F",24*7)}}$(a)}(BI));(function(e,h,b){var d;var f;var a;function i(){j();c();d=e(document.getElementsByTagName("su:badge"));f=e('a[href="http://pinterest.com/pin/create/button/"]');a=e('[data-badge="twitter"]');if(d.length>0){h.loader.load(window.location.protocol+"//platform.stumbleupon.com/1/widgets.js")}if(f.length>0){h.loader.load(window.location.protocol+"//assets.pinterest.com/js/pinit.js")}if(a.length>0){h.loader.load(window.location.protocol+"//platform.twitter.com/widgets.js")}}function g(k,s,t,o){var r=window.screenLeft!==b?window.screenLeft:screen.left;var l=window.screenTop!==b?window.screenTop:screen.top;var m=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;var u=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var n=((m/2)-(t/2))+r;var q=((u/3)-(o/3))+l;var p=window.open(k,s,"scrollbars=yes, width="+t+", height="+o+", top="+q+", left="+n);if(window.focus){p.focus()}}function j(){var m=e(".rrssb-top:visible");var p=e(".rrssb-bottom");var n=e("#content");if(n.hasClass("homepage")){p.parent("div.rrssb-baseline").css("display","block");amplify.subscribe("river:chunk:loaded",function(){e(".rrssb-bottom").parent("div.rrssb-baseline").css("display","block")});return}var l=window.innerHeight;if(n.height()>(l-80)){var k=m.parent("div").attr("class");if(!k){return}var o=k.split(" ")[0];p.parent("div."+o).css("display","block")}}function c(){e(".rrssb-buttons a.popup").on("click",function(k){var l=e(this);g(l.attr("href"),l.find(".text").html(),580,470);k.preventDefault()})}e(i)}(jQuery,BI));(function(a){var b=function(){a('[data-bi-pagination="dropdown"]').on("change","select",function(){if(a(this).val()){window.location=post.uri+a(this).val()}})};a(b)}(jQuery));(function(d,a,f){var h=function(j,i){if(i.ok){d("div.share-email-error").hide();d("div.share-email-body").hide();d("div.share-email-success").show();d("input.btn.email-post").hide();d("input.mail-from").val("");d("input.mail-to").val("")}else{d("div.share-email-error").html(i.error_msg);d("div.share-email-error").show()}};var g=function(j,i){if(i.ok){d("div.email-host-error").hide();d("div.email-host-body").hide();d("div.email-host-success").show();d('input[name="submit"]').hide();d('input[name="email_from"]').val("");d('textarea[name="email_body"]').val("")}else{b(d(j).find(".recaptcha_placeholder"));d("div.email-host-error").html(i.message);d("div.email-host-error").show()}};var b=function(j){var i="recaptcha_placeholder_"+Math.floor(Math.random()*1000);d(j).attr("id",i);Recaptcha.create(RECAPTCHA_PUBLIC_KEY,i,{theme:"white",callback:Recaptcha.focus_response_field})};var c=function(i){d(".button-email",i).each(function(j,k){var l={url:d(k).attr("data-href")||window.location.href};d(k).emailModal({dialog:{title:"Email Article",open:function(){d(".mail-from").defaultValue();d(".mail-to").defaultValue();d("div.share-email-error").hide();d("div.share-email-body").show();d("div.share-email-success").hide();d("input.btn.email-post").show()}},modalContentTmpl:d("#shareEmailModal"),ajax:l,submitCallback:h})})};var e=function(){d.each(["div.embed-post","div.embed-chart"],function(i,j){d(j).hide()});c(d(document));d(".email-vertical-host").emailModal({dialog:{title:"Email your editor",width:"600px",open:function(i,j){d(".mail-from").defaultValue();d("div.email-host-error").hide();d("div.email-host-body").show();d("div.email-host-success").hide();d("input.btn.email-host").show();b(d("div.email-host-body").find(".recaptcha_placeholder"))}},modalContentTmpl:d("#emailHostModal"),ajax:{},submitCallback:g})};d(e);a.subscribe("river:chunk:loaded",function(i){c(i.$container)})}(jQuery,amplify));(function(d,c,f){var a;function b(i,h){if(!h.error){i.html("");d.each(h.feed.entries,function(j,k){i.append('<li><a href="'+k.link+'">'+k.title+"</a></li>")})}else{i.html(h.error)}}function e(j){var h=j.data("bi-feed");var i=new a.feeds.Feed(h);i.load(function(k){b(j,k)})}function g(){var h=d("[data-bi-feed]");a=c.google;if(h.length<1||a===f){return}a.load("feeds","1",{callback:function(){h.each(function(k,j){e(d(j))})}})}d(g)}(jQuery,window));(function(c,a,e){var f;function d(){var g=f.first().data("bi-ticker");YChartsQuoteEmbed.init(g)}function b(){f=c("[data-bi-ticker]");if(f.length<1){return}a.loader.load2("http://static.ycharts.com/embeds/js/quote/embed.bizinsider.js","ycharts",d)}c(b)}(jQuery,BI));(function(e,f){var d="~~~";var w;var a;var o;var q;var b;var g;var j;var p;var k;function t(){if(!e(".component.alerts").length){return}m();c();var x={placeholder:"Select a popular topic or search topics",minimumInputLength:1,multiple:true,separator:d,ajax:{url:"?action=alertsSearchTopics",dataType:"json",quietMillis:300,data:n,results:h},initSelection:i,formatInputTooShort:r};q.select2(x);o=w.find(".categories");v();u()}function m(){w=e(".component.alerts");a=w.find(".types");q=w.find("#categories");b=w.find(".popular.categories");g=w.find(".frequencies");j=w.find(".days");p=w.find(".times");k=w.find(".authors")}function c(){a.change(v);b.on("click",".selection",l);q.on("change",s);g.change(u)}function n(x,y){return{term:x,limit:25,page:y}}function h(z,y){var x={more:z.more,results:[]};e(z.results).each(function(){x.results.push({id:this.label,text:this.label})});return x}function i(x,z){var y=[];e(x.val().split(d)).each(function(){var A=this;y.push({id:A,text:A});b.find(".selection").filter(function(){return e(this).text()==A}).hide()});z(y)}function r(y,x){return"Please enter at least "+x+((x==1)?" character":" characters")}function l(){var x=e(this).text();var y=q.select2("data");y.push({id:x,text:x});q.select2("data",y);e(this).hide();return false}function s(x){if(x.removed!==f){b.find(".selection").filter(function(){return e(this).text()==x.removed.text}).show()}}function v(){var x=a.val();if(x=="category"){k.hide();o.show()}else{o.hide();k.show()}}function u(){var x=g.val();switch(x){case"instant":j.hide();p.hide();break;case"daily":j.hide();p.show();break;case"weekly":j.show();p.show();break}}e(t)}(jQuery));$(function(){var f=$(".user-form");var b=$(".password-input");var k=$(".confirm-input");var c=$(".privacy-input");var e=f.attr("id");var j=$(".password-error").text("Password must have at least 8 characters, including an UPPERCASE letter, a lowercase letter, and a number.");var l=$(".confirm-error").text("Passwords don't match!");var g=$(".privacy-error").text("Please confirm you have read our Privacy Policy.");g.hide();var a=/^(?=[^A-Z]*[A-Z])(?=\D*\d).{8,}$/;f.on("submit",function(){if(e=="registerForm"){if(b.length){if(i()&&h()&&d()){return true}}else{if(d()){return true}}return false}else{if(i()&&h()){return true}else{return false}}});b.on("keyup blur",function(){i()});k.on("keyup blur",function(){h()});c.on("click",function(){d()});function i(){if(b.val().match(a)){j.hide();return true}else{j.show();return false}}function h(){if(b.val()===k.val()){l.hide();return true}else{l.show();return false}}function d(){if(c.is(":checked")){g.hide();return true}else{g.show()}return false}});(function(){function a(){$("body").on("click","input[data-autoselect]",function(){$(this).select()})}$(a)}());(function(){function d(){a()}function a(){$("body").on("click",".show-subscribe-button",b);$("body").on("submit",".comment-subscribe-form",c)}function b(){$("div.post_comment_alert").show();$(this).hide();return false}function c(){$.ajax({type:"POST",url:document.location.href,data:$(this).serialize(),dataType:"json",success:function(e){if(e.ok===true){$("div.post_comment_alert_error").hide();$("div.post_comment_alert_link").parent().html('<div class="alert-box"><i>Thank you. You will receive email alerts about new comments on this post.</i></div>')}else{$("div.post_comment_alert_error").html(e.error_msg).show()}}});return false}$(d)}());(function(b,a,c){var d;b(function(){d=("#comments-form");if(!d.length){return}b("#bi-comment-textarea").defaultValue();var e=document.URL.replace(a.env.getDomain(),"");e=e.replace(/&?msg=[^&]*/,"");e=e.replace(/\?$/,"");var f=b("a#comment_tw_login_link").attr("href");b("a#comment_tw_login_link").attr("href",f+"&redirect="+e)})}(jQuery,BI));(function(){comment_reply_id=null;function a(){$("body").on("click",".comment-reply-btn",function(){g(this);return false});$(".comments").on("click",".btn.rate-up",function(){d(this,1);return false});$(".comments").on("click",".btn.rate-down",function(){d(this,-1);return false});$(".comments").on("click",".btn.flag-offensive",function(){b(this);return false})}$(a);function c(h,i){$(h).click(function(){$(this).attr("disabled","disabled").fadeTo("fast",0.25);$(i).submit()})}function g(i){var j=e(i);if(comment_reply_id==j){comment_reply_id=null;$(i).next().remove()}else{var h=$("#comments-open").html();h=h.replace(/Answer As/,"Respond As");h='<div class="reply-form">'+h+"</div>";$(".reply-form").remove();var k=$(h);k.find("form").attr("id","comments-form-reply");$(i).after(k).next().find("input[name=reply]").val(j);c("#comments-form-reply .submit-button","#comments-form-reply");comment_reply_id=j}return false}function f(h){h=h?h:{};if(window.post){h["class"]="Post";h.id=post.id}if(window.question){h["class"]="Question";h.id=question.id}return h}function d(k,m){if(m!=-1&&m!=1){return false}var j=$(k).parent().parent().find(".rate-up");var n=$(k).parent().parent().find(".rate-down");var h=j.find(".count");var i=n.find(".count");if(j.hasClass("selected")){if(m==1){return false}else{j.removeClass("selected");h.html(parseInt(h.html(),10)-1)}}if(n.hasClass("selected")){if(m==-1){return false}else{n.removeClass("selected");i.html(parseInt(i.html(),10)-1)}}if(m==-1){n.addClass("selected");i.html(parseInt(i.html(),10)+1)}else{j.addClass("selected");h.html(parseInt(h.html(),10)+1)}if(parseInt(h.html(),10)>0){j.addClass("voted")}else{j.removeClass("voted")}if(parseInt(i.html(),10)>0){n.addClass("voted")}else{n.removeClass("voted")}var l=e(k);var o=f();o.comment_id=l;o.rate=m;$.ajax({type:"POST",url:"/ws/ratecomment",data:o,dataType:"json",success:function(p){},error:function(){alert("We're experiencing a temporary problem with our rating system. Try again later.")}});return false}function b(h){if($(h).html()=="Flagged"){return false}if(!confirm("Are you sure you want to report this comment as offensive?")){return false}var i=e(h);$.ajax({url:document.location.href,type:"POST",data:{action:"offensive",cid:i},dataType:"json",success:function(j){if(j.ok){$(h).html("Flagged");alert("Thank you. This comment will be reviewed.")}else{alert(j.error_msg)}},error:function(){alert("We're experiencing a temporary problem with our commenting system. Try again later.")}});return false}function e(h){return $($(h).parents(".comments")[0]).attr("id").split("-")[1]}$(document).ready(function(){if(!$("#comments-form").length){return}c("#comments-form .submit-button","#comments-form")})}());(function(F,f,i){var s,p,B;var n;var o;var l,D,w,k,A,x;function j(){n=false;var K=F.comments.getAllComments?"get_all_comments":"get_comments";var I="/comments";var J={action:K,pundits_only:F.comments.filterPundits,post_name:F.post.name,no_reply_filter:F.comments.noReplyFilter,mobile:F.comments.mobile};if(F.comments.currentPage!="undefined"){J.comments_page=F.comments.currentPage}f.ajax({url:I,type:"GET",data:J,dataType:"html",success:function(L){n=true;if(F.comments.getAllComments){l.html(L);z();F.comments.getAllComments=0}else{$commentsSection=F.comments.filterPundits?f("#pundits"):f("#non-pundits");$commentsSection.html(L)}m();f("#pundits .non-pundit .inner .non-pundit-content").hide();f("#pundits .non-pundit-reply").hide();f("#non-pundits .show-original-comment").hide();c();u();return false},error:function(){return"Error retrieving comments."},complete:function(){if(!b&&window.location.hash!==""){var L=window.location.hash;window.location.hash="";window.location.hash=L}}});return false}function d(){o=true;u()}function u(){if(n&&o){F.FB_Core.user_profile_pics()}}amplify.subscribe("facebook-init",d);function G(O,M,L,N){var J="/comments";var K={action:"get_single_comment",cid:O,section:M,pundits_only:N?0:F.comments.filterPundits,post_name:F.post.name};if(F.comments.currentPage!="undefined"){K.comments_page=F.comments.currentPage}var I=F.comments.filterPundits?"#pundits":"#non-pundits";I+=" div#comment-shell-"+O;n=false;f.ajax({url:J,type:"GET",data:K,dataType:"html",success:function(P){n=true;f(I).html(P);if(!N||F.comments.filterPundits){E();f(I+" .show-original-comment").hide()}u()},error:function(){f(I).html("Error loading replies.")},cache:true});return false}function z(){if(F.comments.filterPundits){f(".comments-tabs a:first").tab("show").parent().addClass("active");f(f(".comments-tabs a:first").attr("href")).addClass("active")}else{var I=f(".comments-tabs li:last > a");I.tab("show").parent().addClass("active");f(I.attr("href")).addClass("active")}F.comments.refresh=e;F.comments.getComments=j;m();return false}function y(I){f(I).addClass("active");f(I).siblings(".tab").removeClass("active");return false}function c(){D.hide();h();g();C();E();v()}function h(){k=f(".comments .next-prev");k.each(function(){f(this).find(".previous, .next").each(function(){var I=f(this).attr("rel");f(this).unbind("click").click(function(J){F.comments.currentPage=I;j();return false})})})}function g(){f("#comments-1 .badge").html(F.comments.pundit_count);f("#comments-2 .badge").html(F.comments.count)}function C(){f(".replies .view-all a").each(function(){f(this).unbind().click(function(){H(f(this),0);return false})});return false}function E(){f(".replies .show-entire-thread a").each(function(){f(this).unbind().click(function(){H(f(this),1);return false})})}function v(){f("#pundits .show-original-comment a").each(function(){var I=f(this).attr("rel");f(this).unbind().click(function(){f("#pundits #comment-"+I+" .non-pundit-content").show();f("#pundits #comment-"+I+" .non-pundit-reply").show();f(this).parent().hide();return false})})}function H(L,I){var K=f(L).parent().parent();K.find(".replies-loading").show();var J=K.attr("id").split(" ");var O=J[0];var M=J[1];var N=J[2];G(O,N,M,I)}function e(){a();j()}function r(){D.hide();w.addClass("high-traffic-comments");w.find(".comments-content").html('<a href="#">Read Comments &#187;</a>');w.find("a").click(function(I){I.preventDefault();D.show();j()})}function a(){l=f(".comments-content"),D=f("#comments-loading-image");w=f("#comments-container")}function q(I){url=window.location.href;data={action:"request_pundit_status"};f.ajax({url:url,type:"POST",data:data,success:function(J){if(J.success){f(".pundit-request a").attr("disabled","disabled").hide();var K=f(I).parent().attr("rel");f("#"+K).html('<div class="alert alert-success">Your request has been submitted to our moderators for review.</div>')}else{}return J.success},error:function(){return false}});return false}function m(){f("#pundit-request-container-bottom").hide();
if(!F.displayPunditRequestLinks){return}if((F.comments.filterPundits&&(F.comments.pundit_page_count>=5))||(!F.comments.filterPundits&&(F.comments.page_count>=5))){f("#pundit-request-container-bottom").show()}}function t(){f(function(){if(!F.post.name){return}a();if(!F.displayPunditRequestLinks){f(".pundit-request").hide()}else{if(F.displayPunditRequestLinks=="non-logged-in"){f(".pundit-request a").attr("href","/register?first=index&pundit_request=1")}else{f("body").on("click",".pundit-request a",function(J){J.preventDefault();q(f(this))})}}f("body").on("click",".comments-content-message, .no-pundit-comments a",function(J){J.preventDefault();F.comments.filterPundits=0;z();F.cookies.set("comments-show-pundits","false")});f("body").on("click",".pundit-comments-content-message",function(J){J.preventDefault();F.comments.filterPundits=1;z();F.cookies.set("comments-show-pundits","true")});if(F.highTrafficMode){r()}else{var I=F.cookies.get("comments-show-pundits");if(I){if(I==="true"){F.comments.filterPundits=1}else{F.comments.filterPundits=0;F.comments.getAllComments=1}}j()}})}t();var b=false;f(function(){f(window).scroll(function(){b=true})});F.namespace("comments");F.comments.refresh=e;F.comments.getComments=j;F.comments.toggleCommentsSection=z}(BI,jQuery));(function(d,a,c,e){var b={params:{},init:function(g){this.params=g;this.isFirstTime=0;this.jumpLinks={};this.interval=5;try{if(c.external.msIsSiteMode()){if(c.external.msIsSiteModeFirstRun(0)){if(typeof c._gaq!=="undefined"){_gaq.push(["_trackEvent","ie9Pinned","Pinned Site"])}}else{if(typeof c._gaq!=="undefined"){_gaq.push(["_trackEvent","ie9Pinned","Loaded Pinned Site"])}}d(this.updateFeed)}}catch(f){}},updateFeed:function(){var h,f;if(b.params.hid){f="//"+a.sailthruHorizonURI+"/horizon/recommend";var g=b.params.hid;b.params={number:5,format:"jsonp",app:"ie-pinned-site",hid:g,nopageview:true};h="jsonp"}else{f="/ie9_pinned";h="json"}d.ajax({type:"GET",url:f,data:b.params,dataType:h,success:function(i){if("content" in i){i=i.content}if(i.count<=0){return}var l=0;for(var k=0;k<b.jumpLinks.length;k++){for(var m=0;m<i.length;m++){if(b.jumpLinks[k]["url"]==i[m]["url"]){l++}}}if(l==5){return}b.jumpLinks=i;b.updateJumpList("Recommended For You",b.jumpLinks)}});setTimeout(b.updateFeed,b.interval*60000)},updateJumpList:function(f,h){c.external.msSiteModeClearJumplist();c.external.msSiteModeCreateJumpList(f);for(var g=h.length-1;g>=0;g--){c.external.msSiteModeAddJumpListItem(h[g]["title"],h[g]["url"],a.env.getDomain()+"/favicon.ico")}c.external.msSiteModeShowJumplist();c.external.msSiteModeActivate()}};amplify.subscribe("ie9-pinned-site",b.init)}(jQuery,BI,window));(function(b,d){var a=function(f,h){var g=b(this).attr("rel");var e=parseInt(b.now()/1000)-g;if(e<90){return"1m"}if(e<3570){return Math.round(e/60)+"m"}if(e<86340){return Math.round(e/3600)+"h"}return h};var c=function(){b('[data-bi-format="date"]').text(a)};b(c)}(jQuery));(function(b){var e=function(){b("li.more").hover(function(){b(this).find(".more-menu").toggle()})};var d=function(g,f){if(f.ok){b("div.share-email-error").hide();b("div.share-email-body").hide();b("div.share-email-success").show();b("input.btn.email-post").hide();b("input.mail-from").val("");b("input.mail-to").val("")}else{b("div.share-email-error").html(f.error_msg);b("div.share-email-error").show()}};var a=function(){b(document).on("hover","#content ul.share",function(){b(this).css("overflow","visible")})};var c=function(){e();a()};b(c)}(jQuery));$(function(){var a=document.URL.replace(BI.env.getDomain(),"");a=a.replace(/^\/perfect_market\/navigation(\?vertical=)?/,"/");a=a.replace(/&?msg=[^&]*/,"");a=a.replace(/\?$/,"");if(!a.match(/^(\/login|\/register)/)){$("a#login_link").attr("href",BI.secureURI+"/login?redirect="+a);$("a#logout_link").attr("href","/logout?redirect="+a);$("form[name='login-form']").attr("action",BI.secureURI+"/login?redirect="+a);var c=$("a#tw_login_link").attr("href");$("a#tw_login_link").attr("href",c+"&redirect="+a);var c=$("a#linkedin_login_link").attr("href");$("a#linkedin_login_link").attr("href",c+"&redirect="+a);var c=$("a#menubar-register").attr("href");$("a#menubar-register").attr("href",c+"&redirect="+a)}var b=$(".masthead .user form");b.attr("action",b.attr("action")+"?redirect="+a);(function(f,e,h){var d;function g(){d=f(".fb-promo").show();if(!d.length){return}d.on("click","a",function(){e.FB_Core.login();return false})}if(!e.authenticated.facebook){f(g)}}(jQuery,BI))});(function(){var b=false;function a(){var c=$(".masthead .links ajax-loaded-script");var d=document.createElement("script");d.src=c.attr("src");c.parent()[0].appendChild(d);b=true}amplify.subscribe("bi-ajax-route-loaded",function(c){if(c.indexOf("/esi/user_menubar")>-1&&$(".masthead .links ajax-loaded-script").length&&!b){a()}});$(function(){if($(".masthead .links ajax-loaded-script").length&&!b){a()}})}());$(document).ready(function(){$("#news-form-unsub").submit(function(e){if($("#null-reason").is(":selected")){alert("Please help us improve our newsletter offerings by selecting from the list provided!");return false}return true});var b=$("#news-form");b.on("submit",function(){if(c()){return true}return false});var d=$(".privacy-input");var a=$(".privacy-error").text("Please confirm you have read our Privacy Policy.");a.hide();d.on("click",function(){c()});function c(){if(d.is(":checked")){a.hide();return true}else{a.show()}return false}if(!$(".right-news").length){return}$("#news-signup").click(function(){if($("#news-email").data("email")){var e=new Array;$.each($("input[name='newsletters[]']:checked"),function(){e.push($(this).val())});$.ajax({type:"post",url:"/newsletter?action=update",data:{newsletters:e},success:function(f){if(f){$("#news-alert").attr("class","alert alert-success").html("Success! Your Newsletter preferences have been saved.").show()}else{$("#news-alert").attr("class","alert alert-error").html("Oops! Something went wrong. Please try again.").show()}},dataType:"json",async:false});return false}return true});$("#news-email").focus(function(){var e=$(this).data("email");if(e){$(this).val($(this).data("email"));$(this).attr("disabled","disabled")}$("#newsletter-expand").slideDown()});$("#news-email").val("");$("#news-alert").hide();$("#news-email").defaultValue()});(function(){function b(){c();a()}function c(){amplify.subscribe("slideshow-content-rendered",a)}function a(){$(".click-to-enlarge .image a.zoomin, a.zoomin.enlarge").each(function(){var e=$(this);var d=e.attr("title_caption");var f=e.attr("title_source");var g;if(d||f){g='<span class="overlay_title">'+d+'</span><span class="overlay_source">'+f+"</span>"}else{g=e.attr("title")||""}e.lightBox({overrideTitle:function(){return g}})})}$(b)}());(function(a,c){function b(){a("iframe.post-loaded, script.post-loaded").each(function(){var d=a(this).prop("tagName").toLowerCase();var e=a(this).attr("data-src");if(e&&d==="iframe"){a(this).attr("src",e)}else{if(e&&d==="script"){a(this).replaceWith('<script src="'+e+'"><\/script>')}}})}a(b)}(jQuery));(function(c){var e=true;function d(i){var h=c(i);var g=h.parent();var j;j=h.attr("width")/h.attr("height");h.height((g.width()/j).toFixed(0))}function b(i){var h=c(i);var g=h.parent();var j;j=h.width()/h.height();h.width(g.width().toFixed(0));h.height((g.width()/j).toFixed(0))}function a(){if(c(this).is(":visible")){b(this)}}function f(){if(!e){return}c('iframe[src*="youtube.com/"]').each(function(){if(c(this).parents(".related-video-container").length){return}b(this)});c("#ooyalaplayer").each(a);c(".gifvid").each(function(){d(this)});c("[data-responsive-video]").find("iframe").each(a);c(".ooyala-video-player").each(function(){b(this)});c(".ooyala-video-player").each(function(){b(this)})}c(document).ready(f);c(window).resize(f);amplify.subscribe("interstitialAdShown",function(){});amplify.subscribe("interstitialAdHidden",function(){e=true;f()});amplify.subscribe("interstitialAdWillShow",function(){e=false})}(jQuery));(function(){$(function(){$(".videoplaceholder").click(function(){$(this).replaceWith('<iframe class="videoIframe" id="videoframe_'+Math.floor(Math.random()*1000)+'" src="/videoframe?embedcode='+$(this).data("embedcode")+"&videopcode="+$(this).data("videopcode")+"&width="+$(this).data("width")+"&height="+$(this).data("height")+'"></iframe>');return false})})}());(function(a,c){var b=".concierge-post";var e=function(){if(typeof amplify==="undefined"){return}amplify.subscribe("sailthru:ready",function(){d(BI.sailthru.posts);amplify.publish("related-rendered")})};var d=function(l){var j;var h;var m;var f=[];for(j=0;j<l.length;j++){var k=Math.floor(Math.random()*l.length);var g=l.splice(k,1);f[j]=g[0]}l=f;c(b).each(function(i,n){$this=c(this);h=l[i];if(typeof h==="undefined"){return}if(typeof(h.image)=="object"&&h.image.thumb){m=h.image.thumb.replace(/50-50/i,"140-140")}else{if(h.image){m=h.image.replace(/60-45/i,"140-140")}}$this.find("img").attr("src",m);$this.find("a").attr("href",h.url);$this.find("h4 > a").html(h.title);$this.find("p > a").html(h.title)})};c(e)}(window,jQuery));$(function(){$("#hive-more").click(function(a){$(".thehive-module li").slideDown("fast");$(this).fadeOut();a.preventDefault()});$(".thehive-module a.hive-link").mousedown(function(){$.post("/ws/heatmap",{homepage:"thehive-<?=$vertical->name?>",uri:$(this).attr("href")})})});(function(){function a(){$("body").on("click","[data-fade-replace]",function(){$el=$(this);$el.fadeOut();$("#"+$el.data("fade-replace")).fadeIn()})}$(a)}());(function(d,b){var c;function e(){c.fadeOut(1000).fadeIn(1000,e)}function a(){c=d("#countdown .live");if(c.data("bi-countdown-effect")=="blink"){e();amplify.unsubscribe("countdown-tick",a)}}d(a);amplify.subscribe("countdown-tick",a);b.countdownTimer.blink=e}($,BI));(function(E,e){var p;var F;var z;var g;var i;var c=vertical+"splitHP";var C=vertical+"splitHPtime";var a=600000;var n=1000;var v="";var t;var w;function y(){if(l()&&s()&&!A()){k();m();B();v=u(c);if(v!==""){o(v)}else{d()}}}function A(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function B(){if(b()){q(c)}}function b(){var H=u(C);H=H==""?0:H;var G=new Date().getTime();return(parseInt(H)+a)<G}function l(){return typeof homepage_id!=="undefined"}function s(){var G=E.location.qs.get("page");G=G==""?1:parseInt(G);return G===1}function k(){p=e(window);F=e(document);z=e("[data-bi-homepage] > .row-fluid .span9 .river");if(!z.length){z=e("[data-bi-homepage] > .row-fluid .span12 .river")}}function r(){if(l()&&s()&&!A()){g=e("[data-load-more-notification]");i=e(".pager");i.hide();g.show()}}function m(){t=z.height()-n}function d(){p.scroll(f)}function f(){if(!w){m()}if(!w&&t&&p.scrollTop()>=t){j();w=true}}function j(){var H=h;H.action="postload";var G=window.location.protocol+"//"+window.location.host+window.location.pathname;e.ajax(G,{data:H}).done(function(I){o(I);x(c,I);x(C,new Date().getTime())})}function x(G,H){if(D()){window.sessionStorage.setItem(G,H)}}function u(H){var G="";if(D()){G=window.sessionStorage.getItem(H)}G=G==undefined?"":G;return G}function q(G){if(D()){window.sessionStorage.removeItem(G)}}function D(){return !(typeof window.sessionStorage=="undefined")}function o(G){z.append(G);amplify.publish("river:chunk:loaded",{$container:z});g.hide();i.show()}function h(){var H,J=/\+/g,I=/([^&=]+)=?([^&]*)/g,L=function(M){return decodeURIComponent(M.replace(J," "))},K=window.location.search.substring(1);var G={};while(H=I.exec(K)){G[L(H[1])]=L(H[2])}return G}e(y);r()}(BI,jQuery));(function(h,d,b){var j;var c;var a;var g="cookie_notice_shown";function k(){if(!h.pageData.get("enableCookieNotice")){return}if(h.cookies.get(g)){return}var l=h.pageData.get("cookieNoticeTemplate");if(!l){return}h.template({tpl:l,frontend:true,data:{},callback:function(m){e();f();c.append(m);h.cookies.set(g,true)}})}function e(){c=d("[data-cookie-notice-container]")}function f(){c.on("click","[data-close-notice]",i)}function i(){c.remove()}d(k)}(BI,jQuery));(function(a,c){function d(){var e=a(".gif-icons");a(".gif-ipad").each(function(){var f=a(this);f.on("tap",function(g){g.preventDefault();e.show();f.find(".gif-icons").hide();f.find("video")[0].play()})})}function b(){d()}a(b)}(jQuery));(function(g,o,i){var a;var f="stick";var c=false;var s;var m=0;var p=g(window);var w={BOTTOM_REACHED:h,TOP_REACHED:d,REACHED_OTHER_EL_BOTTOM:r,SCROLL_PAST_SHARE:k,REACHED_OTHER_EL:n,REACHED_STICKY_UPWARD:j,REACHED_TRANSITION_VALUE:t};function v(x){this.el=x.el;this.otherEl=x.otherEl||{};this.container=x.container;this.stateChecks=x.stateChecks;this.bindStickEvent=x.bindStickEvent;this.bindUnStickEvent=x.bindUnStickEvent;this.bindEvent=x.bindEvent;this.STICKY_BUFFER=x.STICKY_BUFFER;this.STICKY_TRANSITION_BUFFER=x.STICKY_TRANSITION_BUFFER;this.STICKY_TRANSITION_ABS_VALUE=x.STICKY_TRANSITION_ABS_VALUE;this.transition_offset_setting=null;this.transitionOffsetValue=x.transitionOffsetValue;this.done=false;this.eventNS=x.eventNS}v.prototype.checkStates=function(){var x=this;g.each(this.stateChecks,function(y,A){var z=g.proxy(w[A],x);z()})};function h(){var x=g(this.el);return(window.pageYOffset>(x.offset().top+x.height()))&&this.complete()}function d(){var y=this.el.getBoundingClientRect().top;var z=this.STICKY_BUFFER||0;var x=(y-z)<=0;return x&&this.stick()}function j(){var y=g(this.el);var x=35;if(c){if((window.pageYOffset+x)<this.transition_offset_setting){y.removeClass("scroll-away");y.css("top","");c=false;this.stick()}}}function t(){return window.pageYOffset>=this.STICKY_TRANSITION_ABS_VALUE&&this.transitionStick()}function n(){var x=this.el.getBoundingClientRect().bottom;var y=this.otherEl.getBoundingClientRect().top;return(x>=y)&&!c&&this.transitionStick()}function r(){var A=g(this.el);var z=g(this.otherEl);var y=90;var B=(z.offset().top+z.outerHeight(true))-y;var D=A.offset().top;var C=window.pageYOffset;var x=C<m;m=C;return(D<=B&&x)&&this.unstick()}function k(){var x=g(this.container);var y=(g(this.otherEl).offset().top-71)+BI.configs.ads.subnav_sticky_ad_buffer;if(window.pageYOffset>y){if(this.done&&c){return}this.complete();s=window.clearInterval(s);x.height("auto")}}v.prototype.complete=function(){var x=g(this.el);x.attr("style",null);x.removeClass("scroll-away");c=false;this.done=true;this.unstick();p.off("scroll"+this.eventNS,g.proxy(this.checkStates,this))};v.prototype.unstick=function(){var x=g(this.el);if(x.hasClass(f)){x.removeClass(f)}};v.prototype.stick=function(){var x=g(this.el);var y=g(this.container);if(this.done){return}if(!x.hasClass(f)&&!c){x.removeClass("scroll-away");y&&y.height(x.height());x.addClass(f);return}};v.prototype.transitionStick=function(){var x=g(this.el);if(!x.hasClass(f)||this.done){return}x.addClass("scroll-away");x.removeClass(f);this.transition_offset_setting=this.transitionOffsetValue(x);x.css("top",this.transition_offset_setting);c=true};function l(){a=g("[data-sticky]")}function b(x){if(x.bindStickEvent){o.subscribe(x.bindStickEvent,g.proxy(x.stick,x))}if(x.bindUnStickEvent){o.subscribe(x.bindUnStickEvent,g.proxy(x.unstick,x))}}function e(x){m=0;p.on("scroll"+x.eventNS,g.throttle(20,g.proxy(x.checkStates,x)))}function u(){var y=[];var x;var z;l();a.each(function(A,B){y[g(B).data("sticky")]=BI.sticky[g(B).data("sticky")];g(B).data("sticky",BI.sticky[g(B).data("sticky")]);g(B).data("sticky").el=B;g(B).data("sticky").container=g(B).data("sticky").container&&B.parentNode});y.leaderboard&&(x=new v(y.leaderboard));y.lower300&&(z=new v(y.lower300));if(y.leaderboard){b(x);e(x);x.unstick();x.checkStates();x.container&&q()}if(y.lower300){e(z);z.checkStates();z.unstick()}}function q(){var x=g(this);var z=g(this.container);s=self.setInterval(A,50);var y=x.height();function A(){var B=x.height();if(y!==B){z.height(x.height());y=B}}}g(u);exposed={leaderboard:{stateChecks:["REACHED_OTHER_EL","REACHED_STICKY_UPWARD","SCROLL_PAST_SHARE"],bindStickEvent:"masthead-collapsed",bindUnStickEvent:"masthead-expanded",otherEl:g("[data-share]")[0],container:true,STICKY_TRANSITION_BUFFER:24,transitionOffsetValue:function(x){var y=BI.configs.ads.subnav_sticky_ad_buffer;return(g(this.otherEl).offset().top-x.height()-this.STICKY_TRANSITION_BUFFER)+y},eventNS:".leaderboard"},lower300:{stateChecks:["TOP_REACHED","REACHED_OTHER_EL_BOTTOM","REACHED_TRANSITION_VALUE","REACHED_STICKY_UPWARD","BOTTOM_REACHED"],bindEvents:"adRendered",otherEl:g(".right-rail")[0],STICKY_BUFFER:95,STICKY_TRANSITION_ABS_VALUE:8000,transitionOffsetValue:function(){return this.STICKY_TRANSITION_ABS_VALUE
},eventNS:".lower300"}};BI.sticky=exposed}(jQuery,amplify));(function(i,n,j){var t;var l;var e={};var r={};var k=0;var s=0;var u=200;if(BI.isMobile){u=300}var o=false;var a=false;var h=3;var b=false;function m(){t=i(".main-nav");l=i(".vaop-breakpoint");$singleSlidesLink=i("a[start-href].href-swap")}function d(){}function f(){i(window).scroll(i.throttle(50,q));q()}function q(){var x=window.pageYOffset-t.height()+window.innerHeight+u;if(!o&&(x>l.eq(k).offset().top)&&typeof e[k]==="undefined"){for(var v=0;v<h;v++){g(k);if(typeof BI.vaop[k]!=="undefined"){var w=BI.vaop[k].embeds;if(w.indexOf("instgrm")>=0){b=true}}}if(b&&typeof instgrm!=="undefined"){instgrm.Embeds.process()}}if(!a&&(x>l.eq(s+1).offset().top)&&typeof r[s]==="undefined"){c(s)}}function c(w){r[w]=true;s++;var v={google:{path:location.pathname+"/"+BI.vaop[w].name},internal:{vertical:window.vertical||"",postId:window.post?window.post.id:"",author:window.post?window.post.author:"",location:location.pathname+"#"+BI.vaop[w].name}};BI.frontendAnalytics.fire(v);if(s===l.length-1){a=true}}function g(v){if(v>=BI.vaop.length){return}var w=BI.vaop[v].html;e[v]=true;l.eq(v).after(w);k++;if(k===l.length){o=true}}function p(){if(typeof BI.vaop!=="object"){return}m();d();f()}i(p)}(jQuery,amplify));(function(c,a,b,e){function d(){a.loader.load("https://apis.google.com/js/plusone.js");a.loader.load("https://plus.google.com/js/client:plusone.js?onload=gPlusInit")}c(d)}(jQuery,BI,window));(function(e,d,c,g){d.gPlusInit=function(){f();try{delete d.gplusInit}catch(i){d.gplusInit=g}};d.gPlusLogin=function(i){b(i);try{delete d.gPlusLogin}catch(j){d.gPlusLogin=g}};function h(k,m){var j=false;var l=false;setTimeout(function(){l=true},10000);var i=e(k).offset().top;e(d).scroll(function(){if(!j&&e(d).scrollTop()+e(d).height()>i&&l===true){j=true;m()}})}function f(){var j={approvalprompt:"force",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/plus.profile.emails.read",requestvisibleactions:"http://schema.org/AddAction",clientid:gPlusConfigs.client_id,redirecturi:"postmessage",accesstype:"offline",callback:"gPlusLogin",cookiepolicy:"single_host_origin"};var l=["gplus_login_button","gplus_register_button","gplus_login_link"];for(var k=0;k<l.length;k++){gapi.signin.render(l[k],j)}}function b(i){if(!i.access_token){return}var j="/register?action=googleplus&first=googleplus";if(d.location.pathname!=="/login"&&d.location.pathname!=="/register"){j=j+"&redirect="+encodeURIComponent(d.location.pathname)}j=j+"&state="+encodeURIComponent(i.state)+"&access_token="+encodeURIComponent(i.access_token)+"&token_type="+encodeURIComponent(i.token_type)+"&expires_in="+encodeURIComponent(i.expires_in)+"&code="+encodeURIComponent(i.code);d.location.replace(j)}function a(){}c.Google_Plus={init:f,login:b,logout:a}}(jQuery,window,BI));(function(g,l,u,h){var e=false,m=true,p=true,n=false,v=false,x=false;function j(){if(!r()){return false}g.get("/ws/googleplus?action=postMoment",{name:l.location.pathname.substring(1)},function(y){if(!y||y.error){o("An error occured. Could not post app activity.",function(){},null)}else{message="Added to your Google activity log - <a href='#' class='social-reader-notification-link'>Undo</a>";o(message,s,y.id);k()}})}function s(y){g.get("/ws/googleplus?action=deleteMoment",{id:y},function(z){if(!z||z.error){}else{message="Post removed - <a href='#' class='social-reader-notification-link'>Reshare</a>";o(message,j);k()}})}function k(y){if(!y){y=5}g.get("/ws/googleplus?action=listMoments",function(z){activity_list=g(".gp-remove-articles");activity_list.html("<p></p>");if(typeof(z)!="undefined"){var A=null;var B=0;g.each(z,function(C,D){if(B>=y){return}list_item=('<p><a class="sprites remove-btn" title="Remove article" data-post-id="'+D.id+'"></a><a href="'+D.target.url+'">'+D.target.name+"</a></p>");if(A!==D.target.name){activity_list.append(list_item);B++}A=D.target.name});g(".gp-remove-articles .remove-btn").click(function(C){C.preventDefault();post_id=g(this).attr("data-post-id");c(post_id)})}})}function c(y){g.get("/ws/googleplus?action=deleteMoment",{id:y},function(z){k()})}function o(y,A,z){if(w()){y=y+' <a class="close-button" onclick="$(\'#social-reader-notification\').hide();"></a><br style="clear:both;"/>';gp_notify=g("#social-reader-notification");gp_notify.html(y);g(".social-reader-notification-link").click(function(B){B.preventDefault();A(z)});gp_notify.show();if(gp_notify.is(":hidden")){gp_notify=g("#social-reader-notification").detach();gp_notify.prependTo(".referrers-anchor")}if(g(".ychartsQuoteEmbed").length>0){gp_notify=g("#social-reader-notification").detach();gp_notify.prependTo(".bottom-related")}}}function r(y){if(typeof(y)!="undefined"){if(y===true||y===false){e=y}}return e}function w(y){if(typeof(y)!="undefined"){if(y===true||y===false){m=y}}return m}function b(y){if(typeof(y)!="undefined"){if(y===true||y===false){p=y}}return p}function d(y){if(typeof(y)!="undefined"){if(y===true||y===false){v=y}}return v}function f(y){if(typeof(y)!="undefined"){n=y}return n}function t(A,C){var z=false;var B=false;setTimeout(function(){B=true},10000);var y=g(A).offset().top;g(l).scroll(function(){if(!z&&g(l).scrollTop()+g(l).height()>y&&B===true){z=true;C()}})}function a(){g.get("/ws/googleplus?action=userInfo",function(y){g("span#gp-username").html(y.displayName);if(y.image.url){var z=g(".gp-profile-pic");z.replaceWith('<img src="'+y.image.url+'" class="pull-left" />')}})}function q(){if(x===true){return}if(d()===false){return}g.get("/ws/googleplus?action=isLoggedIn",function(y){if(typeof(y)!="undefined"&&y!==null){if(y.logged_in===true){g(".fb-promo").hide();g(".linkedin a.login").hide();if(r()){g(".google-app-container a.switch").removeClass("switch-off")}else{g(".google-app-container a.switch").addClass("switch-off")}if(w()===true){g(".google-app-container #notify_yes").attr("checked",true)}else{g(".google-app-container #notify_no").attr("checked",true)}a();g(".google-app-container a.switch").click(function(z){z.preventDefault();if(!g(this).hasClass("switch-off")){g.post("/ws/googleplus?action=setting",{gp_social_share:false});g(this).addClass("switch-off");g("#gp-app-form input:radio").attr("disabled",true)}else{g.post("/ws/googleplus?action=setting",{gp_social_share:true});g(this).removeClass("switch-off");g("#gp-app-form input:radio").attr("disabled",false)}});g('.google-app-container input[name="shared"]').change(function(){val=g(this).val();g.post("/ws/googleplus?action=setting",{gp_share_notify:val})});g(".gp-remove-articles .remove-btn").click(function(z){z.preventDefault();g(this).parent("p").remove()});g(".google-app-container").show();if(g("#comments").length>0){t("#comments",j)}k(5)}}x=true})}u.GP_SocialReader={share_setting:r,notify_setting:w,widget_setting:b,kill_switch:d,loggedin_uid:f,init:q};var i=g('[data-bi-social-reader="google"]');
if(i.length>0){u.GP_SocialReader.kill_switch(i.data("bi-social-reader-kill"));u.GP_SocialReader.loggedin_uid(i.data("bi-social-reader-uid"));u.GP_SocialReader.widget_setting(i.data("bi-social-reader-widget"));u.GP_SocialReader.share_setting(i.data("bi-social-reader-share"));u.GP_SocialReader.notify_setting(i.data("bi-social-reader-notify"))}}(jQuery,window,BI,undefined));(function(f,c,a,e,h){var d;function b(i){e.fbAsyncInit=function(){if((typeof FB!="undefined")&&FB.init){FB.init({appId:i,status:true,cookie:true,xfbml:true});FB.Event.subscribe("edge.create",function(j){dataLayer.push({event:"socialInt",socialNetwork:"Facebook",socialAction:"Like",socialTarget:j})})}a.publish("facebook-init")};c.loader.load("//connect.facebook.net/en_US/all.js")}function g(){d=f("[data-bi-facebook-root]");if(d.length>0){b(d.data("bi-facebook-root"))}}f(g)}(jQuery,BI,amplify,window));(function(g,h,j,c){var d;function i(p){d=p;var o=j.FB_SocialReader.loggedin_uid();if(j.FB_SocialReader.widget_setting()){FB.login(function(q){if(q.authResponse){FB.api("me/permissions","get",function(r){if(typeof(r.data)!="undefined"&&r.data!==null){if(r.data[0].publish_actions){g.post("/account/ajax/fb_social_setting",{fb_social_widget:true},function(){document.location=a(true)})}else{g.post("/account/ajax/fb_social_setting",{fb_social_widget:false},function(){document.location=a(false)})}}})}},{scope:"publish_actions"})}else{if(!o){FB.login(function(q){document.location=a(false)})}}return false}function a(o){var p="/register?action=facebook";if(o){p+="&fb_social_widget=1"}if(d){p+="&first=facebook"}if(h.location.pathname!=="/login"&&h.location.pathname!=="/register"){p+="&redirect="+encodeURIComponent(document.location.href)}return p}function n(){var o=function(){if(FB.getAuthResponse()){FB.logout(function(){document.location="/logout?redirect="+encodeURIComponent(document.location.href)});return false}};var p=function(){document.location="/logout?redirect="+encodeURIComponent(document.location.href)};m(o,p);return true}function k(){var o=document.location.href;FB.ui({method:"stream.share",u:o});return false}function e(){m(function(o){FB.api("/me/picture?access_token="+o.fb_token,function(p){g(".fb-profile-pic").replaceWith('<img src="'+p.data.url+'" class="pull-left"/>')})})}function b(){g("span.fb-user-pic").each(function(o,q){var p=g(q);fb_uid=p.attr("data-fb-uid");p.replaceWith('<img src="https://graph.facebook.com/'+fb_uid+'/picture" />')})}function f(){m(function(o){FB.api("/me/?access_token="+o.fb_token,function(p){g("span#fb-username").html(p.first_name)})})}function m(o,p){FB.getLoginStatus(function(q){if(q.status==="connected"){var r={fb_uid:q.authResponse.userID,fb_token:q.authResponse.accessToken};if(o){o(r)}}else{if(p){p()}}})}function l(){m(function(){e();f()});b();g("#logout_link").click(n)}j.FB_Core={init:l,login:i,logout:n,share:k,check_auth:m,profile_pic:e,user_profile_pics:b,username:f}}(jQuery,window,BI));(function(f,k,u,g){var d=false,l=true,p=true,n=false,v=false,x=false;function i(){if(!r()){return false}u.FB_Core.check_auth(function(z){var y=f('meta[property="og:url"]').attr("content").replace("local","www");FB.api("me/permissions","get",function(A){if(typeof(A.data)!="undefined"&&A.data!==null){if(A.data[0].publish_actions){var B={};B.article=y;FB.api("me/news.reads?access_token="+z.fb_token,"post",B,function(C){if(!C||C.error){}else{message="Posted to Facebook Timeline - <a href='#' class='social-reader-notification-link'>Undo</a>";o(message,s,C.id);j()}})}}})});return false}function s(y){FB.api(y+"","delete",function(z){if(!z||z.error){}else{message="Post removed - <a href='#' class='social-reader-notification-link'>Reshare</a>";o(message,i);j()}});return false}function j(y){if(!y){y=5}u.FB_Core.check_auth(function(z){FB.api("me/news.reads",function(A){activity_list=f(".fb-remove-articles");if(typeof(A.data)!="undefined"){var B=null;var C=0;f.each(A.data,function(D,E){if(C>=y){return}list_item=('<p><a class="sprites remove-btn" title="Remove article" data-post-id="'+E.id+'"></a><a href="'+E.data.article.url+'">'+E.data.article.title+"</a></p>");if(B!==E.data.article.title){activity_list.append(list_item);C++}B=E.data.article.title});f(".fb-remove-articles .remove-btn").click(function(D){D.preventDefault();post_id=f(this).attr("data-post-id");b(post_id)})}})})}function b(y){u.FB_Core.check_auth(function(z){del_url=y+"";FB.api(del_url,"delete",function(A){if(!A||A.error){}else{j()}})});return false}function o(y,A,z){if(w()){y=y+' <a class="close-button" onclick="$(\'#social-reader-notification\').hide();"></a><br style="clear:both;"/>';fb_notify=f("#social-reader-notification");fb_notify.html(y);f(".social-reader-notification-link").click(function(B){B.preventDefault();A(z)});fb_notify.show();if(fb_notify.is(":hidden")){fb_notify=f("#social-reader-notification").detach();fb_notify.prependTo(".referrers-anchor")}if(f(".ychartsQuoteEmbed").length>0){fb_notify=f("#social-reader-notification").detach();fb_notify.prependTo(".bottom-related")}}}function r(y){if(typeof(y)!="undefined"){if(y===true||y===false){d=y}}return d}function w(y){if(typeof(y)!="undefined"){if(y===true||y===false){l=y}}return l}function a(y){if(typeof(y)!="undefined"){if(y===true||y===false){p=y}}return p}function c(y){if(typeof(y)!="undefined"){if(y===true||y===false){v=y}}return v}function e(y){if(typeof(y)!="undefined"){n=y}return n}function t(A,C){var z=false;var B=false;setTimeout(function(){B=true},10000);var y=f(A).offset().top;f(k).scroll(function(){if(!z&&f(k).scrollTop()+f(k).height()>y&&B===true){z=true;C()}})}function m(y){if(u.FB_SocialReader.loggedin_uid()){y();return}return false}function q(){if(x===true){return}if(c()===false){return}u.FB_Core.check_auth(function(y){m(function(){if(e()!=y.fb_uid){return}FB.api("me/permissions","get",function(z){if(typeof(z.data)!="undefined"&&z.data!==null){if(z.data[0].publish_actions){if(r()){f(".facebook-app-container a.switch").removeClass("switch-off")}else{f(".facebook-app-container a.switch").addClass("switch-off")}if(w()===true){f(".facebook-app-container #notify_yes").attr("checked",true)}else{f(".facebook-app-container #notify_no").attr("checked",true)}f(".facebook-app-container a.switch").click(function(A){A.preventDefault();if(!f(this).hasClass("switch-off")){f.post("/account/ajax/fb_social_setting",{fb_social_share:false});f(this).addClass("switch-off");f("#fb-app-form input:radio").attr("disabled",true)}else{f.post("/account/ajax/fb_social_setting",{fb_social_share:true});f(this).removeClass("switch-off");f("#fb-app-form input:radio").attr("disabled",false)}});f('.facebook-app-container input[name="shared"]').change(function(){val=f(this).val();f.post("/account/ajax/fb_social_setting",{fb_share_notify:val})});f(".fb-remove-articles .remove-btn").click(function(A){A.preventDefault();f(this).parent("p").remove()});f(".facebook-app-container").show();if(f("#comments").length>0){t("#comments",i)}j(5)
}else{u.FB_Core.login()}}else{u.FB_Core.login()}})});x=true})}u.FB_SocialReader={share_setting:r,notify_setting:w,widget_setting:a,kill_switch:c,loggedin_uid:e,init:q};var h=f('[data-bi-social-reader="facebook"]');if(h.length>0){u.FB_SocialReader.kill_switch(h.data("bi-social-reader-kill"));u.FB_SocialReader.loggedin_uid(h.data("bi-social-reader-uid"));u.FB_SocialReader.widget_setting(h.data("bi-social-reader-widget"));u.FB_SocialReader.share_setting(h.data("bi-social-reader-share"));u.FB_SocialReader.notify_setting(h.data("bi-social-reader-notify"))}}(jQuery,window,BI,undefined));$(function(){function a(){if(!$(".content.post").length){return}b()}function b(){amplify.subscribe("facebook-init",BI.FB_Core.init);amplify.subscribe("facebook-init",BI.FB_SocialReader.init)}$(a)});(function(b,a,d){var c=function(){if(typeof homepage_id!="undefined"){b(document).bind("fb_init",BI.FB_Core.init);b(document).bind("fb_init",BI.FB_SocialReader.init);b(".pager .disabled a, .pagination .active a").on("click",function(f){f.preventDefault()});b("body").addClass("two-column-layout");a.publish("river:chunk:loaded",{$container:b(".river")})}};b(c)}(jQuery,amplify));(function(){var c;function a(){c=$("#cc-con")}function b(){c.imagesLoaded(function(){c.masonry({columnWidth:240,itemSelector:".collection-item"})})}function d(){a();b()}$(function(){if(document.getElementById("interstitial-ad-content")){BI.welcomeAd.executeOnHide.push(d);return}d()})}());(function(){function a(){if(!$(".content.category-grid").length){return}b()}function b(){amplify.subscribe("facebook-init",BI.FB_Core.init);amplify.subscribe("facebook-init",BI.FB_SocialReader.init)}$(a)}());(function(a){function b(){var d=a("#archiveSelector");function c(){d.submit()}if(d.length>=1){a("#archive-datepicker").datepicker({dateFormat:"yy-mm-dd",onSelect:c});a("#vertical").change(c)}}a(b)}(jQuery));(function(b,a,d){function c(){if(typeof a.post.quiz!=="undefined"){var e=b(".post-quiz-container");e.biQuiz({data:a.post.quiz})}}b(c)}(jQuery,BI));(function(h,c){var e=false;var d=null;var m=15;var o=false;var f=false;var k=false;var j;var a=function(){h("a[data-liveblog-switch]").click(function(r){r.preventDefault();var q=h(this);if(!q.hasClass("switch-off")){q.addClass("switch-off");n()}else{q.removeClass("switch-off");b()}});h("a[data-liveblog-order]").click(function(r){r.preventDefault();var q=h(this);q.parents("ul").find("li a").removeClass("selected");q.addClass("selected");d=h(this).data("liveblog-order");l()});h("a[data-liveblog-order="+d+"]").addClass("selected")};var l=function(){if(o){return}o=true;h.get(document.location.href,{action:"get_blog",order:d}).success(function(q){if(q.active){j.html(q.html)}else{g()}}).complete(function(){o=false})};var g=function(){n();h("a[data-liveblog-switch]").addClass("switch-off").unbind().click(function(q){q.preventDefault()})};var b=function(){e=true};var n=function(){e=false};var i=function(){if(e){l()}setTimeout(i,m*1000)};var p=function(q){d=q;a();i();b()};h(function(){j=h("[data-bi-liveblog-shell]");if(j.length<1){return}p(j.data("bi-liveblog-order"))})}(jQuery));(function(d,b){var e=5000;function a(h){var g=h.data("ooyalaPlayerId"),i=h.data("ooyalaVideoId");c(g,function(){var k;var j={};var l="ooyala-video-player-"+b.UUID.get();h.attr("id",l);if(h.data("ooyalaAutoplay")===true){j.autoplay=true}j.playerID=g;j.adSetCode=h.data("ooyalaAdSetCode");k=OO.Player.create(l,i,j)})}function c(g,h){d.ajax({cache:true,dataType:"script",success:h,url:"//player.ooyala.com/v3/"+g})}function f(){if(d(".post-video").length){d(".ooyala-video-player").each(function(){a(d(this))})}}d(document).ready(function(){if(b.DFP.loaded){f()}else{amplify.subscribe("dfpLoaded",f);window.setTimeout(function(){if(!b.DFP.loaded){amplify.unsubscribe("dfpLoaded",f);f();console.log("Ooyala video player force-loaded before DFP is available")}},e)}})}(jQuery,BI));(function(){function a(){$("body").on("click","[data-slide-hidden]",function(d){var b=$(this);var c=b.data("slide-hidden");$("."+c+" li").slideDown("fast",function(){b.hide()});d.preventDefault()})}$(a)}());